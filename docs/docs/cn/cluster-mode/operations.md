# 运维流程

## 首次启动应用

首次启动应用时，应先启动其中一个节点，等待插件安装完毕并启用后，再启动其他节点。

## 版本升级

当需要升级 NocoBase 版本时，参考此流程处理。

:::warning{title=注意}
在集群**生产环境**需要谨慎或禁止使用插件管理和版本升级等功能。

NocoBase 暂时未实现集群版本的在线升级，为确保数据一致性，在升级过程中需要暂停对外服务。
:::

操作步骤：

1.  停止当前服务

    停止所有 NocoBase 应用实例，并将负载均衡的流量转发至 503 状态页面。

2.  备份数据

    在升级前，强烈建议备份数据库数据，以防止升级过程中出现异常。

3.  更新版本

    参考 [Docker 升级](../get-started/upgrading/docker) 更新 NocoBase 应用镜像的版本。

4.  启动服务

    1. 启动集群中的一个节点，等待更新完毕并启动成功
    2. 验证功能正确，如有异常且排查无法解决，可回滚至上一个版本
    3. 启动其他节点
    4. 转移负载均衡的流量至应用集群

## 应用内维护

应用内维护指在应用运行状态下，操作维护相关的功能，包括：

* 插件管理（安装、启用、禁用插件等）
* 备份与恢复
* 环境迁移管理

操作步骤：

1.  缩减节点

    将集群内运行应用的节点缩减至 1 个，其他节点停止服务。

2.  进行应用内维护操作，如安装启用插件、备份数据等。

3.  恢复节点

    在维护操作完成，验证功能无误后，启动其他节点，等待节点启动成功后，恢复集群运行状态。
