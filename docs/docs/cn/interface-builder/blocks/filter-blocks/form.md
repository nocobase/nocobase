# 筛选表单

## 介绍

筛选表单允许用户通过填写表单字段来过滤数据。可用于筛选表格区块、图表区块、列表区块等。

## 如何使用

让我们先通过一个简单的例子来快速了解筛选表单的使用方法。假设我们有一个包含用户信息的表格区块，我们希望能够通过筛选表单来筛选数据。像下面这样：

![20251031163036_rec_](https://static-docs.nocobase.com/20251031163036_rec_.gif)

配置步骤如下：

1. 开启配置模式，在页面中添加一个"筛选表单"区块和一个"表格区块"。
![20251031163525_rec_](https://static-docs.nocobase.com/20251031163525_rec_.gif)
2. 在表格区块和筛选表单区块中添加“昵称”字段。
![20251031163932_rec_](https://static-docs.nocobase.com/20251031163932_rec_.gif)
3. 现在就可以开始使用了。
![20251031163036_rec_](https://static-docs.nocobase.com/20251031163036_rec_.gif)

## 高阶用法

筛选表单区块支持更多高级配置，下面是一些常见的用法。

### 关联多个区块

单个表单字段可以同时筛选多个区块的数据。具体操作如下：

1. 点击字段的“Connect fields”配置项。
![20251031170300](https://static-docs.nocobase.com/20251031170300.png)
2. 添加需要关联的目标区块，这里我们选择页面中的列表区块。
![20251031170718](https://static-docs.nocobase.com/20251031170718.png)
3. 选择列表区块中的一个或多个字段进行关联。这里我们选择"昵称"字段。
![20251031171039](https://static-docs.nocobase.com/20251031171039.png)
4. 点击保存按钮，完成配置，效果如下所示：
![20251031171209_rec_](https://static-docs.nocobase.com/20251031171209_rec_.gif)

### 关联图表区块

参考：[页面筛选器与联动](../../../data-visualization/guide/filters-and-linkage.md)

### 自定义字段

除了从数据表中选择字段外，还可以通过“自定义字段”来创建表单字段。比如可以创建一个下拉单选框字段，并自定义选项。具体操作如下：

1. 点击"自定义字段"选项，弹出配置界面。
![20251031173833](https://static-docs.nocobase.com/20251031173833.png)
2. 填写字段标题，在“字段类型”中选择“选择”，并配置选项。
![20251031174857_rec_](https://static-docs.nocobase.com/20251031174857_rec_.gif)
3. 新添加的自定义字段需要手动关联目标区块的字段，操作方法如下：
![20251031181957_rec_](https://static-docs.nocobase.com/20251031181957_rec_.gif)
4. 配置完成，效果如下所示：
![20251031182235_rec_](https://static-docs.nocobase.com/20251031182235_rec_.gif)

目前支持的字段类型有：

- 文本框
- 数字
- 日期
- 选择
- 单选框
- 复选框
- 关联记录

#### 关联记录（自定义关系字段）

“关联记录”适合用于“按关联表记录筛选”的场景。比如在订单列表中，按“客户”筛选订单，或在任务列表中按“负责人”筛选任务。

配置项说明：

- **目标数据表**：表示要从哪个数据表加载可选记录。
- **标题字段**：用于下拉选项和已选标签的展示文本（如名称、标题）。
- **值字段**：用于实际筛选时提交的值，通常选择主键字段（如 `id`）。
- **允许多选**：开启后可以一次选择多条记录。
- **操作符**：定义筛选条件如何匹配（见下方“操作符”说明）。

推荐配置：

1. `标题字段` 选择可读性高的字段（如“名称”），避免使用纯 ID 影响可用性。
2. `值字段` 优先选择主键字段，保证筛选稳定且唯一。
3. 单选场景通常关闭 `允许多选`，多选场景开启 `允许多选` 并配合合适的 `操作符`。

#### 操作符

`操作符` 用于定义“筛选表单字段值”与“目标区块字段值”的匹配关系。

### 折叠

添加一个折叠按钮，可以将筛选表单内容进行折叠和展开，节省页面空间。

![20251031182743](https://static-docs.nocobase.com/20251031182743.png)

支持以下配置：

![20251031182849](https://static-docs.nocobase.com/20251031182849.png)

- **折叠时显示的行数**：设置折叠状态下展示的表单字段行数。
- **默认折叠**：开启后，筛选表单默认以折叠状态显示。
