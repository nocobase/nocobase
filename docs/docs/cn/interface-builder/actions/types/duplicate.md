---

pkg: '@nocobase/plugin-action-duplicate'

---

# 复制

## 介绍

复制操作允许用户基于已有数据快速创建新记录。支持两种复制方式：**直接复制
**与**复制到表单并继续填写**。

## 安装

内置插件，无需单独安装。

## 复制模式

![20260209224344](https://static-docs.nocobase.com/20260209224344.png)

### 直接复制

![20260209224506](https://static-docs.nocobase.com/20260209224506.png)

- 默认以「直接复制」的方式执行；
- **模板字段**：指定要复制的字段，可全选，必填。

![20260209225910](https://static-docs.nocobase.com/20260209225910.gif)

完成配置后点击按钮即可复制数据。

### 复制到表单并继续填写

配置的模板字段会作为**默认值**填充到表单中，用户可基于模板字段值修改后提交完成复制。


![20260209224704](https://static-docs.nocobase.com/20260209224704.png)

**配置模板字段**：仅勾选的字段会带出并作为默认值。

![20260209225148](https://static-docs.nocobase.com/20260209225148.png)

#### 同步表单字段

- 自动解析当前表单区块已配置的字段，作为模板字段；
- 后续若修改了表单区块字段（如关系字段组件调整），需再次打开模板配置并点
  击**同步表单字段**，确保一致性。

![20260209225450](https://static-docs.nocobase.com/20260209225450.gif)

模板数据会作为表单默认值填充，用户可修改后提交完成复制。


### 补充说明

#### 复制、引用、预加载

不同字段（关系类型）有不同处理逻辑：**复制 / 引用 / 预加载**。关系字段的
**字段组件**也会影响处理逻辑：

- Select / Record picker：用于**引用**
- Sub-form / Sub-table：用于**复制**

**复制**

- 普通字段为复制；
- hasOne / hasMany 只能是复制（此类关系不应使用下拉选择、弹窗选择等选择类字段组件，
  应使用 子表单、子表格等字段组件）；
- hasOne / hasMany 的组件变更**不会**改变处理逻辑（仍为复制）；
- 复制的关系字段，所有子字段均可选择。

**引用**

- belongsTo / belongsToMany 为引用；
- 若将字段组件从 「下拉选择」 调整为 「子表单」，关系会从**引用变为复制**（变为
  复制后，所有子字段均可选）。

**预加载**

- 引用字段下的关系字段为预加载；
- 预加载字段在组件变更后可能变为引用或复制。

#### 全选

- 会勾选所有**复制字段**与**引用字段**。

#### 被选为数据模板的记录会过滤以下字段

- 复制的关系数据主键会过滤；引用与预加载不过滤主键；
- 外键；
- 不允许重复的字段；
- 排序字段；
- 自动编码字段；
- 密码；
- 创建人、创建日期；
- 最后更新人、最后更新日期。

#### 同步表单字段

- 将当前表单区块中已配置的字段自动解析为模板字段；
- 后续修改表单区块字段（如关系字段组件调整）后，需再次同步，确保一致性。
