---
pkg: "@nocobase/plugin-ui-templates"
---

# UI 模板

## 介绍

界面模板用于复用界面搭建中的配置，减少重复搭建，并在需要时保持多处配置同步更新。

目前支持的模板类型包括：

- 区块模板：复用整个区块配置
- 字段模板：复用表单/详情区块的“字段区域”配置
- 弹窗模板：复用操作/字段触发的弹窗配置

## 核心概念

### 引用与复制

使用模板时通常有两种方式：

- `引用`：多处共享同一份模板配置；修改模板或任一引用处，其他引用处会同步更新。
- `复制`：复制为独立配置；后续互不影响。

### 保存为模板

当某个区块/弹窗已经配置好时，可以在其设置菜单中使用 `保存为模板`，并选择保存方式：

- `将当前...转为模板`：保存后，当前位置会切换为引用该模板的形式。
- `复制当前...为模板`：仅创建模板，当前位置保持不变。

## 区块模板

### 保存区块为模板

1) 打开目标区块的设置菜单，点击 `保存为模板`  
2) 填写 `模板名称` / `模板描述`，并选择保存模式：
   - `将当前区块转为模板`：保存后，当前位置将替换为 `区块模板` 区块（即引用该模板）
   - `复制当前区块为模板`：仅创建模板，当前区块保持不变

![save-as-template-block-20251228](https://static-docs.nocobase.com/save-as-template-block-20251228.png)

![save-as-template-block-full-20251228](https://static-docs.nocobase.com/save-as-template-block-full-20251228.png)

### 使用区块模板

1) 添加区块 → “其他区块” → `区块模板`  
2) 在配置中选择：
   - `模板`：选择一个模板
   - `模式`：
     - `引用`
     - `复制`

![block-template-menu-20251228](https://static-docs.nocobase.com/block-template-menu-20251228.png)

![select-block-template-20251228](https://static-docs.nocobase.com/select-block-template-20251228.png)

### 将引用转换为复制

当区块正在引用模板时，可在区块设置菜单中使用 `将引用转换为复制`，把当前区块改为普通区块（断开引用），后续修改互不影响。

![convert-block-template-duplicate-20251228](https://static-docs.nocobase.com/convert-block-template-duplicate-20251228.png)

### 注意事项

- `复制` 模式会重新生成区块及子节点的 UID，部分依赖 UID 的配置可能需要重新配置。

## 字段模板

字段模板用于在**表单区块**和**详情区块**中复用字段区域的配置（字段选择、布局与字段配置），避免在多个页面/区块中重复添加字段。

> 字段模板只作用于“字段区域”，不会替换整个区块。若要复用整个区块，请使用上文的区块模板。

### 在表单/详情区块中使用字段模板

1) 进入配置模式，在表单区块或详情区块打开“字段”菜单  
2) 选择 `字段模板`  
3) 选择一个模板，并选择模式：
   - `引用`
   - `复制`

![field-template-menu-20251228](https://static-docs.nocobase.com/field-template-menu-20251228.png)

![use-field-template-config-20251228](https://static-docs.nocobase.com/use-field-template-config-20251228.png)

#### 覆盖提示

当区块中已存在字段时，使用**引用**模式通常会提示确认（因为引用字段会替换当前字段区域）。

### 将引用字段转换为复制

当区块正在引用字段模板时，可在区块设置菜单中使用 `将引用字段转换为复制`，把当前字段区域变为独立配置（断开引用），后续修改互不影响。

![convert-field-template-duplicate-20251228](https://static-docs.nocobase.com/convert-field-template-duplicate-20251228.png)

### 注意事项

- 字段模板仅适用于**表单区块**与**详情区块**。
- 模板与当前区块的绑定数据表不一致时，模板会在选择器中显示为不可用并提示原因。
- 若希望在当前区块对字段进行“个性化调整”，建议直接使用 `复制` 模式，或先执行“将引用字段转换为复制”。

## 弹窗模板

弹窗模板用于复用一套弹窗界面与交互逻辑。关于弹窗的打开方式、尺寸等常规配置，参考 [编辑弹窗](/interface-builder/actions/action-settings/edit-popup)。

### 保存弹窗为模板

1) 打开能触发弹窗的按钮/字段设置菜单，点击 `保存为模板`  
2) 填写模板名称/描述，并选择保存模式：
   - `将当前弹窗转为模板`：保存后，当前弹窗将切换为引用该模板
   - `复制当前弹窗为模板`：仅创建模板，当前弹窗保持不变

![save-as-template-popup-20251228](https://static-docs.nocobase.com/save-as-template-popup-20251228.png)

### 在弹窗配置中使用模板

1) 打开按钮/字段的弹窗配置  
2) 在 `弹窗模板` 中选择模板即可复用

![edit-popup-select-20251228](https://static-docs.nocobase.com/edit-popup-select-20251228.png)

### 使用条件（模板可用范围）

弹窗模板与触发弹窗的操作场景有关。选择器会根据当前场景自动过滤/禁用不兼容的模板（不满足条件时会提示原因）。

| 当前操作类型 | 可使用的弹窗模板 |
| --- | --- |
| **Collection 操作** | 同一 Collection 的 Collection 操作创建的弹窗模板 |
| **非关联 Record 操作** | 同一 Collection 的 Collection 操作或非关联 Record 操作创建的弹窗模板 |
| **关联 Record 操作** | 同一 Collection 的 Collection 操作或非关联 Record 操作创建的弹窗模板；或同一关联字段的关联 Record 操作创建的弹窗模板 |

### 关系数据弹窗

关系数据（关联字段）触发的弹窗模板有特殊的匹配规则：

#### 关系弹窗模板的严格匹配

当弹窗模板是从**关联 Record 操作**创建时（模板带有 `associationName`），该模板只能被**完全相同关联字段**的操作/字段使用。

例如：在 `订单.客户` 关系字段上创建的弹窗模板，只能被其他 `订单.客户` 关系字段的操作使用，不能被 `订单.推荐人` 关系字段使用（即使两者的目标数据表都是 `客户`）。

这是因为关系弹窗模板内部的变量和配置依赖于特定的关联关系上下文。

#### 关系操作复用目标数据表模板

关联字段/操作可以复用**目标数据表的非关系弹窗模板**（Collection 操作或非关联 Record 操作创建的模板），只要数据表一致即可。

例如：`订单.客户` 关系字段可以使用 `客户` 数据表的弹窗模板。这种方式适合在多个关系字段间共享同一套弹窗配置（如统一的客户详情弹窗）。

### 将引用转换为复制

当弹窗正在引用模板时，可在设置菜单中使用 `将引用转换为复制`，把当前弹窗改为独立配置（断开引用），后续修改互不影响。

![convert-popup-to-duplicate-20251228](https://static-docs.nocobase.com/convert-popup-to-duplicate-20251228.png)


## 模板管理

系统设置 → `UI 模板` 中可查看和管理所有模板：

- **区块模板 (v2)**：管理区块模板
- **弹窗模板 (v2)**：管理弹窗模板

> 字段模板来源于区块模板，在区块模板中管理。

![block-template-list-20251228](https://static-docs.nocobase.com/block-template-list-20251228.png)

支持的操作：查看、筛选、编辑、删除。

> **注意**：若模板正在被引用中，则无法直接删除。请先在引用该模板的位置使用 `将引用转换为复制` 断开引用，再删除模板。
