:::tip إشعار الترجمة بالذكاء الاصطناعي
تمت ترجمة هذه الوثائق تلقائيًا بواسطة الذكاء الاصطناعي.
:::

# نظرة عامة على تطوير الإضافات

تعتمد NocoBase **بنية النواة المصغرة**، حيث يقتصر دور النواة على جدولة دورة حياة الإضافات، وإدارة التبعيات، وتغليف القدرات الأساسية. تُقدم جميع وظائف الأعمال في شكل إضافات. لذلك، يُعد فهم الهيكل التنظيمي للإضافة، ودورة حياتها، وطرق إدارتها، الخطوة الأولى في تخصيص NocoBase.

## المفاهيم الأساسية

-   **التوصيل والتشغيل**: يمكن تثبيت الإضافات أو تمكينها أو تعطيلها حسب الحاجة، مما يتيح دمج وظائف الأعمال بمرونة دون الحاجة لتعديل الكود.
-   **تكامل الواجهة الأمامية والخلفية**: تتضمن الإضافات عادةً تطبيقات لكل من جانب الخادم وجانب العميل، مما يضمن الاتساق بين منطق البيانات وتفاعلات الواجهة.

## الهيكل الأساسي للإضافة

كل إضافة هي حزمة npm مستقلة، وعادةً ما تحتوي على هيكل الدليل التالي:

```bash
plugin-hello/
├─ package.json          # اسم الإضافة، التبعيات، والبيانات الوصفية لإضافة NocoBase
├─ client.js             # ناتج بناء الواجهة الأمامية، للتحميل في وقت التشغيل
├─ server.js             # ناتج بناء جانب الخادم، للتحميل في وقت التشغيل
├─ src/
│  ├─ client/            # الكود المصدري لجانب العميل، يمكنه تسجيل الكتل، الإجراءات، الحقول، إلخ.
│  └─ server/            # الكود المصدري لجانب الخادم، يمكنه تسجيل الموارد، الأحداث، الأوامر، إلخ.
```

## اتفاقيات الدليل وترتيب التحميل

تفحص NocoBase الأدلة التالية افتراضيًا لتحميل الإضافات:

```bash
my-nocobase-app/
├── packages/
│   └── plugins/          # الإضافات قيد التطوير (الأولوية القصوى)
└── storage/
    └── plugins/          # الإضافات المترجمة، مثل الإضافات المرفوعة أو المنشورة
```

-   `packages/plugins`: يُستخدم هذا الدليل لتطوير الإضافات محليًا، ويدعم الترجمة والتدقيق في الوقت الفعلي.
-   `storage/plugins`: يخزن الإضافات المترجمة، مثل الإصدارات التجارية أو إضافات الطرف الثالث.

## دورة حياة الإضافة وحالاتها

تمر الإضافة عادةً بالمراحل التالية:

1.  **إنشاء (create)**: إنشاء قالب إضافة عبر واجهة سطر الأوامر (CLI).
2.  **سحب (pull)**: تنزيل حزمة الإضافة محليًا، ولكن لم يتم كتابتها بعد في قاعدة البيانات.
3.  **تمكين (enable)**: عند التمكين الأول، يتم تنفيذ "التسجيل + التهيئة"؛ عمليات التمكين اللاحقة تقوم فقط بتحميل المنطق.
4.  **تعطيل (disable)**: إيقاف تشغيل الإضافة.
5.  **إزالة (remove)**: إزالة الإضافة بالكامل من النظام.

:::tip

-   `pull` مسؤول فقط عن تنزيل حزمة الإضافة؛ يتم تشغيل عملية التثبيت الفعلية بواسطة أول `enable`.
-   إذا تم `pull` الإضافة فقط ولم يتم تمكينها، فلن يتم تحميلها.

:::

### أمثلة على أوامر واجهة سطر الأوامر

```bash
# 1. إنشاء هيكل الإضافة
yarn pm create @my-project/plugin-hello

# 2. سحب حزمة الإضافة (تنزيل أو ربط)
yarn pm pull @my-project/plugin-hello

# 3. تمكين الإضافة (تُثبت تلقائيًا عند التمكين الأول)
yarn pm enable @my-project/plugin-hello

# 4. تعطيل الإضافة
yarn pm disable @my-project/plugin-hello

# 5. إزالة الإضافة
yarn pm remove @my-project/plugin-hello
```

## واجهة إدارة الإضافات

يمكنك الوصول إلى مدير الإضافات في المتصفح لعرض الإضافات وإدارتها بشكل بديهي:

**الرابط الافتراضي:** [http://localhost:13000/admin/settings/plugin-manager](http://localhost:13000/admin/settings/plugin-manager)

![مدير الإضافات](https://static-docs.nocobase.com/20251030195350.png)