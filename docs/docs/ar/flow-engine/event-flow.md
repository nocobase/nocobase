:::tip إشعار الترجمة بالذكاء الاصطناعي
تمت ترجمة هذه الوثائق تلقائيًا بواسطة الذكاء الاصطناعي.
:::

# تدفق الأحداث

في FlowEngine، جميع مكونات الواجهة **مدفوعة بالأحداث (Event-driven)**.
يتم تشغيل سلوك المكونات وتفاعلاتها وتغيرات البيانات فيها بواسطة الأحداث وتنفيذها عبر تدفق.

## التدفق الثابت مقابل التدفق الديناميكي

في FlowEngine، يمكن تقسيم التدفقات إلى نوعين:

### **1. التدفق الثابت (Static Flow)**

- يُعرّفه المطورون في الكود البرمجي؛
- يؤثر على **جميع مثيلات فئة النموذج (Model class)**؛
- يُستخدم عادةً لمعالجة المنطق العام لفئة النموذج (Model class)؛

### **2. التدفق الديناميكي (Dynamic Flow)**

- يُكوّنه المستخدمون عبر الواجهة؛
- يسري مفعوله على مثيل محدد فقط؛
- يُستخدم عادةً للسلوكيات المخصصة في سيناريوهات معينة؛

باختصار: **التدفق الثابت هو قالب منطقي مُعرّف على فئة، بينما التدفق الديناميكي هو منطق مخصص مُعرّف على مثيل.**

## قواعد الربط مقابل التدفق الديناميكي

في نظام تكوين FlowEngine، توجد طريقتان لتطبيق منطق الأحداث:

### **1. قواعد الربط (Linkage Rules)**

- هي **تغليفات لخطوات تدفق الأحداث المدمجة**؛
- أبسط في التكوين وأكثر دلالة؛
- في جوهرها، لا تزال تمثل شكلاً مبسطًا من **تدفق الأحداث (Flow)**.

### **2. التدفق الديناميكي (Dynamic Flow)**

- قدرات تكوين تدفق كاملة؛
- قابلة للتخصيص:
  - **المُشغّل (on)**: يحدد متى يتم التشغيل؛
  - **خطوات التنفيذ (steps)**: تحدد المنطق المراد تنفيذه؛
- مناسبة لمنطق الأعمال الأكثر تعقيدًا ومرونة.

لذلك، **قواعد الربط ≈ تدفق أحداث مبسط**، وآلياتهما الأساسية متسقة.

## اتساق FlowAction

سواء كانت **قواعد الربط** أو **تدفقات الأحداث**، يجب أن تستخدم نفس مجموعة **FlowAction**.
أي أن:

- **FlowAction** يُعرّف الإجراءات التي يمكن استدعاؤها بواسطة تدفق؛
- يتشاركان نظام إجراءات واحدًا، بدلاً من تطبيق نظامين منفصلين؛
- وهذا يضمن إعادة استخدام المنطق والتوسع المتسق.

## التسلسل الهرمي للمفاهيم

من الناحية المفاهيمية، العلاقة التجريدية الأساسية لـ FlowModel هي كما يلي:

```bash
FlowModel
 └── FlowDefinition
      ├── FlowEventDefinition
      │     ├── الأحداث العامة (Global Events)
      │     └── الأحداث المحلية (Local Events)
      └── FlowActionDefinition
            ├── الإجراءات العامة (Global Actions)
            └── الإجراءات المحلية (Local Actions)
```

### وصف التسلسل الهرمي

- **FlowModel**  
  يمثل كيان نموذج بقابلية تكوين وتنفيذ منطق التدفق.

- **FlowDefinition**  
  يُعرّف مجموعة كاملة من منطق التدفق (بما في ذلك شروط التشغيل وخطوات التنفيذ).

- **FlowEventDefinition**  
  يُعرّف مصدر تشغيل التدفق، بما في ذلك:
  - **الأحداث العامة**: مثل بدء تشغيل التطبيق، اكتمال تحميل البيانات؛
  - **الأحداث المحلية**: مثل تغيرات الحقول، النقر على الأزرار.

- **FlowActionDefinition**  
  يُعرّف الإجراءات القابلة للتنفيذ للتدفق، بما في ذلك:
  - **الإجراءات العامة**: مثل تحديث الصفحة، الإشعارات العامة؛
  - **الإجراءات المحلية**: مثل تعديل قيم الحقول، تبديل حالة المكونات.

## ملخص

| المفهوم | الغرض | نطاق التأثير |
|------|------|-----------|
| **التدفق الثابت (Static Flow)** | منطق التدفق المُعرّف في الكود | جميع مثيلات XXModel |
| **التدفق الديناميكي (Dynamic Flow)** | منطق التدفق المُعرّف على الواجهة | مثيل FlowModel واحد |
| **FlowEvent** | يُعرّف المُشغّل (متى يتم التشغيل) | عام أو محلي |
| **FlowAction** | يُعرّف منطق التنفيذ | عام أو محلي |
| **قاعدة الربط (Linkage Rule)** | تغليف مبسط لخطوات تدفق الأحداث | على مستوى الكتلة، أو الإجراء |