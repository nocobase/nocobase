:::tip إشعار الترجمة بالذكاء الاصطناعي
تمت ترجمة هذه الوثائق تلقائيًا بواسطة الذكاء الاصطناعي.
:::

# الاستعلام عن البيانات في وضع SQL
في لوحة "استعلام البيانات"، انتقل إلى وضع SQL، ثم اكتب الاستعلام وقم بتشغيله، واستخدم النتائج المعادة مباشرة لربط المخططات وعرضها.

![20251027075805](https://static-docs.nocobase.com/20251027075805.png)

## كتابة عبارات SQL
- في لوحة "استعلام البيانات"، اختر وضع SQL.
- أدخل عبارة SQL ثم انقر على "تشغيل الاستعلام".
- يدعم العبارات المعقدة بما في ذلك الربط متعدد الجداول (Multi-table JOIN) والعروض (VIEW).

مثال: إجمالي قيمة الطلبات شهريًا
```sql
SELECT
  TO_CHAR(order_date, 'YYYY-MM') as mon,
  SUM(total_amount) AS total
FROM "order"
GROUP BY mon
ORDER BY mon ASC
LIMIT 100;
```

## عرض النتائج
- انقر على "عرض البيانات" لفتح لوحة معاينة النتائج.

![20251027080014](https://static-docs.nocobase.com/20251027080014.png)

تدعم البيانات عرض الصفحات؛ ويمكنك التبديل بين عرض الجدول (Table) و JSON للتحقق من أسماء الأعمدة وأنواعها.
![20251027080100](https://static-docs.nocobase.com/20251027080100.png)

## ربط الحقول
- في إعدادات "خيارات المخطط"، قم بربط الحقول بناءً على أعمدة نتائج الاستعلام.
- بشكل افتراضي، يُستخدم العمود الأول كبعد (المحور السيني أو الفئة)، والعمود الثاني كمقياس (المحور الصادي أو القيمة). لذا، يرجى الانتباه إلى ترتيب الأعمدة في SQL:

```sql
SELECT
  TO_CHAR(order_date, 'YYYY-MM') as mon, -- حقل البعد في العمود الأول
  SUM(total_amount) AS total -- حقل المقياس بعد ذلك
```

![clipboard-image-1761524022](https://static-docs.nocobase.com/clipboard-image-1761524022.png)

## استخدام متغيرات السياق
انقر على زر `x` في الزاوية العلوية اليمنى من محرر SQL لاختيار متغيرات السياق.

![20251027081752](https://static-docs.nocobase.com/20251027081752.png)

بعد التأكيد، يتم إدراج تعبير المتغير في موضع المؤشر (أو يحل محل النص المحدد).

على سبيل المثال، `{{ ctx.user.createdAt }}`. يرجى عدم إضافة علامات اقتباس إضافية بنفسك.

![20251027081957](https://static-docs.nocobase.com/20251027081957.png)

## المزيد من الأمثلة
للاطلاع على المزيد من الأمثلة، يمكنك الرجوع إلى [تطبيق NocoBase التجريبي](https://demo3.sg.nocobase.com/admin/5xrop8s0bui).

**توصيات:**
- ثبّت أسماء الأعمدة قبل ربطها بالمخططات لتجنب الأخطاء لاحقًا.
- أثناء مرحلة التصحيح، اضبط `LIMIT` لتقليل عدد الصفوف المعادة وتسريع المعاينة.

## المعاينة والحفظ والتراجع
- انقر على "تشغيل الاستعلام" لطلب البيانات وتحديث معاينة المخطط.
- انقر على "حفظ" لحفظ نص SQL الحالي والإعدادات ذات الصلة في قاعدة البيانات.
- انقر على "إلغاء الأمر" للعودة إلى الحالة المحفوظة الأخيرة والتخلص من التغييرات غير المحفوظة حاليًا.