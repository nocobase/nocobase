:::tip إشعار الترجمة بالذكاء الاصطناعي
تمت ترجمة هذه الوثائق تلقائيًا بواسطة الذكاء الاصطناعي.
:::

# استعلام البيانات

تنقسم لوحة إعدادات الرسم البياني بشكل عام إلى ثلاثة أقسام: استعلام البيانات، وخيارات الرسم البياني، وأحداث التفاعل، بالإضافة إلى أزرار الإلغاء والمعاينة والحفظ في الأسفل.

دعنا نلقي نظرة أولاً على لوحة "استعلام البيانات" لفهم وضعَي الاستعلام (Builder/SQL) وميزاتهما الشائعة.

## هيكل اللوحة
![clipboard-image-1761466636](https://static-docs.nocobase.com/clipboard-image-1761466636.png)

> [!TIP]
> لتسهيل إعداد المحتوى الحالي، يمكنك طي اللوحات الأخرى أولاً.

في الأعلى، يوجد شريط الإجراءات:
- الوضع: Builder (رسومي، بسيط ومريح) / SQL (عبارات مكتوبة يدويًا، أكثر مرونة).
- تشغيل الاستعلام: انقر لتنفيذ طلب استعلام البيانات.
- عرض النتيجة: يفتح لوحة نتائج البيانات، حيث يمكنك التبديل بين عرض الجدول (Table) أو JSON. انقر مرة أخرى لطي اللوحة.

من الأعلى إلى الأسفل، توجد العناصر التالية بالترتيب:
- مصدر البيانات و مجموعة: مطلوب. اختر مصدر البيانات و مجموعة البيانات.
- المقاييس (Measures): مطلوب. الحقول الرقمية المراد عرضها.
- الأبعاد (Dimensions): التجميع حسب الحقول (مثل التاريخ، الفئة، المنطقة).
- التصفية: تعيين شروط التصفية (مثل =، ≠، >، <، يتضمن، نطاق). يمكن دمج شروط متعددة.
- الفرز: اختر الحقل المراد الفرز به والترتيب (تصاعدي/تنازلي).
- ترقيم الصفحات: التحكم في نطاق البيانات وترتيب الإرجاع.

## وضع Builder

### اختيار مصدر البيانات و مجموعة
- في لوحة "استعلام البيانات"، اضبط الوضع على "Builder".
- اختر مصدر البيانات و مجموعة. إذا كانت مجموعة غير قابلة للاختيار أو فارغة، فتحقق أولاً من الأذونات وما إذا كانت قد تم إنشاؤها.

### إعداد المقاييس (Measures)
- اختر حقلاً رقميًا واحدًا أو أكثر، واضبط التجميع: `Sum`، `Count`، `Avg`، `Max`، `Min`.
- حالات الاستخدام الشائعة: `Count` لإحصاء السجلات، `Sum` لحساب الإجمالي.

### إعداد الأبعاد (Dimensions)
- اختر حقلاً واحدًا أو أكثر كأبعاد للتجميع.
- يمكن تنسيق حقول التاريخ والوقت (مثل `YYYY-MM`، `YYYY-MM-DD`) لتسهيل التجميع حسب الشهر أو اليوم.

### التصفية والفرز وترقيم الصفحات
- التصفية: أضف شروطًا (مثل =، ≠، يتضمن، نطاق). يمكن دمج شروط متعددة.
- الفرز: اختر حقلاً وترتيب الفرز (تصاعدي/تنازلي).
- ترقيم الصفحات: اضبط `Limit` و `Offset` للتحكم في عدد الصفوف المعادة. يوصى بتعيين `Limit` صغير عند تصحيح الأخطاء.

### تشغيل الاستعلام وعرض النتيجة
- انقر على "تشغيل الاستعلام" للتنفيذ. بعد الإرجاع، قم بالتبديل بين `Table / JSON` في "عرض النتيجة" للتحقق من الأعمدة والقيم.
- قبل ربط حقول الرسم البياني، تأكد من أسماء الأعمدة وأنواعها هنا لتجنب ظهور رسم بياني فارغ أو حدوث أخطاء لاحقًا.

![20251026174338](https://static-docs.nocobase.com/20251026174338.png)

### ربط الحقول اللاحق

لاحقًا، عند إعداد "خيارات الرسم البياني"، ستقوم بربط الحقول بناءً على الحقول من مصدر البيانات و مجموعة المحددة.

## وضع SQL

### كتابة الاستعلام
- قم بالتبديل إلى وضع "SQL"، وأدخل عبارة الاستعلام الخاصة بك، ثم انقر على "تشغيل الاستعلام".
- مثال (إجمالي مبلغ الطلب حسب التاريخ):
```sql
SELECT 
  TO_CHAR(order_date, 'YYYY-MM') as mon,
  SUM(total_amount) AS total
FROM "order"
GROUP BY mon
ORDER BY mon ASC
LIMIT 100;
```

![20251026175952](https://static-docs.nocobase.com/20251026175952.png)

### تشغيل الاستعلام وعرض النتيجة

- انقر على "تشغيل الاستعلام" للتنفيذ. بعد الإرجاع، قم بالتبديل بين `Table / JSON` في "عرض النتيجة" للتحقق من الأعمدة والقيم.
- قبل ربط حقول الرسم البياني، تأكد من أسماء الأعمدة وأنواعها هنا لتجنب ظهور رسم بياني فارغ أو حدوث أخطاء لاحقًا.

### ربط الحقول اللاحق

لاحقًا، عند إعداد "خيارات الرسم البياني"، ستقوم بربط الحقول بناءً على الأعمدة من نتيجة الاستعلام.

> [!TIP]
> لمزيد من المعلومات حول وضع SQL، يرجى مراجعة الاستخدام المتقدم — استعلام البيانات في وضع SQL.