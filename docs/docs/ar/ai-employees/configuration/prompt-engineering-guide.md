:::tip إشعار الترجمة بالذكاء الاصطناعي
تمت ترجمة هذه الوثائق تلقائيًا بواسطة الذكاء الاصطناعي.
:::

# دليل هندسة الموجهات · موظف الذكاء الاصطناعي

> من "كيفية الكتابة" إلى "الكتابة الجيدة"، يرشدك هذا الدليل إلى كيفية صياغة موجهات عالية الجودة بطريقة بسيطة ومستقرة وقابلة لإعادة الاستخدام.

## 1. لماذا تُعد الموجهات حاسمة؟

الموجه هو "الوصف الوظيفي" لموظف الذكاء الاصطناعي، وهو يحدد مباشرة أسلوبه وحدوده وجودة مخرجاته.

**مثال للمقارنة:**

❌ موجه غير واضح:

```
أنت مساعد لتحليل البيانات، تساعد المستخدمين على تحليل البيانات.
```

✅ موجه واضح وقابل للتحكم:

```
أنت Viz، خبير في تحليل البيانات.

تحديد الدور
- الأسلوب: ذو بصيرة قوية، واضح التعبير، يركز على التصور المرئي
- المهمة: تحويل البيانات المعقدة إلى "قصص رسوم بيانية" مفهومة

سير العمل
1) فهم المتطلبات
2) إنشاء استعلامات SQL آمنة (باستخدام SELECT فقط)
3) استخلاص الرؤى
4) العرض باستخدام الرسوم البيانية

قواعد صارمة
- يجب: استخدام SELECT فقط، وعدم تعديل البيانات إطلاقاً
- دائماً: إخراج تصورات بيانية بشكل افتراضي
- أبداً: اختلاق البيانات أو تخمينها

تنسيق الإخراج
خلاصة موجزة (2-3 جمل) + JSON لرسوم ECharts البيانية
```

**الخلاصة**: الموجه الجيد يوضح بدقة "من هو، وماذا يفعل، وكيف يفعله، وبأي معيار"، مما يجعل أداء الذكاء الاصطناعي مستقراً وقابلاً للتحكم.

## 2. "الصيغة الذهبية" للموجهات: العناصر التسعة

هيكل أثبت فعاليته عملياً:

```
التسمية + التعليمات المزدوجة + التأكيد بالمحاكاة + التكرار + القواعد الصارمة
+ معلومات الخلفية + التعزيز الإيجابي + أمثلة مرجعية + أمثلة سلبية (اختياري)
```

### 2.1 وصف العناصر

| العنصر   | المشكلة التي يحلها            | لماذا هو فعال        |
| ---- | ----------------- | ------------ |
| التسمية   | يوضح الهوية والأسلوب           | يساعد الذكاء الاصطناعي على بناء "إحساس بالدور" |
| التعليمات المزدوجة | يميز بين "من أنا / ماذا يجب أن أفعل"     | يقلل من الارتباك في تحديد الدور       |
| التأكيد بالمحاكاة | يكرر الفهم قبل التنفيذ            | يمنع الانحراف          |
| التكرار | تظهر النقاط الرئيسية بشكل متكرر           | يزيد الأولوية        |
| القواعد الصارمة | MUST/ALWAYS/NEVER | يشكل خطاً أساسياً         |
| معلومات الخلفية | المعرفة والقيود الضرورية           | يقلل من سوء الفهم         |
| التعزيز الإيجابي | يوجه التوقعات والأسلوب           | نبرة وأداء أكثر استقراراً    |
| أمثلة مرجعية | يوفر نموذجاً مباشراً للمحاكاة           | يكون الإخراج أقرب إلى التوقعات      |
| أمثلة سلبية | يتجنب الأخطاء الشائعة             | يصحح الأخطاء، ويصبح أكثر دقة مع الاستخدام    |

### 2.2 قالب البدء السريع

```yaml
# 1) التسمية
أنت [الاسم]، [المنصب/التخصص] ممتاز.

# 2) التعليمات المزدوجة
## الدور
الأسلوب: [صفة × 2-3]
المهمة: [ملخص المسؤولية الرئيسية في جملة واحدة]

## سير عمل المهمة
1) فهم: [نقطة رئيسية]
2) تنفيذ: [نقطة رئيسية]
3) تحقق: [نقطة رئيسية]
4) عرض: [نقطة رئيسية]

# 3) التأكيد بالمحاكاة
قبل التنفيذ، كرر فهمك: "أتفهم أنك تحتاج إلى... وسأنجز ذلك عن طريق..."

# 4) التكرار
المتطلب الأساسي: [1-2 من أهم النقاط] (تظهر مرتين على الأقل في البداية/سير العمل/النهاية)

# 5) القواعد الصارمة
يجب: [قاعدة لا يمكن انتهاكها]
دائماً: [مبدأ يجب اتباعه دائماً]
أبداً: [إجراء محظور بوضوح]

# 6) معلومات الخلفية
[المعرفة الضرورية بالمجال/السياق/المزالق الشائعة]

# 7) التعزيز الإيجابي
أنت تتفوق في [القدرة] وتجيد [التخصص]. يرجى الحفاظ على هذا الأسلوب لإكمال المهمة.

# 8) أمثلة مرجعية
[قدم مثالاً موجزاً لـ "الإخراج المثالي"]

# 9) أمثلة سلبية (اختياري)
- [طريقة غير صحيحة] ← [طريقة صحيحة]
```

## 3. مثال عملي: Viz (تحليل البيانات)

لنجمع العناصر التسعة أدناه لإنشاء مثال كامل "جاهز للاستخدام".

```text
# التسمية
أنت Viz، خبير في تحليل البيانات.

# التعليمات المزدوجة
【الدور】
الأسلوب: ذو بصيرة قوية، واضح، موجه بصرياً
المهمة: تحويل البيانات المعقدة إلى "قصص رسوم بيانية"

【سير عمل المهمة】
1) فهم: تحليل متطلبات بيانات المستخدم ونطاق المقاييس
2) استعلام: إنشاء استعلامات SQL آمنة (استعلام البيانات الحقيقية فقط، SELECT-only)
3) تحليل: استخلاص الرؤى الرئيسية (الاتجاهات/المقارنات/النسب)
4) عرض: اختيار الرسم البياني المناسب للتعبير الواضح

# التأكيد بالمحاكاة
قبل التنفيذ، كرر: "أتفهم أنك تريد تحليل [الكائن/النطاق]، وسأقدم النتائج عبر [طريقة الاستعلام والتصور]."

# التكرار
أعيد التأكيد: أولوية أصالة البيانات، الجودة أهم من الكمية؛ إذا لم تتوفر بيانات، اذكر ذلك بصدق.

# القواعد الصارمة
يجب: استخدام استعلامات SELECT فقط، وعدم تعديل أي بيانات
دائماً: إخراج رسم بياني مرئي بشكل افتراضي
أبداً: اختلاق البيانات أو تخمينها

# معلومات الخلفية
- تتطلب ECharts تهيئة "JSON خالص"، بدون تعليقات/دوال
- يجب أن يركز كل رسم بياني على موضوع واحد، وتجنب تكديس مقاييس متعددة

# التعزيز الإيجابي
أنت ماهر في استخلاص استنتاجات قابلة للتنفيذ من البيانات الحقيقية والتعبير عنها بأبسط الرسوم البيانية.

# أمثلة مرجعية
وصف (2-3 جمل) + JSON للرسم البياني

مثال الوصف:
تمت إضافة 127 عميلاً محتملاً جديداً هذا الشهر، بزيادة 23% على أساس شهري، معظمهم من قنوات خارجية.

مثال الرسم البياني:
{
  "title": {"text": "اتجاه العملاء المحتملين لهذا الشهر"},
  "tooltip": {"trigger": "axis"},
  "xAxis": {"type": "category", "data": ["Week1","Week2","Week3","Week4"]},
  "yAxis": {"type": "value"},
  "series": [{"type": "line", "data": [28,31,35,33]}]
}

# أمثلة سلبية (اختياري)
- خلط اللغات → الحفاظ على اتساق اللغة
- الرسوم البيانية المكتظة → يجب أن يعبر كل رسم بياني عن موضوع واحد فقط
- البيانات غير الكاملة → اذكر بصدق "لا توجد بيانات متاحة"
```

**نقاط التصميم**

*   تظهر كلمة "الأصالة" عدة مرات في سير العمل والتأكيد والقواعد (تذكير قوي)
*   اختر إخراجاً من جزأين "وصف + JSON" لتسهيل التكامل مع الواجهة الأمامية
*   حدد "SQL للقراءة فقط" لتقليل المخاطر

## 4. كيفية تحسين الموجهات بمرور الوقت

### 4.1 التكرار بخمس خطوات

```
ابدأ بنسخة عاملة ← اختبر على نطاق صغير ← سجل المشكلات ← أضف قواعد/أمثلة لمعالجة المشكلات ← اختبر مرة أخرى
```

<img src="https://static-docs.nocobase.com/prompt-engineering-guide-2025-11-02-20-19-54.png" alt="عملية التحسين" width="50%">

يوصى باختبار 5-10 مهام نموذجية دفعة واحدة، وإكمال جولة واحدة في غضون 30 دقيقة.

### 4.2 المبادئ والنسب

*   **توجيه إيجابي أولاً**: أخبر الذكاء الاصطناعي بما يجب فعله أولاً
*   **تحسين مدفوع بالمشكلات**: أضف القيود فقط عند ظهور المشكلات
*   **قيود معتدلة**: لا تكدس "المحظورات" من البداية

النسبة التجريبية: **80% إيجابي : 20% سلبي**.

### 4.3 تحسين نموذجي

**المشكلة**: رسوم بيانية مكتظة، سهولة قراءة ضعيفة
**التحسين**:

1.  في "معلومات الخلفية"، أضف: موضوع واحد لكل رسم بياني
2.  في "أمثلة مرجعية"، قدم "رسم بياني بمقياس واحد"
3.  إذا تكررت المشكلة، أضف قيداً صارماً في "القواعد الصارمة/التكرار"

## 5. تقنيات متقدمة

### 5.1 استخدام XML/العلامات لهيكل أوضح (موصى به للموجهات الطويلة)

عندما يتجاوز المحتوى 1000 حرف أو يكون عرضة للالتباس، فإن استخدام العلامات للتقسيم يكون أكثر استقراراً:

```xml
<الدور>أنت Dex، خبير في تنظيم البيانات.</الدور>
<الأسلوب>دقيق، صحيح، ومنظم.</الأسلوب>

<المهمة>
يجب إكمالها بالخطوات التالية:
1. تحديد الحقول الرئيسية
2. استخراج قيم الحقول
3. توحيد التنسيق (التاريخ YYYY-MM-DD)
4. إخراج JSON
</المهمة>

<القواعد>
يجب: الحفاظ على دقة قيم الحقول
أبداً: تخمين المعلومات المفقودة
دائماً: وضع علامة على العناصر غير المؤكدة
</القواعد>

<مثال>
{"الاسم":"جون دو","التاريخ":"2024-01-15","المبلغ":5000,"الحالة":"مؤكد"}
</مثال>
```

### 5.2 نهج "الخلفية + المهمة" الطبقي (طريقة أكثر سهولة)

*   **الخلفية** (استقرار طويل الأمد): من هو هذا الموظف، ما هو أسلوبه، وما هي القدرات التي يمتلكها
*   **المهمة** (تغيير حسب الطلب): ما الذي يجب فعله الآن، ما هي المقاييس التي يجب التركيز عليها، وما هو النطاق الافتراضي

يتطابق هذا بشكل طبيعي مع نموذج NocoBase "الموظف + المهمة": **خلفية ثابتة، ومهام مرنة**.

### 5.3 إعادة الاستخدام المعياري

قسّم القواعد الشائعة إلى وحدات (modules) لدمجها واستخدامها حسب الحاجة:

**وحدة أمان البيانات**

```
يجب: استخدام SELECT فقط
أبداً: تنفيذ INSERT/UPDATE/DELETE
```

**وحدة هيكل الإخراج**

```
يجب أن يتضمن الإخراج:
1) وصف موجز (2-3 جمل)
2) المحتوى الأساسي (رسم بياني/بيانات/رمز)
3) اقتراحات اختيارية (إن وجدت)
```

## 6. القواعد الذهبية (استنتاجات عملية)

1.  يجب أن يقوم موظف ذكاء اصطناعي واحد بنوع واحد من المهام؛ التخصص يضمن استقراراً أكبر
2.  الأمثلة أكثر فعالية من الشعارات؛ قدم نماذج إيجابية أولاً
3.  استخدم MUST/ALWAYS/NEVER لتحديد الحدود
4.  استخدم نهجاً موجهاً بالعمليات لتقليل عدم اليقين
5.  ابدأ صغيراً، اختبر أكثر، عدّل أقل، وكرر باستمرار
6.  لا تبالغ في القيود؛ تجنب "التشفير الثابت" للسلوك
7.  سجل المشكلات والتغييرات لإنشاء إصدارات
8.  قاعدة 80/20: أولاً، اشرح "كيف تفعل الشيء الصحيح"، ثم قيد "ما لا يجب فعله بشكل خاطئ"

## 7. الأسئلة الشائعة

**س1: ما هو الطول المثالي؟**

*   للموظف الأساسي: 500-800 حرف
*   للموظف المعقد: 800-1500 حرف
*   لا يوصى بأكثر من 2000 حرف (قد يؤدي إلى البطء والتكرار)
  المعيار: تغطية جميع العناصر التسعة، ولكن بدون حشو.

**س2: ماذا لو لم يتبع الذكاء الاصطناعي التعليمات؟**

1.  استخدم MUST/ALWAYS/NEVER لتوضيح الحدود
2.  كرر المتطلبات الرئيسية 2-3 مرات
3.  استخدم العلامات/التقسيمات لتعزيز الهيكل
4.  قدم المزيد من الأمثلة الإيجابية، وقلل من المبادئ المجردة
5.  قيّم ما إذا كان هناك حاجة إلى نموذج أقوى

**س3: كيف توازن بين التوجيه الإيجابي والسلبي؟**
اكتب الأجزاء الإيجابية أولاً (الدور، سير العمل، الأمثلة)، ثم أضف القيود بناءً على الأخطاء، وقيد فقط النقاط التي "تتكرر فيها الأخطاء".

**س4: هل يجب التحديث بشكل متكرر؟**

*   الخلفية (الهوية/الأسلوب/القدرات الأساسية): استقرار طويل الأمد
*   المهمة (السيناريو/المقاييس/النطاق): تعديل حسب احتياجات العمل
*   أنشئ إصداراً جديداً لأي تغييرات وسجل "سبب التغيير".

## 8. الخطوات التالية

**تمرين عملي**

*   اختر أي دور بسيط (مثل مساعد خدمة العملاء)، واكتب "نسخة عاملة" باستخدام العناصر التسعة، واختبرها بخمس مهام نموذجية
*   ابحث عن موظف حالي، واجمع 3-5 مشكلات حقيقية، وقم بإجراء دورة تكرارية صغيرة

**قراءات إضافية**

*   [دليل تكوين موظف الذكاء الاصطناعي للمسؤولين](./admin-configuration.md): تطبيق الموجهات في التكوين الفعلي
*   أدلة موظفي الذكاء الاصطناعي المخصصة: عرض قوالب الأدوار/المهام الكاملة

## الخلاصة

**ابدأ بالتشغيل، ثم صقّل.**
ابدأ بنسخة "عاملة"، واجمع المشكلات باستمرار، وأضف الأمثلة والقواعد في المهام الحقيقية.
تذكر: **أولاً، أخبره كيف يفعل الأشياء بشكل صحيح (توجيه إيجابي)، ثم قيده من فعل الأشياء بشكل خاطئ (قيود معتدلة).**