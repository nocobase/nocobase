---
pkg: "@nocobase/plugin-field-sort"
---
:::tip إشعار الترجمة بالذكاء الاصطناعي
تمت ترجمة هذه الوثائق تلقائيًا بواسطة الذكاء الاصطناعي.
:::


# حقل الفرز

## مقدمة

تُستخدم حقول الفرز لفرز السجلات في مجموعة، وتدعم الفرز ضمن المجموعات.

:::warning
نظرًا لأن حقل الفرز هو جزء من نفس المجموعة، فلا يمكن تعيين سجل واحد إلى مجموعات متعددة عند استخدام الفرز حسب المجموعة.
:::

## التثبيت

إضافة مدمجة، لا تتطلب تثبيتًا منفصلاً.

## دليل المستخدم

### إنشاء حقل فرز

![20240409091123_rec_](https://static-docs.nocobase.com/20240409091123_rec_.gif)

عند إنشاء حقول الفرز، سيتم تهيئة قيم الفرز:

- إذا لم يتم تحديد الفرز حسب المجموعة، فستتم التهيئة بناءً على حقل المفتاح الأساسي وحقل تاريخ الإنشاء.
- إذا تم تحديد الفرز حسب المجموعة، فسيتم تجميع البيانات أولاً، ثم ستتم التهيئة بناءً على حقل المفتاح الأساسي وحقل تاريخ الإنشاء.

:::warning{title="توضيح اتساق المعاملات"}
- عند إنشاء حقل، إذا فشلت تهيئة قيمة الفرز، فلن يتم إنشاء حقل الفرز.
- ضمن نطاق معين، إذا تم نقل سجل من الموضع A إلى الموضع B، فستتغير قيم الفرز لجميع السجلات بين A و B. إذا فشل أي جزء من هذا التحديث، فسيتم التراجع عن عملية النقل بأكملها، ولن تتغير قيم الفرز للسجلات ذات الصلة.
:::

#### مثال 1: إنشاء حقل الفرز sort1

حقل الفرز sort1 غير مجمع.

![20240409091510](https://static-docs.nocobase.com/20240409091510.png)

سيتم تهيئة حقول الفرز لكل سجل بناءً على حقل المفتاح الأساسي وحقل تاريخ الإنشاء.

![20240409092305](https://static-docs.nocobase.com/20240409092305.png)

#### مثال 2: إنشاء حقل فرز sort2 بناءً على تجميع معرف الفئة (Class ID)

![20240409092620](https://static-docs.nocobase.com/20240409092620.png)

في هذه الحالة، سيتم تجميع جميع السجلات في المجموعة أولاً (حسب معرف الفئة Class ID)، ثم سيتم تهيئة حقل الفرز (sort2). قيم التهيئة لكل سجل هي:

![20240409092847](https://static-docs.nocobase.com/20240409092847.png)

### الفرز بالسحب والإفلات

تُستخدم حقول الفرز بشكل أساسي لفرز السجلات بالسحب والإفلات في مختلف الكتل. الكتل التي تدعم حاليًا الفرز بالسحب والإفلات تشمل الجداول ولوحات كانبان.

:::warning
- عند استخدام نفس حقل الفرز للفرز بالسحب والإفلات، قد يؤدي استخدامه عبر كتل متعددة إلى تعطيل الترتيب الحالي.
- لا يمكن أن يكون الحقل المستخدم للفرز بالسحب والإفلات في الجداول حقل فرز بقاعدة تجميع.
  - استثناء: في كتلة جدول علاقة واحد لمتعدد، يمكن للمفتاح الأجنبي أن يعمل كمجموعة.
- حاليًا، تدعم كتلة لوحة كانبان فقط الفرز بالسحب والإفلات ضمن المجموعات.
:::

#### الفرز بالسحب والإفلات لصفوف الجداول

كتلة الجدول

![20240409104621_rec_](https://static-docs.nocobase.com/20240409104621_rec_.gif)

كتلة جدول العلاقات

<video controls width="100%" src="https://static-docs.nocobase.com/20240409111903_rec_.mp4" title="Title"></video>

:::warning
في كتلة علاقة واحد لمتعدد:

- إذا تم تحديد حقل فرز غير مجمع، فقد تشارك جميع السجلات في الفرز.
- إذا تم تجميع السجلات أولاً بواسطة المفتاح الأجنبي ثم فرزها، فإن قاعدة الفرز ستؤثر فقط على البيانات داخل المجموعة الحالية.

التأثير النهائي متسق، ولكن عدد السجلات المشاركة في الفرز يختلف. لمزيد من التفاصيل، راجع [شرح قواعد الفرز](#sorting-rule-explanation).
:::

#### الفرز بالسحب والإفلات لبطاقات لوحة كانبان

![20240409110423_rec_](https://static-docs.nocobase.com/20240409110423_rec_.gif)

### شرح قواعد الفرز

#### إزاحة العناصر غير المجمعة (أو من نفس المجموعة)

لنفترض أن لدينا مجموعة من البيانات:

```
[1,2,3,4,5,6,7,8,9]
```

عندما يتحرك عنصر، وليكن 5، إلى الأمام ليحل محل 3، تتغير مواضع العناصر 3 و 4 و 5 فقط. يأخذ العنصر 5 موضع 3، وينتقل العنصران 3 و 4 إلى الخلف بمقدار موضع واحد لكل منهما.

```
[1,2,5,3,4,6,7,8,9]
```

إذا قمنا بعد ذلك بنقل العنصر 6 إلى الخلف ليحل محل 8، يأخذ العنصر 6 موضع 8، وينتقل العنصران 7 و 8 إلى الأمام بمقدار موضع واحد لكل منهما.

```
[1,2,5,3,4,7,8,6,9]
```

#### نقل العناصر بين مجموعات مختلفة

عند الفرز حسب المجموعة، إذا تم نقل سجل إلى مجموعة أخرى، فسيتغير انتماؤه للمجموعة أيضًا. على سبيل المثال:

```
A: [1,2,3,4]
B: [5,6,7,8]
```

عندما يتم نقل العنصر 1 بعد العنصر 6 (السلوك الافتراضي)، ستتغير مجموعته أيضًا من A إلى B.

```
A: [2,3,4]
B: [5,6,1,7,8]
```

#### تغييرات الفرز لا تتعلق بالبيانات المعروضة في الواجهة

على سبيل المثال، لنفترض وجود مجموعة من البيانات:

```
[1,2,3,4,5,6,7,8,9]
```

تعرض الواجهة عرضًا مُصفى فقط:

```
[1,5,9]
```

عندما يتم نقل العنصر 1 إلى موضع العنصر 9، ستتغير مواضع جميع العناصر الوسيطة (2، 3، 4، 5، 6، 7، 8) أيضًا، حتى لو لم تكن مرئية.

```
[2,3,4,5,6,7,8,9,1]
```

تعرض الواجهة الآن الترتيب الجديد بناءً على العناصر المصفاة:

```
[5,9,1]
```