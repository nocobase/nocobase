:::tip إشعار الترجمة بالذكاء الاصطناعي
تمت ترجمة هذه الوثائق تلقائيًا بواسطة الذكاء الاصطناعي.
:::

# سير الأحداث

## مقدمة

إذا كنت ترغب في تشغيل إجراءات مخصصة عند حدوث تغييرات في نموذج معين، يمكنك استخدام سير الأحداث لتحقيق ذلك. بالإضافة إلى النماذج، يمكن للصفحات، والكتل، والأزرار، والحقول جميعها استخدام سير الأحداث لتكوين عمليات مخصصة.

## كيفية الاستخدام

دعنا نستعرض مثالاً بسيطاً لفهم كيفية تكوين سير الأحداث. سنقوم بإنشاء ربط بين جدولين، حيث يؤدي النقر على صف في الجدول الأيسر إلى تصفية البيانات تلقائياً في الجدول الأيمن.

![20251031092211_rec_](https://static-docs.nocobase.com/20251031092211_rec_.gif)

خطوات التكوين:

1. انقر على أيقونة "البرق" في الزاوية العلوية اليمنى من كتلة الجدول الأيسر لفتح لوحة تكوين سير الأحداث.
![20251031092425](https://static-docs.nocobase.com/20251031092425.png)
2. انقر على "إضافة سير أحداث" (Add event flow)، واختر "النقر على صف" (Row click) كـ "حدث التشغيل" (Trigger event)، مما يعني أن السير سيتم تشغيله عند النقر على صف في الجدول.
![20251031092637](https://static-docs.nocobase.com/202510092637.png)
3. يُستخدم "شرط التشغيل" (Trigger condition) لتكوين الشروط. لن يتم تشغيل سير الأحداث إلا عند استيفاء هذه الشروط. في هذه الحالة، لا نحتاج إلى تكوين أي شروط، لذا سيتم تشغيل السير عند أي نقرة على صف.
![20251031092717](https://static-docs.nocobase.com/20251031092717.png)
4. مرر مؤشر الماوس فوق "إضافة خطوة" (Add step) لإضافة خطوات عملية. اختر "تعيين نطاق البيانات" (Set data scope) لتكوين نطاق البيانات للجدول الأيمن.
![20251031092755](https://static-docs.nocobase.com/20251031092755.png)
5. انسخ معرف UID للجدول الأيمن والصقه في حقل الإدخال "معرف UID للكتلة المستهدفة" (Target block UID). ستظهر لوحة تكوين الشروط أدناه على الفور، حيث يمكنك تكوين نطاق البيانات للجدول الأيمن.
![20251031092915](https://static-docs.nocobase.com/20251031092915.png)
6. لنقم بتكوين شرط كما هو موضح أدناه:
![20251031093233](https://static-docs.nocobase.com/20251031093233.png)
7. بعد تكوين نطاق البيانات، تحتاج إلى تحديث الكتلة لعرض النتائج المصفاة. أضف خطوة "تحديث الكتل المستهدفة" (Refresh target blocks) ثم أدخل معرف UID للجدول الأيمن.
![20251031093150](https://static-docs.nocobase.com/20251031093150.png)
![20251031093341](https://static-docs.nocobase.com/20251031093341.png)
8. أخيراً، انقر على زر الحفظ في الزاوية السفلية اليمنى لإكمال التكوين.

## أنواع الأحداث

### قبل العرض (Before render)

حدث عام يمكن استخدامه في الصفحات، والكتل، والأزرار، أو الحقول. استخدم هذا الحدث للمهام الأولية، مثل تكوين نطاقات بيانات مختلفة بناءً على شروط مختلفة.

### النقر على صف (Row click)

حدث خاص بكتلة الجدول. يتم تشغيله عند النقر على صف في الجدول. عند التشغيل، يضيف "سجل الصف المنقور" (Clicked row record) إلى السياق، والذي يمكن استخدامه كمتغير في الشروط والخطوات.

### تغيير قيم النموذج (Form values change)

حدث خاص بكتلة النموذج. يتم تشغيله عند تغيير قيم حقول النموذج. يمكنك الوصول إلى قيم النموذج من خلال متغير "النموذج الحالي" (Current form) في الشروط والخطوات.

### النقر (Click)

حدث خاص بالأزرار. يتم تشغيله عند النقر على الزر.

## أنواع الخطوات

### متغير مخصص (Custom variable)

لإنشاء متغير مخصص لاستخدامه ضمن السياق.

#### النطاق

للمتغيرات المخصصة نطاق. على سبيل المثال، يمكن استخدام متغير مُعرّف في سير أحداث كتلة ما ضمن تلك الكتلة فقط. لجعل المتغير متاحاً عبر جميع الكتل في الصفحة الحالية، قم بتكوينه في سير أحداث الصفحة.

#### متغير النموذج (Form variable)

استخدم القيم من كتلة نموذج كمتغير. التكوين:

![20251031093516](https://static-docs.nocobase.com/20251031093516.png)

- Variable title: عنوان المتغير
- Variable identifier: معرف المتغير
- Form UID: معرف UID للنموذج

#### متغيرات أخرى

سيتم دعم المزيد من أنواع المتغيرات في المستقبل.

### تعيين نطاق البيانات (Set data scope)

تعيين نطاق البيانات لكتلة مستهدفة. التكوين:

![20251031093609](https://static-docs.nocobase.com/20251031093609.png)

- Target block UID: معرف UID للكتلة المستهدفة
- Condition: شرط التصفية

### تحديث الكتل المستهدفة (Refresh target blocks)

تحديث الكتل المستهدفة. يمكن تكوين كتل متعددة. التكوين:

![20251031093657](https://static-docs.nocobase.com/20251031093657.png)

- Target block UID: معرف UID للكتلة المستهدفة

### الانتقال إلى عنوان URL (Navigate to URL)

الانتقال إلى عنوان URL. التكوين:

![20251031093742](https://static-docs.nocobase.com/20251031093742.png)

- URL: عنوان URL المستهدف، يدعم المتغيرات
- Search parameters: معلمات البحث في عنوان URL
- Open in new window: إذا تم تحديد هذا الخيار، سيتم فتح عنوان URL في نافذة متصفح جديدة عند الانتقال.

### عرض رسالة (Show message)

عرض رسائل التغذية الراجعة العامة للعمليات.

#### متى تستخدم

- لتوفير رسائل تغذية راجعة للنجاح، والتحذير، والأخطاء.
- تظهر في المنتصف العلوي وتختفي تلقائياً، مما يوفر طريقة تنبيه خفيفة لا تقاطع عمليات المستخدم.

#### التكوين

![20251031093825](https://static-docs.nocobase.com/20251031093825.png)

- Message type: نوع الرسالة
- Message content: محتوى الرسالة
- Duration: المدة (بالثواني)

### عرض إشعار (Show notification)

عرض تنبيهات الإشعارات العامة.

#### متى تستخدم

عرض تنبيهات الإشعارات في الزوايا الأربع للنظام. تُستخدم عادةً في الحالات التالية:

- محتوى إشعار معقد.
- إشعارات تفاعلية توفر للمستخدمين خطوات العمل التالية.
- إشعارات يتم دفعها من قبل النظام.

#### التكوين

![20251031093934](https://static-docs.nocobase.com/20251031093934.png)

- Notification type: نوع الإشعار
- Notification title: عنوان الإشعار
- Notification description: وصف الإشعار
- Placement: الموضع، الخيارات المتاحة هي: أعلى اليسار، أعلى اليمين، أسفل اليسار، أسفل اليمين

### تنفيذ JavaScript (Execute JavaScript)

![20251031094046](https://static-docs.nocobase.com/20251031094046.png)

تنفيذ كود JavaScript.