---
pkg: "@nocobase/plugin-action-import"
---
:::tip إشعار الترجمة بالذكاء الاصطناعي
تمت ترجمة هذه الوثائق تلقائيًا بواسطة الذكاء الاصطناعي.
:::

# استيراد

## مقدمة

استورد البيانات باستخدام قالب Excel. يمكنك تهيئة الحقول المراد استيرادها، وسيتم إنشاء القالب تلقائيًا.

![20251029165818](https://static-docs.nocobase.com/20251029165818.png)

## تعليمات الاستيراد

### حقول من نوع رقم

تدعم الأرقام والنسب المئوية. سيتم تصفية النصوص مثل `N/A` أو `-`.

| رقم1 | نسبة مئوية | رقم2 | رقم3 |
| ----- | ------ | ----- | ----- |
| 123   | 25%    | N/A   | -     |

بعد التحويل إلى JSON:

```ts
{
  "رقم1": 123,
  "نسبة مئوية": 0.25,
  "رقم2": null,
  "رقم3": null
}
```

### حقول من نوع منطقي (Boolean)

النصوص المدخلة المدعومة (الأحرف الإنجليزية غير حساسة لحالة الأحرف):

- `Yes`، `Y`، `True`، `1`، `是`
- `No`، `N`، `False`، `0`، `否`

| حقل1 | حقل2 | حقل3 | حقل4 | حقل5 |
| ----- | ----- | ----- | ----- | ----- |
| لا    | نعم   | Y     | true  | 0     |

بعد التحويل إلى JSON:

```ts
{
  "حقل1": false,
  "حقل2": true,
  "حقل3": true,
  "حقل4": true,
  "حقل5": false
}
```

### حقول من نوع تاريخ

| DateOnly            | Local(+08:00)       | GMT                 |
| ------------------- | ------------------- | ------------------- |
| 2023-01-18 22:22:22 | 2023-01-18 22:22:22 | 2023-01-18 22:22:22 |

بعد التحويل إلى JSON:

```ts
{
  "DateOnly": "2023-01-18T00:00:00.000Z",
  "Local(+08:00)": "2023-01-18T14:22:22.000Z",
  "GMT": "2023-01-18T22:22:22.000Z"
}
```

### حقول من نوع اختيار

يمكن استخدام كل من قيم الخيارات وتسميات الخيارات كنص للاستيراد. يتم فصل الخيارات المتعددة بفاصلات (`،` `،`) أو فواصل تعداد (`、`).

على سبيل المثال، تتضمن الخيارات المتاحة لحقل `الأولوية`:

| قيمة الخيار | تسمية الخيار |
| ------------ | ------------ |
| low          | منخفض        |
| medium       | متوسط        |
| high         | مرتفع        |

يمكن استخدام كل من قيم الخيارات وتسميات الخيارات كنص للاستيراد.

| الأولوية |
| -------- |
| مرتفع    |
| low      |

بعد التحويل إلى JSON:

```ts
[{ "الأولوية": 'high' }, { "الأولوية": 'low' }]
```

### حقول التقسيمات الإدارية الصينية

| منطقة1         | منطقة2         |
| ------------- | ------------- |
| 北京市/市辖区 | 天津市/市辖区 |

بعد التحويل إلى JSON:

```ts
{
  "منطقة1": ["11", "1101"],
  "منطقة2": ["12", "1201"]
}
```

### حقول المرفقات

| مرفق                                     |
| ---------------------------------------- |
| https://www.nocobase.com/images/logo.png |

بعد التحويل إلى JSON:

```ts
{
  "مرفق": [
    {
      "filename": "logo.png",
      "title": "logo.png",
      "extname": ".png",
      "url": "https://www.nocobase.com/images/logo.png"
    }
  ]
}
```

### حقول من نوع علاقة

يتم فصل إدخالات البيانات المتعددة بفاصلات (`،` `،`) أو فواصل تعداد (`、`).

| القسم/الاسم | الفئة/العنوان |
| ----------- | ------------- |
| فريق التطوير | فئة1، فئة2    |

بعد التحويل إلى JSON:

```ts
{
  "القسم": [1], // 1 هو معرف السجل للقسم المسمى "فريق التطوير"
  "الفئة": [1,2] // 1,2 هما معرفا السجل للفئتين المعنونتين "فئة1" و "فئة2"
}
```

### حقول من نوع JSON

| JSON1           |
| --------------- |
| {"key":"value"} |

بعد التحويل إلى JSON:

```ts
{
  "JSON": {"key":"value"}
}
```

### أنواع هندسة الخرائط

| Point | Line        | Polygon           | Circle |
| ----- | ----------- | ----------------- | ------ |
| 1,2   | (1,2),(3,4) | (1,2),(3,4),(1,2) | 1,2,3  |

بعد التحويل إلى JSON:

```ts
{
  "Point": [1,2],
  "Line": [[1,2], [3,4]],
  "Polygon": [[1,2], [3,4], [1,2]],
  "Circle": [1,2,3]
}
```

## تنسيق الاستيراد المخصص

سجّل `ValueParser` مخصصًا باستخدام الدالة `db.registerFieldValueParsers()`، على سبيل المثال:

```ts
import { BaseValueParser } from '@nocobase/database';

class PointValueParser extends BaseValueParser {
  async setValue(value) {
    if (Array.isArray(value)) {
      this.value = value;
    } else if (typeof value === 'string') {
      this.value = value.split(',');
    } else {
      this.errors.push('Value invalid');
    }
  }
}

const db = new Database();

// عند استيراد حقل من نوع point، سيتم تحليل البيانات بواسطة PointValueParser
db.registerFieldValueParsers({
  point: PointValueParser,
});
```

مثال على الاستيراد

| Point |
| ----- |
| 1,2   |

بعد التحويل إلى JSON:

```ts
{
  "Point": [1,2]
}
```

## إعدادات الإجراء

![20251029170959](https://static-docs.nocobase.com/20251029170959.png)

- تهيئة الحقول القابلة للاستيراد

![20251029171036](https://static-docs.nocobase.com/20251029171036.png)

- [قواعد الربط](/interface-builder/actions/action-settings/linkage-rule): إظهار/إخفاء الزر ديناميكيًا؛
- [تحرير الزر](/interface-builder/actions/action-settings/edit-button): تحرير عنوان الزر ونوعه وأيقونته؛