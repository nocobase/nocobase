:::tip إشعار الترجمة بالذكاء الاصطناعي
تمت ترجمة هذه الوثائق تلقائيًا بواسطة الذكاء الاصطناعي.
:::

# القيم الافتراضية

## مقدمة

القيمة الافتراضية هي القيمة الأولية للحقل عند إنشاء سجل جديد. يمكنك تعيين قيمة افتراضية لحقل عند تهيئته في **مجموعة**، أو تحديد قيمة افتراضية لحقل في كتلة "نموذج إضافة". يمكن تعيينها كثابت أو متغير.

## أين يمكن تعيين القيم الافتراضية

### حقول ال**مجموعة**

![20240411095933](https://static-docs.nocobase.com/20240411095933.png)

### الحقول في نموذج الإضافة

تدعم معظم الحقول في نموذج الإضافة تعيين قيمة افتراضية.

![20251028161801](https://static-docs.nocobase.com/20251028161801.png)

### الإضافة في نموذج فرعي

البيانات الفرعية التي تتم إضافتها عبر حقل نموذج فرعي، سواء في نموذج إضافة أو تعديل، سيكون لها قيمة افتراضية.

إضافة جديد في نموذج فرعي
![20251028163455](https://static-docs.nocobase.com/20251028163455.png)

عند تعديل البيانات الموجودة، لن يتم ملء الحقل الفارغ بالقيمة الافتراضية. فقط البيانات المضافة حديثًا هي التي سيتم ملؤها بالقيمة الافتراضية.

### القيم الافتراضية لحقول الارتباط

فقط علاقات النوع "**متعدد إلى واحد**" و "**متعدد إلى متعدد**" هي التي تحتوي على قيم افتراضية عند استخدام مكونات التحديد (Select، RecordPicker).

![20251028164128](https://static-docs.nocobase.com/20251028164128.png)

## متغيرات القيم الافتراضية

### ما هي المتغيرات المتاحة

- المستخدم الحالي؛
- السجل الحالي؛ ينطبق هذا فقط على السجلات الموجودة؛
- النموذج الحالي، من الناحية المثالية، يسرد فقط الحقول الموجودة في النموذج؛
- الكائن الحالي، وهو مفهوم داخل النماذج الفرعية (كائن البيانات لكل صف في النموذج الفرعي)؛
- معلمات URL
  لمزيد من المعلومات حول المتغيرات، راجع [المتغيرات](/interface-builder/variables)

### متغيرات القيم الافتراضية للحقول

تنقسم إلى فئتين: حقول غير الارتباط وحقول الارتباط.

#### متغيرات القيم الافتراضية لحقول الارتباط

- يجب أن يكون كائن المتغير سجل **مجموعة**؛
- يجب أن يكون **مجموعة** في سلسلة الوراثة، يمكن أن تكون ال**مجموعة** الحالية أو **مجموعة** رئيسية/فرعية؛
- متغير "السجلات المحددة في الجدول" متاح فقط لحقول الارتباط "متعدد إلى متعدد" و "واحد إلى متعدد/متعدد إلى واحد"؛
- **في السيناريوهات متعددة المستويات، يجب تسطيحها وإزالة التكرارات**

```typescript
// 表格选中记录：
[{id:1},{id:2},{id:3},{id:4}]

// 表格选中记录/对一：
[{对一: {id:2}}, {对一: {id:3}}, {对一: {id:3}}]
// 拍平并去重
[{id: 2}, {id: 3}]

// 表格选中记录/对多：
[{对多: [{id: 1}, {id:2}]}, {对多: {[id:3}, {id:4}]}]
// 拍平
[{id:1},{id:2},{id:3},{id:4}]
```

#### متغيرات القيم الافتراضية غير الارتباطية

- يجب أن تكون الأنواع متسقة أو متوافقة، على سبيل المثال، السلاسل النصية متوافقة مع الأرقام، وجميع الكائنات التي توفر طريقة `toString`؛
- حقل JSON خاص ويمكنه تخزين أي نوع من البيانات؛

### مستوى الحقل (الحقول الاختيارية)

![20240411101157](https://static-docs.nocobase.com/20240411101157.png)

- متغيرات القيم الافتراضية غير الارتباطية
  - عند تحديد حقول متعددة المستويات، يقتصر الأمر على علاقات "إلى واحد" ولا يدعم علاقات "إلى متعدد"؛
  - حقل JSON خاص ويمكن أن يكون غير مقيد؛

- متغيرات القيم الافتراضية للارتباط
  - `hasOne`، يدعم علاقات "إلى واحد" فقط؛
  - `hasMany`، يدعم كلاً من "إلى واحد" (تحويل داخلي) و "إلى متعدد"؛
  - `belongsToMany`، يدعم كلاً من "إلى واحد" (تحويل داخلي) و "إلى متعدد"؛
  - `belongsTo`، عادةً ما يكون "إلى واحد"، ولكن عندما تكون العلاقة الأصلية `hasMany`، فإنه يدعم أيضًا "إلى متعدد" (لأن `hasMany`/`belongsTo` هي في الأساس علاقة متعدد إلى متعدد)؛

## حالات خاصة

### علاقة "متعدد إلى متعدد" تعادل تركيبة "واحد إلى متعدد/متعدد إلى واحد"

النموذج

![20240411101558](https://static-docs.nocobase.com/20240411101558.png)

### لماذا لا تحتوي علاقات "واحد إلى واحد" و "واحد إلى متعدد" على قيم افتراضية؟

على سبيل المثال، في علاقة A.B، إذا كان b1 مرتبطًا بـ a1، فلا يمكن ربطه بـ a2. إذا أصبح b1 مرتبطًا بـ a2، فسيتم إزالة ارتباطه بـ a1. في هذه الحالة، لا تتم مشاركة البيانات، بينما القيمة الافتراضية هي آلية مشاركة (يمكن للجميع الارتباط). لذلك، لا يمكن تعيين قيم افتراضية لعلاقات "واحد إلى واحد" و "واحد إلى متعدد".

### لماذا لا يمكن للنماذج الفرعية أو الجداول الفرعية من نوع "متعدد إلى واحد" و "متعدد إلى متعدد" أن تحتوي على قيم افتراضية؟

لأن التركيز الأساسي للنماذج الفرعية والجداول الفرعية هو التعديل المباشر لبيانات الارتباط (بما في ذلك الإضافة والإزالة)، بينما القيمة الافتراضية للارتباط هي آلية مشاركة حيث يمكن للجميع الارتباط، ولكن لا يمكن تعديل بيانات الارتباط. لذلك، ليس من المناسب توفير قيم افتراضية في هذا السيناريو.

بالإضافة إلى ذلك، تحتوي النماذج الفرعية أو الجداول الفرعية على حقول فرعية، وسيكون من غير الواضح ما إذا كانت القيمة الافتراضية للنموذج الفرعي أو الجدول الفرعي هي قيمة افتراضية للصف أو للعمود.

بالنظر إلى جميع العوامل، من الأنسب ألا تحتوي النماذج الفرعية أو الجداول الفرعية على قيم افتراضية مباشرة، بغض النظر عن نوع العلاقة.