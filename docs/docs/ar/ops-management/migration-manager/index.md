:::tip إشعار الترجمة بالذكاء الاصطناعي
تمت ترجمة هذه الوثائق تلقائيًا بواسطة الذكاء الاصطناعي.
:::

```
pkg: '@nocobase/plugin-migration-manager'
```

# مدير الترحيل

## مقدمة

يساعدك مدير الترحيل على نقل إعدادات التطبيق من بيئة تطبيق إلى أخرى. يركز مدير الترحيل بشكل أساسي على ترحيل "إعدادات التطبيق". إذا كنت بحاجة إلى ترحيل كامل للبيانات، فنوصي باستخدام "[مدير النسخ الاحتياطي](../backup-manager/index.mdx)" لإجراء النسخ الاحتياطي والاستعادة.

## التثبيت

يعتمد مدير الترحيل على [إضافة مدير النسخ الاحتياطي](../backup-manager/index.mdx). يرجى التأكد من تثبيت الإضافة وتفعيلها مسبقًا.

## العملية والمبادئ

يقوم مدير الترحيل بنقل جداول البيانات والبيانات من قاعدة البيانات الرئيسية، بناءً على قواعد الترحيل المحددة، من تطبيق إلى آخر. تجدر الإشارة إلى أنه لا يرحّل البيانات من قواعد البيانات الخارجية أو التطبيقات الفرعية.

![20250102202546](https://static-docs.nocobase.com/20250102202546.png)

## قواعد الترحيل

### القواعد المضمنة

يقوم مدير الترحيل بترحيل جميع جداول البيانات في قاعدة البيانات الرئيسية، ويدعم حاليًا القواعد الخمس التالية:

-   **التركيب فقط:** يرحّل تركيب جداول البيانات (الـ Schema) فقط، ولا يتضمن إدراج أو تحديث أي بيانات.
-   **الكتابة فوق (مسح وإعادة إدراج):** يمسح جميع السجلات الموجودة في جدول البيانات الهدف، ثم يدرج البيانات الجديدة.
-   **إدراج أو تحديث (Upsert):** إذا كان السجل موجودًا، يتم تحديثه؛ وإذا لم يكن موجودًا، يتم إدراجه.
-   **تجاهل التكرار عند الإدراج:** عند إدراج البيانات، إذا كان السجل موجودًا بالفعل، يتم تجاهل الإدراج ولا يتم إجراء أي تحديث.
-   **تخطي:** لا يتم إجراء أي معالجة على الجدول.

ملاحظات إضافية:

-   تقوم قواعد "الكتابة فوق"، و"إدراج أو تحديث"، و"تجاهل التكرار عند الإدراج" بمزامنة تغييرات تركيب الجدول أيضًا.
-   لا يمكن تطبيق قاعدتي `إدراج أو تحديث` و`تجاهل التكرار عند الإدراج` على جداول البيانات التي تحتوي على مفتاح أساسي تلقائي الزيادة (Auto-increment ID) أو التي لا تحتوي على مفتاح أساسي.
-   تعتمد قاعدتا `إدراج أو تحديث` و`تجاهل التكرار عند الإدراج` على المفتاح الأساسي لتحديد ما إذا كان السجل موجودًا بالفعل.

### تصميم مفصل

![20250102204909](https://static-docs.nocobase.com/20250102204909.png)

### واجهة الإعدادات

إعداد قواعد الترحيل

![20250102205450](https://static-docs.nocobase.com/20250102205450.png)

تفعيل القواعد المستقلة

![20250107105005](https://static-docs.nocobase.com/20250107105005.png)

اختيار القواعد المستقلة والجداول التي ستتم معالجتها وفقًا لهذه القواعد

![20250107104644](https://static-docs.nocobase.com/20250107104644.png)

## ملفات الترحيل

![20250102205844](https://static-docs.nocobase.com/20250102205844.png)

### إنشاء ترحيل جديد

![20250102205857](https://static-docs.nocobase.com/20250102205857.png)

### تنفيذ الترحيل

![20250102205915](https://static-docs.nocobase.com/20250102205915.png)

فحص متغيرات بيئة التطبيق (تعرف على [متغيرات البيئة](#))

![20250102212311](https://static-docs.nocobase.com/20250102212311.png)

إذا كانت هناك أي متغيرات مفقودة، ستظهر نافذة منبثقة لتوجيه المستخدم لإدخال متغيرات البيئة الجديدة المطلوبة هنا، ثم المتابعة.

![20250102210009](https://static-docs.nocobase.com/20250102210009.png)

## سجلات الترحيل

![20250102205738](https://static-docs.nocobase.com/20250102205738.png)

## التراجع

قبل تنفيذ أي ترحيل، يتم عمل نسخة احتياطية تلقائيًا للتطبيق الحالي. إذا فشل الترحيل أو كانت النتائج غير متوقعة، يمكنك التراجع واستعادة التطبيق باستخدام [مدير النسخ الاحتياطي](../backup-manager/index.mdx).

![20250105195029](https://static-docs.nocobase.com/20250105195029.png)