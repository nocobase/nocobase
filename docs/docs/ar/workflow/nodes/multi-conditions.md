:::tip إشعار الترجمة بالذكاء الاصطناعي
تمت ترجمة هذه الوثائق تلقائيًا بواسطة الذكاء الاصطناعي.
:::

# تفرع متعدد الشروط <Badge>v2.0.0+</Badge>

## مقدمة

يشبه عبارات `switch / case` أو `if / else if` في لغات البرمجة. يقوم النظام بتقييم الشروط المحددة بالتتابع. بمجرد استيفاء أحد الشروط، يتم تنفيذ سير العمل الخاص بالفرع المقابل وتجاوز التحقق من الشروط اللاحقة. إذا لم يتم استيفاء أي من الشروط، يتم تنفيذ فرع "وإلا".

## إنشاء عقدة

في واجهة إعدادات سير العمل، انقر على زر الزائد ("+") في سير العمل لإضافة عقدة "تفرع متعدد الشروط":

![إنشاء تفرع متعدد الشروط](https://static-docs.nocobase.com/20251123222134.png)

## إدارة الفروع

### الفروع الافتراضية

بعد إنشاء العقدة، تتضمن فرعين افتراضيين:

1.  **فرع الشرط**: لتكوين شروط التحقق المحددة.
2.  **فرع وإلا**: يتم الدخول إليه عندما لا يتم استيفاء أي من فروع الشروط؛ ولا يتطلب تكوين شروط.

انقر على زر "إضافة فرع" أسفل العقدة لإضافة المزيد من فروع الشروط.

![20251123222540](https://static-docs.nocobase.com/20251123222540.png)

### إضافة فرع

بعد النقر على "إضافة فرع"، يتم إلحاق الفرع الجديد قبل فرع "وإلا".

![20251123222805](https://static-docs.nocobase.com/20251123222805.png)

### حذف فرع

عند وجود عدة فروع شروط، انقر على أيقونة سلة المهملات على يمين الفرع لحذفه. إذا تبقى فرع شرط واحد فقط، فلا يمكن حذفه.

![20251123223127](https://static-docs.nocobase.com/20251123223127.png)

:::info{title=ملاحظة}
سيؤدي حذف الفرع إلى حذف جميع العقد الموجودة بداخله أيضًا؛ يرجى المتابعة بحذر.

فرع "وإلا" هو فرع مدمج ولا يمكن حذفه.
:::

## إعدادات العقدة

### إعدادات الشرط

انقر على اسم الشرط في أعلى الفرع لتعديل تفاصيل الشرط المحددة:

![20251123223352](https://static-docs.nocobase.com/20251123223352.png)

#### تسمية الشرط

يدعم التسميات المخصصة. بمجرد تعبئتها، ستظهر كاسم للشرط في مخطط سير العمل. إذا لم يتم تكوينها (أو تركت فارغة)، فستظهر افتراضيًا "الشرط 1"، "الشرط 2"، وما إلى ذلك، بالتسلسل.

![20251123224209](https://static-docs.nocobase.com/20251123224209.png)

#### محرك الحساب

يدعم حاليًا ثلاثة محركات:

-   **أساسي**: يستخدم مقارنات منطقية بسيطة (مثل يساوي، يحتوي على، وما إلى ذلك) ومجموعات "و" / "أو" لتحديد النتائج.
-   **Math.js**: يدعم حساب التعبيرات باستخدام صيغة [Math.js](https://mathjs.org/).
-   **Formula.js**: يدعم حساب التعبيرات باستخدام صيغة [Formula.js](https://formulajs.info/) (مشابهة لصيغ Excel).

تدعم جميع الأوضاع الثلاثة استخدام متغيرات سياق سير العمل كمعلمات.

### عندما لا يتم استيفاء أي من الشروط

في لوحة إعدادات العقدة، يمكنك تحديد الإجراء اللاحق عندما لا يتم استيفاء أي من الشروط:

![20251123224348](https://static-docs.nocobase.com/20251123224348.png)

*   **إنهاء سير العمل بالفشل (افتراضي)**: يقوم بتعيين حالة سير العمل على أنها فاشلة وينهي العملية.
*   **متابعة تنفيذ العقد اللاحقة**: بعد انتهاء العقدة الحالية، يستمر في تنفيذ العقد اللاحقة في سير العمل.

:::info{title=ملاحظة}
بغض النظر عن طريقة المعالجة المختارة، عندما لا يتم استيفاء أي من الشروط، سيدخل سير العمل أولاً إلى فرع "وإلا" لتنفيذ العقد الموجودة بداخله.
:::

## سجل التنفيذ

في سجل تنفيذ سير العمل، تحدد عقدة التفرع متعدد الشروط نتيجة كل شرط باستخدام ألوان مختلفة:

-   **أخضر**: تم استيفاء الشرط؛ تم الدخول إلى هذا الفرع.
-   **أحمر**: لم يتم استيفاء الشرط (أو حدث خطأ في الحساب)؛ تم تجاوز هذا الفرع.
-   **أزرق**: لم يتم تنفيذ التحقق (تم التجاوز لأن شرطًا سابقًا قد تم استيفاؤه بالفعل).

![20251123225455](https://static-docs.nocobase.com/20251123225455.png)

إذا تسبب خطأ في التكوين في حدوث استثناء في حساب الشرط، بالإضافة إلى الظهور باللون الأحمر، عند تمرير مؤشر الماوس فوق اسم الشرط، ستظهر معلومات الخطأ المحددة:

![20251123231014](https://static-docs.nocobase.com/20251123231014.png)

عند حدوث استثناء في حساب الشرط، ستنتهي عقدة التفرع متعدد الشروط بحالة "خطأ" ولن تستمر في تنفيذ العقد اللاحقة.