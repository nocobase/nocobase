---
pkg: '@nocobase/plugin-workflow-subflow'
---
:::tip إشعار الترجمة بالذكاء الاصطناعي
تمت ترجمة هذه الوثائق تلقائيًا بواسطة الذكاء الاصطناعي.
:::


# استدعاء سير العمل

## مقدمة

تُستخدم هذه الميزة لاستدعاء مسارات عمل أخرى من داخل سير عمل واحد. يمكنك استخدام المتغيرات من سير العمل الحالي كمدخلات لسير العمل الفرعي، واستخدام مخرجات سير العمل الفرعي كمتغيرات في سير العمل الحالي لاستخدامها في العقد اللاحقة.

توضح الصورة أدناه عملية استدعاء سير العمل:

![20241230134634](https://static-docs.nocobase.com/20241230134634.png)

من خلال استدعاء مسارات العمل، يمكنك إعادة استخدام منطق العمليات المشترك، مثل إرسال رسائل البريد الإلكتروني أو الرسائل النصية القصيرة، أو تقسيم سير عمل معقد إلى عدة مسارات عمل فرعية لتسهيل إدارته وصيانته.

في جوهر الأمر، لا يفرق سير العمل ما إذا كانت عملية ما هي سير عمل فرعي أم لا. يمكن استدعاء أي سير عمل كسير عمل فرعي بواسطة مسارات عمل أخرى، ويمكنه أيضًا استدعاء مسارات عمل أخرى. جميع مسارات العمل متساوية؛ لا توجد سوى علاقة الاستدعاء والجهة المستدعاة.

وبالمثل، يتم استخدام استدعاء سير العمل في موقعين:

1.  في سير العمل الرئيسي: بصفته المستدعي، يستدعي مسارات عمل أخرى من خلال عقدة "استدعاء سير العمل".
2.  في سير العمل الفرعي: بصفته الجهة المستدعاة، يحفظ المتغيرات التي يجب إخراجها من سير العمل الحالي من خلال عقدة "مخرجات سير العمل"، والتي يمكن استخدامها بواسطة العقد اللاحقة في سير العمل الذي استدعاها.

## إنشاء العقدة

في واجهة إعدادات سير العمل، انقر على زر علامة الجمع ("+") في سير العمل لإضافة عقدة "استدعاء سير العمل":

![إضافة عقدة استدعاء سير العمل](https://static-docs.nocobase.com/20241230001323.png)

## إعداد العقدة

### تحديد سير العمل

حدد سير العمل المراد استدعاؤه. يمكنك استخدام مربع البحث للبحث السريع:

![تحديد سير العمل](https://static-docs.nocobase.com/20241230001534.png)

:::info{title=تلميح}
*   يمكن استدعاء مسارات العمل المعطلة أيضًا كمسارات عمل فرعية.
*   عندما يكون سير العمل الحالي في الوضع المتزامن، يمكنه فقط استدعاء مسارات العمل الفرعية التي تكون أيضًا في الوضع المتزامن.
:::

### إعداد متغيرات مشغل سير العمل

بعد تحديد سير العمل، تحتاج أيضًا إلى إعداد متغيرات المشغل كبيانات إدخال لتشغيل سير العمل الفرعي. يمكنك تحديد بيانات ثابتة مباشرة أو اختيار متغيرات من سير العمل الحالي:

![إعداد متغيرات المشغل](https://static-docs.nocobase.com/20241230162722.png)

تتطلب أنواع المشغلات المختلفة متغيرات مختلفة، والتي يمكن إعدادها في النموذج حسب الحاجة.

## عقدة مخرجات سير العمل

ارجع إلى محتوى عقدة [مخرجات سير العمل](./output.md) لإعداد متغيرات إخراج سير العمل الفرعي.

## استخدام مخرجات سير العمل

بالعودة إلى سير العمل الرئيسي، في العقد الأخرى الموجودة أسفل عقدة استدعاء سير العمل، عندما ترغب في استخدام قيمة مخرجات سير العمل الفرعي، يمكنك تحديد نتيجة عقدة استدعاء سير العمل. إذا كانت مخرجات سير العمل الفرعي قيمة بسيطة، مثل سلسلة نصية أو رقم أو قيمة منطقية أو تاريخ (التاريخ يكون سلسلة نصية بتنسيق UTC) وما إلى ذلك، يمكن استخدامها مباشرة. أما إذا كان كائنًا معقدًا (مثل كائن من مجموعة)، فيجب أولاً تعيينه من خلال عقدة تحليل JSON قبل أن تتمكن من استخدام خصائصه؛ وإلا، فلا يمكن استخدامه إلا ككائن كامل.

إذا لم يكن سير العمل الفرعي يحتوي على عقدة مخرجات سير عمل مُعدة، أو إذا لم يكن لديه قيمة إخراج، فعند استخدام نتيجة عقدة استدعاء سير العمل في سير العمل الرئيسي، ستحصل فقط على قيمة فارغة (`null`).