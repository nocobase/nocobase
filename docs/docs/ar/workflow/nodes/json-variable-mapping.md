---
pkg: '@nocobase/plugin-workflow-json-variable-mapping'
---
:::tip إشعار الترجمة بالذكاء الاصطناعي
تمت ترجمة هذه الوثائق تلقائيًا بواسطة الذكاء الاصطناعي.
:::


# ربط متغيرات JSON

> v1.6.0

## مقدمة

يُستخدم لربط هياكل JSON المعقدة من نتائج العقد السابقة (upstream nodes) بمتغيرات، لاستخدامها في العقد اللاحقة. على سبيل المثال، بعد ربط نتائج عقدة إجراء SQL أو طلب HTTP، يمكن استخدام قيم خصائصها في العقد اللاحقة.

:::info{title=نصيحة}
على عكس عقدة حساب JSON (JSON Calculation node)، لا تدعم عقدة ربط متغيرات JSON التعبيرات المخصصة ولا تعتمد على محرك خارجي. تُستخدم فقط لربط قيم الخصائص ضمن هيكل JSON، ولكنها أبسط في الاستخدام.
:::

## إنشاء عقدة

في واجهة إعدادات سير العمل (workflow)، انقر على زر الزائد ("+") في المسار لإضافة عقدة "ربط متغيرات JSON":

![إنشاء عقدة](https://static-docs.nocobase.com/20250113173635.png)

## إعدادات العقدة

### مصدر البيانات

يمكن أن يكون مصدر البيانات نتيجة عقدة سابقة، أو كائن بيانات في سياق سير العمل. عادةً ما يكون كائن بيانات غير مهيكل داخليًا، مثل نتيجة عقدة SQL أو عقدة طلب HTTP.

![مصدر البيانات](https://static-docs.nocobase.com/20250113173720.png)

### إدخال بيانات نموذجية

الصق بيانات نموذجية وانقر على زر التحليل (parse) لإنشاء قائمة بالمتغيرات تلقائيًا:

![إدخال بيانات نموذجية](https://static-docs.nocobase.com/20250113182327.png)

إذا كانت هناك أي متغيرات في القائمة التي تم إنشاؤها تلقائيًا لا تحتاج إليها، يمكنك النقر على زر الحذف لإزالتها.

:::info{title=نصيحة}
البيانات النموذجية ليست نتيجة التنفيذ النهائية؛ تُستخدم فقط للمساعدة في إنشاء قائمة المتغيرات.
:::

### المسار يتضمن فهرس المصفوفة

إذا لم يتم تحديد هذا الخيار، فسيتم ربط محتوى المصفوفة وفقًا لطريقة التعامل الافتراضية مع المتغيرات في سير عمل NocoBase. على سبيل المثال، عند إدخال النموذج التالي:

```json
{
  "a": 1,
  "b": [
    {
      "c": 2
    },
    {
      "c": 3
    }
  ]
}
```

في المتغيرات التي تم إنشاؤها، سيمثل `b.c` المصفوفة `[2, 3]`.

إذا تم تحديد هذا الخيار، فسيتضمن مسار المتغير فهرس المصفوفة، على سبيل المثال `b.0.c` و `b.1.c`.

![20250113184056](https://static-docs.nocobase.com/20250113184056.png)

عند تضمين فهارس المصفوفة، يجب التأكد من أن فهارس المصفوفة في بيانات الإدخال متسقة؛ وإلا، فقد يؤدي ذلك إلى خطأ في التحليل.

## الاستخدام في العقد اللاحقة

في إعدادات العقد اللاحقة، يمكنك استخدام المتغيرات التي تم إنشاؤها بواسطة عقدة ربط متغيرات JSON:

![20250113203658](https://static-docs.nocobase.com/20250113203658.png)

على الرغم من أن هيكل JSON قد يكون معقدًا، إلا أنه بعد الربط، ما عليك سوى اختيار المتغير للمسار المقابل.