:::tip
이 문서는 AI로 번역되었습니다. 부정확한 내용이 있을 경우 [영어 버전](/en)을 참조하세요
:::

# 데이터 쿼리

특정 조건을 만족하는 컬렉션의 데이터를 쿼리하고 데이터 레코드를 가져오는 데 사용됩니다.

단일 레코드 또는 여러 레코드를 쿼리하도록 설정할 수 있습니다. 쿼리 결과는 이후 워크플로우 노드에서 변수로 활용될 수 있습니다. 여러 레코드를 쿼리할 경우 결과는 배열 형태이며, 쿼리 결과가 비어 있을 때 이후 노드의 실행을 계속할지 여부를 선택할 수 있습니다.

## 노드 생성

워크플로우 설정 화면에서 흐름 내의 더하기("`+`") 버튼을 클릭하여 "데이터 쿼리" 노드를 추가합니다.

![데이터 쿼리 노드 추가](https://static-docs.nocobase.com/c1ef2b851b437806faf7a39c6ab9d33a.png)

## 노드 설정

![쿼리 노드 설정](https://static-docs.nocobase.com/20240520131324.png)

### 컬렉션

데이터를 쿼리할 컬렉션을 선택합니다.

### 결과 유형

결과 유형은 "단일 레코드"와 "여러 레코드" 두 가지로 나뉩니다.

-   단일 레코드: 결과는 객체 형태이며, 조건에 일치하는 첫 번째 레코드 또는 `null` 값입니다.
-   여러 레코드: 결과는 배열 형태이며, 조건에 일치하는 모든 레코드를 포함합니다. 일치하는 레코드가 없으면 빈 배열이 됩니다. 이 결과는 반복 노드를 통해 하나씩 처리할 수 있습니다.

### 필터 조건

일반 컬렉션 쿼리의 필터 조건과 유사하게, 워크플로우의 컨텍스트 변수를 사용할 수 있습니다.

### 정렬

단일 또는 여러 레코드를 쿼리할 때 정렬 규칙을 사용하여 원하는 결과를 제어할 수 있습니다. 예를 들어, 가장 최신 레코드를 쿼리하려면 "생성 시간" 필드를 기준으로 내림차순 정렬할 수 있습니다.

### 페이지네이션

결과 집합이 매우 클 수 있는 경우, 페이지네이션을 사용하여 쿼리 결과의 수를 제어할 수 있습니다. 예를 들어, 최신 10개 레코드를 쿼리하려면 "생성 시간" 필드를 기준으로 내림차순 정렬한 다음, 페이지네이션을 1페이지당 10개 레코드로 설정할 수 있습니다.

### 빈 결과 처리

단일 레코드 모드에서 조건에 맞는 데이터가 없으면 쿼리 결과는 `null`이 되고, 여러 레코드 모드에서는 빈 배열(`[]`)이 됩니다. 필요에 따라 "쿼리 결과가 비어 있을 때 워크플로우 종료" 옵션을 선택할 수 있습니다. 이 옵션을 선택하면 쿼리 결과가 비어 있을 때 이후 노드가 실행되지 않고, 워크플로우가 실패 상태로 조기에 종료됩니다.