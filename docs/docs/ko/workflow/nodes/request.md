---
pkg: '@nocobase/plugin-workflow-request'
---
:::tip
이 문서는 AI로 번역되었습니다. 부정확한 내용이 있을 경우 [영어 버전](/en)을 참조하세요
:::


# HTTP 요청

## 소개

다른 웹 시스템과 상호 작용해야 할 때 HTTP 요청 노드를 사용할 수 있습니다. 이 노드는 설정에 따라 지정된 주소로 HTTP 요청을 보냅니다. JSON 또는 `application/x-www-form-urlencoded` 형식의 데이터를 전송하여 외부 시스템과 데이터를 주고받을 수 있습니다.

Postman과 같은 요청 전송 도구에 익숙하시다면 HTTP 요청 노드 사용법을 빠르게 익히실 수 있습니다. 이러한 도구들과 달리, HTTP 요청 노드의 모든 매개변수는 현재 워크플로우의 컨텍스트 변수를 사용할 수 있어, 시스템의 비즈니스 프로세스와 유기적으로 통합될 수 있습니다.

## 설치

내장 플러그인이므로 별도로 설치할 필요가 없습니다.

## 노드 생성

워크플로우 설정 화면에서 흐름 내의 더하기("+"") 버튼을 클릭하여 "HTTP 요청" 노드를 추가합니다.

![HTTP 请求_添加](https://static-docs.nocobase.com/46f2a6fc3f6869c80f8fbd362a54e644.png)

## 노드 설정

![HTTP请求节点_节点配置](https://static-docs.nocobase.com/2fcb29af63f6869c80f8fbd362a54e644.png)

### 요청 메서드

선택 가능한 HTTP 요청 메서드: `GET`, `POST`, `PUT`, `PATCH`, `DELETE`입니다.

### 요청 주소

HTTP 서비스의 URL입니다. 프로토콜 부분(`http://` 또는 `https://`)을 포함해야 하며, `https://` 사용을 권장합니다.

### 요청 데이터 형식

요청 헤더의 `Content-Type`을 의미합니다. 지원되는 형식은 "[요청 본문](#요청-본문)" 섹션을 참조하십시오.

### 요청 헤더 설정

요청 헤더(Header) 부분의 키-값 쌍입니다. 관련 값은 워크플로우 컨텍스트 변수를 사용할 수 있습니다.

:::info{title=팁}
`Content-Type` 요청 헤더는 요청 데이터 형식 설정을 통해 이미 구성되었으므로, 여기에 별도로 입력할 필요가 없으며, 입력하더라도 무시됩니다.
:::

### 요청 매개변수

요청 쿼리(Query) 부분의 키-값 쌍입니다. 관련 값은 워크플로우 컨텍스트 변수를 사용할 수 있습니다.

### 요청 본문

요청의 본문(Body) 부분입니다. `Content-Type` 선택에 따라 다양한 형식을 지원합니다.

#### `application/json`

표준 JSON 형식의 텍스트를 지원합니다. 텍스트 편집기 우측 상단의 변수 버튼을 사용하여 워크플로우 컨텍스트의 변수를 삽입할 수 있습니다.

:::info{title=팁}
변수는 JSON 문자열 내에서 사용해야 합니다. 예: `{ "a": "{{$context.data.a}}" }`.
:::

#### `application/x-www-form-urlencoded`

키-값 쌍 형식입니다. 값은 워크플로우 컨텍스트의 변수를 사용할 수 있으며, 변수가 포함된 경우 문자열 템플릿으로 파싱되어 최종 문자열 값으로 결합됩니다.

#### `application/xml`

표준 XML 형식의 텍스트를 지원합니다. 텍스트 편집기 우측 상단의 변수 버튼을 사용하여 워크플로우 컨텍스트의 변수를 삽입할 수 있습니다.

#### `multipart/form-data` <Badge>v1.8.0+</Badge>

폼 데이터의 키-값 쌍을 지원합니다. 데이터 유형을 파일 객체로 선택하면 파일을 업로드할 수 있습니다. 파일은 컨텍스트에 이미 존재하는 파일 객체(예: 파일 컬렉션 조회 결과 또는 관련 파일 컬렉션의 관계 데이터)를 변수를 통해 선택해야 합니다.

:::info{title=팁}
파일 데이터를 선택할 때는 변수가 단일 파일 객체에 해당하는지 확인해야 합니다. 파일 목록(다대다 관계 조회 시 관계 필드의 값은 배열이 됨)이 아니어야 합니다.
:::

### 타임아웃 설정

요청이 오랫동안 응답하지 않을 경우, 타임아웃 설정을 통해 해당 요청의 실행을 취소할 수 있습니다. 요청이 타임아웃되면 현재 워크플로우는 실패 상태로 조기에 종료됩니다.

### 실패 무시

요청 노드는 표준 HTTP 상태 코드 중 `200`에서 `299` 사이(포함)의 상태를 성공으로 간주하며, 그 외의 모든 상태는 실패로 간주합니다. "실패한 요청 무시 및 워크플로우 계속" 옵션을 선택하면, 요청이 실패하더라도 이후의 다른 워크플로우 노드가 계속 실행됩니다.

## 응답 결과 사용

HTTP 요청의 응답 결과는 [JSON 쿼리](./json-query.md) 노드를 통해 파싱하여 후속 노드에서 사용할 수 있습니다.

`v1.0.0-alpha.16` 버전부터는 요청 노드 결과 응답의 세 가지 부분이 각각 변수로 사용될 수 있습니다.

* 응답 상태 코드
* 응답 헤더
* 응답 데이터

![HTTP请求节点_响应结果使用](https://static-docs.nocobase.com/20240529110610.png)

응답 상태 코드는 일반적으로 `200`, `403` 등과 같은 숫자 형태의 표준 HTTP 상태 코드입니다(서비스 제공자가 정의).

응답 헤더(Response headers)는 JSON 형식이며, JSON 형식의 응답 데이터를 포함합니다. 이들은 JSON 노드를 사용하여 파싱한 후에 사용해야 합니다.

## 예시

예를 들어, 요청 노드를 사용하여 클라우드 플랫폼과 연동하여 알림 SMS를 보낼 수 있습니다. 알리바바 클라우드(阿里云) SMS 발송 API를 예로 들면 다음과 같이 설정할 수 있습니다(관련 매개변수는 해당 문서에서 직접 확인하여 적용해야 합니다).

![HTTP请求节点_节点配置](https://static-docs.nocobase.com/20240515124004.png)

워크플로우가 이 노드를 실행하면 설정된 내용으로 알리바바 클라우드의 SMS API를 호출합니다. 요청이 성공하면 SMS 클라우드 서비스를 통해 SMS가 발송됩니다.