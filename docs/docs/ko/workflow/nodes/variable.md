---
pkg: '@nocobase/plugin-workflow-variable'
---
:::tip
이 문서는 AI로 번역되었습니다. 부정확한 내용이 있을 경우 [영어 버전](/en)을 참조하세요
:::


# 변수

## 소개

워크플로우에서 변수를 선언하거나 이미 선언된 변수에 값을 할당할 수 있습니다. 이 기능은 주로 워크플로우 내에서 임시 데이터를 저장하는 데 활용됩니다.

## 노드 생성

워크플로우 설정 화면에서 워크플로우 내의 더하기('+'') 버튼을 클릭하여 '변수' 노드를 추가합니다.

![변수 노드 추가](https://static-docs.nocobase.com/53b1e48e777bfff7f2a08271526ef3ee.png)

## 노드 설정

### 모드

변수 노드는 프로그래밍의 변수와 유사하게, 사용하거나 값을 할당하기 전에 먼저 선언해야 합니다. 따라서 변수 노드를 생성할 때 변수의 모드를 선택해야 하며, 두 가지 모드를 선택할 수 있습니다.

![모드 선택](https://static-docs.nocobase.com/49d8b7b501de6faef6f303262aa14550.png)

- 새 변수 선언: 새로운 변수를 생성합니다.
- 기존 변수에 값 할당: 워크플로우에서 이전에 선언된 변수에 값을 할당합니다. 이는 변수의 값을 수정하는 것과 같습니다.

생성하는 노드가 워크플로우 내의 첫 번째 변수 노드인 경우, 아직 할당할 수 있는 변수가 없으므로 선언 모드만 선택할 수 있습니다.

이미 선언된 변수에 값을 할당하도록 선택할 경우, 변수가 선언된 노드인 대상 변수를 선택해야 합니다.

![값을 할당할 변수 선택](https://static-docs.nocobase.com/1ce8911548d7347e693d8cc8ac1953eb.png)

### 값

변수의 값은 어떤 유형이든 될 수 있습니다. 문자열, 숫자, 논리값, 날짜 등과 같은 상수가 될 수도 있고, 워크플로우 내의 다른 변수가 될 수도 있습니다.

선언 모드에서는 변수 값을 설정하는 것이 변수에 초기 값을 할당하는 것과 같습니다.

![초기 값 선언](https://static-docs.nocobase.com/4ce2c508986565ad537343013758c6a4.png)

할당 모드에서는 변수 값을 설정하는 것이 이미 선언된 대상 변수의 값을 새로운 값으로 수정하는 것과 같습니다. 이후 사용 시에는 이 새로운 값이 사용됩니다.

![선언된 변수에 트리거 변수 값 할당](https://static-docs.nocobase.com/858bae180712ad279ae6a964a77a7659.png)

## 변수 값 사용

변수 노드 이후의 노드에서는 '노드 변수' 그룹에서 이미 선언된 변수를 선택하여 해당 변수의 값을 사용할 수 있습니다. 예를 들어, 쿼리 노드에서 변수 값을 쿼리 조건으로 사용할 수 있습니다.

![변수 값을 쿼리 필터 조건으로 사용](https://static-docs.nocobase.com/1ca91c295254ff85999a1751499f14bc.png)

## 예시

변수 노드가 더 유용하게 활용되는 시나리오는 특정 분기에서 새로운 값을 이전 값과 계산하거나 병합한 다음 (프로그래밍의 `reduce`/`concat` 등과 유사하게) 해당 분기가 끝난 후에 사용하는 경우입니다. 아래에서는 반복 분기와 변수 노드를 사용하여 수신자 문자열을 연결하는 예시를 보여드립니다.

먼저, '게시글' 데이터가 업데이트될 때 트리거되도록 컬렉션 트리거 워크플로우를 생성하고, 관련 '작성자' 관계 데이터를 미리 로드합니다 (수신자 정보를 가져오기 위함).

![트리거 설정](https://static-docs.nocobase.com/93327530a93c695c637d74cdfdcd5cde.png)

그 다음, 수신자 문자열을 저장할 변수 노드를 생성합니다.

![수신자 변수 노드](https://static-docs.nocobase.com/d26fa4a7e7ee4f34e0d8392a51c6666e.png)

이어서 반복 분기 노드를 생성합니다. 이 노드는 게시글의 작성자를 순회하며 각 작성자의 수신자 정보를 수신자 변수에 연결하는 데 사용됩니다.

![게시글의 작성자 반복](https://static-docs.nocobase.com/083fe62c943c17a643dc47ec2872e07c.png)

반복 분기 내에서 먼저 계산 노드를 생성합니다. 이 노드는 현재 작성자와 이미 저장된 작성자 문자열을 연결하는 데 사용됩니다.

![수신자 문자열 연결](https://static-docs.nocobase.com/5d21a990162f32cb8818d27b16fd1bcd.png)

계산 노드 다음에 또 다른 변수 노드를 생성합니다. 할당 모드를 선택하고, 할당 대상으로 수신자 변수 노드를 선택하며, 값은 계산 노드의 결과를 선택합니다.

![연결된 수신자 문자열을 수신자 노드에 할당](https://static-docs.nocobase.com/fc40ed95dd9b61d924b7ca11b23f9482.png)

이렇게 하면 반복 분기가 완료된 후 수신자 변수에 모든 게시글 작성자의 수신자 문자열이 저장됩니다. 그 다음, 반복 후에 HTTP 요청 노드를 사용하여 이메일 발송 API를 호출하고 수신자 변수의 값을 수신자 매개변수로 API에 전달할 수 있습니다.

![요청 노드를 통해 수신자에게 메일 발송](https://static-docs.nocobase.com/37f71ae1a63e172bcb2dce10a250947e.png)

이로써 간단한 대량 이메일 발송 기능이 반복 및 변수 노드를 통해 구현되었습니다.