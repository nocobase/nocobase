:::tip
이 문서는 AI로 번역되었습니다. 부정확한 내용이 있을 경우 [영어 버전](/en)을 참조하세요
:::

# 실행 계획 (기록)

워크플로우가 트리거되면 해당 작업의 실행 과정을 추적하기 위해 실행 계획이 생성됩니다. 각 실행 계획에는 현재 실행 상태를 나타내는 상태 값이 있으며, 이 상태는 실행 기록 목록과 상세 보기에서 확인할 수 있습니다:

![실행 계획 상태](https://static-docs.nocobase.com/d4440d92ccafac6fac85da4415bb2a26.png)

주요 프로세스 브랜치의 모든 노드가 "완료" 상태로 프로세스 끝까지 실행되면, 전체 실행 계획은 "완료" 상태로 종료됩니다. 주요 프로세스 브랜치의 노드에서 "실패", "오류", "취소", "거부"와 같은 최종 상태가 발생하면, 전체 실행 계획은 해당 상태로 **조기 종료**됩니다. 주요 프로세스 브랜치의 노드에서 "대기" 상태가 발생하면, 전체 실행 계획은 일시 중지되지만, 대기 중인 노드가 재개될 때까지 "실행 중" 상태로 표시됩니다. 노드 유형에 따라 대기 상태 처리 방식이 다릅니다. 예를 들어, 수동 노드는 수동 처리를 기다려야 하고, 지연 노드는 지정된 시간이 경과한 후 계속 실행됩니다.

실행 계획의 상태는 다음 표와 같습니다:

| 상태   | 주요 프로세스에서 마지막으로 실행된 노드 상태 | 의미                                             |
| ------ | --------------------------------------------- | ------------------------------------------------ |
| 대기열 | -                                             | 워크플로우가 트리거되고 실행 계획이 생성되어, 스케줄러의 실행 할당을 기다리는 중입니다. |
| 실행 중 | 대기                                          | 노드가 일시 중지를 요청하여 추가 입력 또는 콜백을 기다리는 중입니다. |
| 완료   | 완료                                          | 문제가 발생하지 않았으며, 모든 노드가 예상대로 순차적으로 실행 완료되었습니다. |
| 실패   | 실패                                          | 노드 구성이 충족되지 않아 실패했습니다.          |
| 오류   | 오류                                          | 노드에서 처리되지 않은 프로그램 오류가 발생하여 조기 종료되었습니다. |
| 취소됨 | 취소                                          | 대기 중인 노드가 워크플로우 관리자에 의해 외부에서 실행이 취소되어 조기 종료되었습니다. |
| 거부됨 | 거부                                          | 수동 처리 노드에서 수동으로 거부되어 후속 프로세스가 더 이상 진행되지 않습니다. |

[빠른 시작](../getting-started.md) 예시에서, 워크플로우 실행 기록의 상세 보기를 통해 실행 과정에서 모든 노드가 정상적으로 실행되었는지, 그리고 각 실행된 노드의 실행 상태와 결과 데이터를 확인할 수 있다는 것을 이미 알고 있습니다. 일부 고급 워크플로우 및 노드에서는 순환 노드의 결과처럼 노드 결과가 여러 개일 수도 있습니다:

![여러 번 실행된 노드 결과](https://static-docs.nocobase.com/bbda259fa2ddf62b0fc0f982efbedae9.png)

:::info{title=팁}
워크플로우는 동시에 트리거될 수 있지만, 실행은 대기열에서 순차적으로 진행됩니다. 여러 워크플로우가 동시에 트리거되더라도 병렬로 실행되지 않고 하나씩 순서대로 실행됩니다. 따라서 "대기열" 상태가 나타나면 다른 워크플로우가 실행 중이므로 기다려야 함을 의미합니다.

"실행 중" 상태는 해당 실행 계획이 시작되었으며, 일반적으로 내부 노드의 대기 상태로 인해 일시 중지되었음을 나타낼 뿐입니다. 이 상태가 대기열 맨 앞의 실행 리소스를 선점했다는 의미는 아닙니다. 따라서 "실행 중"인 실행 계획이 있더라도, 다른 "대기열" 상태의 실행 계획은 계속해서 실행되도록 스케줄링될 수 있습니다.
:::

## 노드 실행 상태

실행 계획의 상태는 각 노드의 실행에 따라 결정됩니다. 한 번 트리거된 실행 계획에서 각 노드는 실행 후 실행 상태를 생성하며, 이 상태는 후속 프로세스가 계속 진행될지 여부를 결정합니다. 일반적으로 노드가 성공적으로 실행되면, 모든 노드가 순차적으로 실행 완료되거나 중단될 때까지 다음 노드가 계속 실행됩니다. 분기, 순환, 병렬, 지연 등 흐름 제어 관련 노드를 만나면, 노드에 구성된 조건과 런타임 컨텍스트 데이터를 기반으로 다음 노드의 실행 흐름이 결정됩니다.

각 노드 실행 후 발생할 수 있는 상태는 다음 표와 같습니다:

| 상태   | 최종 상태 여부 | 조기 종료 여부 | 의미                                                   |
| ------ | :------------: | :------------: | ------------------------------------------------------ |
| 대기   |       아니요   |       아니요   | 노드가 일시 중지를 요청하여 추가 입력 또는 콜백을 기다리는 중입니다. |
| 완료   |       예       |       아니요   | 문제가 발생하지 않았으며, 성공적으로 실행되어 다음 노드로 계속 진행됩니다. |
| 실패   |       예       |       예       | 노드 구성이 충족되지 않아 실패했습니다.                |
| 오류   |       예       |       예       | 노드에서 처리되지 않은 프로그램 오류가 발생하여 조기 종료되었습니다. |
| 취소됨 |       예       |       예       | 대기 중인 노드가 워크플로우 관리자에 의해 외부에서 실행이 취소되어 조기 종료되었습니다. |
| 거부됨 |       예       |       예       | 수동 처리 노드에서 수동으로 거부되어 후속 프로세스가 더 이상 진행되지 않습니다. |

"대기" 상태를 제외한 모든 상태는 노드 실행의 최종 상태입니다. 최종 상태가 "완료"인 경우에만 프로세스가 계속 진행되며, 그렇지 않으면 전체 워크플로우 실행이 조기 종료됩니다. 노드가 분기 흐름(병렬 분기, 조건 판단, 순환 등)에 있을 때, 노드 실행으로 생성된 최종 상태는 해당 분기를 시작한 노드에 의해 처리되며, 이를 통해 전체 워크플로우의 흐름이 결정됩니다.

예를 들어, "'예'인 경우 계속" 모드의 조건 노드를 사용할 때, 실행 결과가 "아니요"이면 전체 워크플로우 실행이 조기 종료되고 실패 상태로 종료되며, 후속 노드는 더 이상 실행되지 않습니다. 다음 그림과 같습니다:

![노드 실행 실패](https://static-docs.nocobase.com/993aecfa1465894bb574444f0a44313e.png)

:::info{title=팁}
"완료"를 제외한 모든 종료 상태는 실패로 간주될 수 있지만, 실패 원인은 다릅니다. 노드의 실행 결과를 확인하여 실패 원인을 자세히 파악할 수 있습니다.
:::