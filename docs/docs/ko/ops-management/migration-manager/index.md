---
pkg: '@nocobase/plugin-migration-manager'
---
:::tip
이 문서는 AI로 번역되었습니다. 부정확한 내용이 있을 경우 [영어 버전](/en)을 참조하세요
:::



# 마이그레이션 관리자

## 소개

마이그레이션 관리자는 애플리케이션 설정을 한 환경에서 다른 환경으로 옮기는 데 사용됩니다. 이 기능은 주로 '애플리케이션 설정' 마이그레이션에 중점을 둡니다. 전체 데이터 마이그레이션이 필요한 경우에는 '[백업 관리자](../backup-manager/index.mdx)'를 사용하여 전체 애플리케이션을 백업하고 복원하는 것을 권장합니다.

## 설치

마이그레이션 관리자는 [백업 관리자](../backup-manager/index.mdx) 플러그인에 의존합니다. 백업 관리자 플러그인이 이미 설치 및 활성화되어 있는지 확인해 주세요.

## 프로세스 및 원리

마이그레이션 관리자는 지정된 마이그레이션 규칙에 따라 주 데이터베이스의 테이블 및 데이터를 하나의 애플리케이션에서 다른 애플리케이션으로 마이그레이션합니다. 외부 데이터베이스나 하위 애플리케이션의 데이터는 마이그레이션되지 않는다는 점에 유의하십시오.

![20250102202546](https://static-docs.nocobase.com/20250102202546.png)

## 마이그레이션 규칙

### 내장 규칙

마이그레이션 관리자는 주 데이터베이스의 모든 테이블을 마이그레이션할 수 있으며, 현재 다음 다섯 가지 내장 규칙을 지원합니다.

- **스키마만**: 테이블 구조(스키마)만 마이그레이션하며, 데이터 삽입 또는 업데이트는 포함되지 않습니다.
- **덮어쓰기 (비우고 다시 삽입)**: 대상 데이터베이스 테이블의 기존 모든 레코드를 삭제한 다음, 새 데이터를 삽입합니다.
- **업서트 (삽입 또는 업데이트)**: 각 레코드가 존재하는지(기본 키 기준) 확인합니다. 존재하면 해당 레코드를 업데이트하고, 존재하지 않으면 삽입합니다.
- **삽입 무시**: 새 레코드를 삽입하지만, 레코드가 이미 존재하는 경우(기본 키 기준) 삽입을 무시합니다(업데이트는 발생하지 않음).
- **건너뛰기**: 해당 테이블에 대한 처리를 완전히 건너뜁니다(구조 변경 없음, 데이터 마이그레이션 없음).

추가 참고 사항:

- "덮어쓰기", "업서트", "삽입 무시" 규칙은 모두 테이블 구조 변경도 동기화합니다.
- 테이블이 기본 키로 자동 증가 ID를 사용하거나 기본 키가 없는 경우, "업서트" 또는 "삽입 무시" 규칙을 적용할 수 없습니다.
- "업서트" 및 "삽입 무시" 규칙은 레코드의 존재 여부를 판단하기 위해 기본 키에 의존합니다.

### 상세 설계

![20250102204909](https://static-docs.nocobase.com/20250102204909.png)

### 설정 인터페이스

마이그레이션 규칙 설정

![20250102205450](https://static-docs.nocobase.com/20250102205450.png)

독립 규칙 활성화

![20250107105005](https://static-docs.nocobase.com/20250107105005.png)

독립 규칙 및 현재 독립 규칙에 따라 처리될 테이블 선택

![20250107104644](https://static-docs.nocobase.com/20250107104644.png)

## 마이그레이션 파일

![20250102205844](https://static-docs.nocobase.com/20250102205844.png)

### 새 마이그레이션 생성

![20250102205857](https://static-docs.nocobase.com/20250102205857.png)

### 마이그레이션 실행

![20250102205915](https://static-docs.nocobase.com/20250102205915.png)

애플리케이션 환경 변수 확인 ([환경 변수](#)에 대해 자세히 알아보세요)

![20250102212311](https://static-docs.nocobase.com/20250102212311.png)

누락된 환경 변수가 있는 경우, 팝업 창이 나타나 사용자에게 필요한 새 환경 변수를 여기에 입력하고 계속 진행하도록 안내합니다.

![20250102210009](https://static-docs.nocobase.com/20250102210009.png)

## 마이그레이션 로그

![20250102205738](https://static-docs.nocobase.com/20250102205738.png)

## 롤백

마이그레이션이 실행되기 전에 현재 애플리케이션은 자동으로 백업됩니다. 마이그레이션이 실패하거나 예상과 다른 결과가 발생하면, [백업 관리자](../backup-manager/index.mdx)를 사용하여 롤백 및 복구할 수 있습니다.

![20250105195029](https://static-docs.nocobase.com/20250105195029.png)