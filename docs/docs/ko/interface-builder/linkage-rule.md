:::tip
이 문서는 AI로 번역되었습니다. 부정확한 내용이 있을 경우 [영어 버전](/en)을 참조하세요
:::

# 연동 규칙

## 소개

NocoBase에서 연동 규칙은 프런트엔드 UI 요소의 상호작용 방식을 제어하는 메커니즘입니다. 이를 통해 사용자는 다양한 조건에 따라 UI 내 블록, 필드, 액션의 표시 및 동작 로직을 조정하여 유연하고 로우코드 방식의 상호작용 경험을 구현할 수 있습니다. 이 기능은 지속적으로 개선 및 최적화되고 있습니다.

연동 규칙을 설정하여 다음과 같은 기능을 구현할 수 있습니다:

- 현재 사용자 역할에 따라 특정 블록을 숨기거나 표시합니다. 예를 들어, 관리자는 전체 정보 블록을 볼 수 있지만, 일반 사용자는 기본 정보 블록만 볼 수 있도록 역할별로 다른 데이터 범위의 블록을 표시할 수 있습니다.
- 폼에서 특정 옵션을 선택하면 다른 필드 값을 자동으로 채우거나 초기화합니다.
- 폼에서 특정 옵션을 선택하면 일부 입력 항목을 비활성화합니다.
- 폼에서 특정 옵션을 선택하면 일부 입력 항목을 필수로 설정합니다.
- 특정 조건에서 액션 버튼의 표시 여부 또는 클릭 가능 여부를 제어합니다.

## 조건 설정

![20251029114532](https://static-docs.nocobase.com/20251029114532.png)

### 좌측 변수

조건의 좌측 변수는 연동 규칙에서 "판단의 대상"을 정의하는 데 사용됩니다. 이 변수의 값을 기반으로 조건이 평가되며, 연동 동작을 트리거할지 여부를 결정합니다.

선택 가능한 변수는 다음과 같습니다:

- `「현재 폼/xxx」`, `「현재 레코드/xxx」`, `「현재 팝업 레코드/xxx」` 등 컨텍스트 내의 필드
- `현재 사용자`, `현재 역할` 등 시스템 전역 변수. 이는 사용자 신원, 권한 등의 정보에 기반한 동적 제어에 적합합니다.
  > ✅ 좌측 변수의 선택 가능한 옵션은 블록이 위치한 컨텍스트에 따라 결정됩니다. 비즈니스 요구사항에 맞춰 좌측 변수를 적절하게 사용하십시오:
  >
  > - `「현재 사용자」`는 현재 로그인된 사용자의 정보를 나타냅니다.
  > - `「현재 폼」`은 폼에 실시간으로 입력되는 값을 나타냅니다.
  > - `「현재 레코드」`는 테이블의 행 레코드와 같이 저장된 레코드 값을 나타냅니다.

### 연산자

연산자는 조건 판단의 로직, 즉 좌측 변수와 우측 값을 어떻게 비교할지 설정하는 데 사용됩니다. 좌측 변수의 유형에 따라 지원되는 연산자가 다르며, 일반적인 유형의 연산자는 다음과 같습니다:

- **텍스트 유형**: `$includes`, `$eq`, `$ne`, `$empty`, `$notEmpty` 등
- **숫자 유형**: `$eq`, `$gt`, `$lt`, `$gte`, `$lte` 등
- **불리언 유형**: `$isTruly`, `$isFalsy`
- **배열 유형**: `$match`, `$anyOf`, `$empty`, `$notEmpty` 등

> ✅ 시스템은 좌측 변수의 유형에 따라 사용 가능한 연산자 목록을 자동으로 추천하여 설정 로직의 합리성을 보장합니다.

### 우측 값

좌측 변수와 비교하는 데 사용되며, 조건 충족 여부를 판단하는 참조 값입니다.

지원되는 내용은 다음과 같습니다:

- 상수 값: 고정된 숫자, 텍스트, 날짜 등을 입력합니다.
- 컨텍스트 변수: 현재 폼의 다른 필드, 현재 레코드 등
- 시스템 변수: 현재 사용자, 현재 시간, 현재 역할 등

> ✅ 시스템은 좌측 변수의 유형에 따라 우측의 입력 방식을 자동으로 조정합니다. 예를 들어:
>
> - 좌측이 "옵션 필드"인 경우, 해당 옵션 선택기가 표시됩니다.
> - 좌측이 "날짜 필드"인 경우, 날짜 선택기가 표시됩니다.
> - 좌측이 "텍스트 필드"인 경우, 텍스트 입력 상자가 표시됩니다.

> 💡 우측 값(특히 동적 변수)을 유연하게 사용하면 현재 사용자, 현재 데이터 상태, 컨텍스트 환경을 기반으로 연동 로직을 구축하여 더욱 강력한 상호작용 경험을 구현할 수 있습니다.

## 규칙 실행 로직

### 조건 트리거

규칙의 조건이 충족되면(필수 아님) 아래의 속성 수정 작업이 자동으로 실행됩니다. 조건을 설정하지 않은 경우, 규칙은 항상 충족되는 것으로 간주되어 속성 수정 작업이 자동으로 실행됩니다.

### 여러 규칙

하나의 폼에 여러 연동 규칙을 설정할 수 있습니다. 여러 규칙의 조건이 동시에 충족되면, 시스템은 규칙의 우선순위에 따라 앞에서부터 뒤로 결과를 실행하며, 마지막 결과가 최종 실행 기준으로 적용됩니다.
예시: 규칙 1이 필드를 "비활성화"로 설정하고, 규칙 2가 필드를 "편집 가능"으로 설정했을 때, 두 규칙의 조건이 모두 충족되면 필드는 "편집 가능" 상태가 됩니다.

> 여러 규칙의 실행 순서는 매우 중요합니다. 규칙을 설계할 때 규칙 충돌을 피하기 위해 우선순위와 상호 관계를 명확히 이해해야 합니다.

## 규칙 관리

각 규칙에 대해 다음과 같은 작업을 수행할 수 있습니다:

- 사용자 정의 이름 지정: 규칙을 관리하고 식별하기 쉽도록 이해하기 쉬운 이름을 설정합니다.
- 정렬: 규칙 실행 우선순위에 따라 순서를 조정하여 시스템이 올바른 순서로 규칙을 처리하도록 합니다.
- 삭제: 더 이상 필요 없는 규칙을 삭제합니다.
- 활성화/비활성화: 규칙을 삭제하지 않고 일시적으로 비활성화합니다. 특정 상황에서 규칙을 일시적으로 중단해야 하는 경우에 유용합니다.
- 규칙 복사: 기존 규칙을 복사하여 새 규칙을 생성함으로써 반복적인 설정을 피할 수 있습니다.

## 변수에 대하여

필드 값 할당 및 조건 설정에서 상수뿐만 아니라 변수 사용도 지원됩니다. 변수 목록은 블록 위치에 따라 달라지므로, 비즈니스 요구사항에 맞춰 변수를 적절하게 선택하고 사용하면 더욱 유연하게 대응할 수 있습니다. 변수에 대한 더 자세한 정보는 [변수](/interface-builder/variables)를 참조하십시오.

## 블록 연동 규칙

블록 연동 규칙은 시스템 변수(예: 현재 사용자, 역할) 또는 컨텍스트 변수(예: 현재 팝업 레코드)에 따라 블록의 표시를 동적으로 제어할 수 있도록 합니다. 예를 들어, 관리자는 전체 주문 정보를 볼 수 있지만, 고객 서비스 역할은 특정 주문 데이터만 볼 수 있습니다. 블록 연동 규칙을 통해 역할에 따라 해당 블록을 구성하고, 블록 내에서 다양한 필드, 액션 버튼 및 데이터 범위를 설정할 수 있습니다. 로그인한 역할이 대상 역할일 때 시스템은 해당 블록을 표시합니다. 블록은 기본적으로 표시되므로, 일반적으로 블록을 숨기는 로직을 정의해야 한다는 점에 유의해야 합니다.

👉 자세한 내용은 다음을 참조하십시오: [블록/블록 연동 규칙](/interface-builder/blocks/block-settings/block-linkage-rule)

## 필드 연동 규칙

필드 연동 규칙은 사용자 작업에 따라 폼 또는 상세 블록 내 필드의 상태를 동적으로 조정하는 데 사용되며, 주로 다음을 포함합니다:

- 필드의 **표시/숨김** 제어
- 필드 **필수 여부** 설정
- **값 할당**
- 사용자 정의 비즈니스 로직 처리를 위한 JavaScript 실행

👉 자세한 내용은 다음을 참조하십시오: [블록/필드 연동 규칙](/interface-builder/blocks/block-settings/field-linkage-rule)

## 액션 연동 규칙

액션 연동 규칙은 현재 레코드 값, 현재 폼과 같은 컨텍스트 변수 및 전역 변수를 기반으로 액션 동작(예: 숨기기/비활성화)을 제어하는 것을 지원합니다.

👉 자세한 내용은 다음을 참조하십시오: [액션/연동 규칙](/interface-builder/actions/action-settings/linkage-rule)