---
pkg: "@nocobase/plugin-field-sort"
---
:::tip
이 문서는 AI로 번역되었습니다. 부정확한 내용이 있을 경우 [영어 버전](/en)을 참조하세요
:::


# 정렬 필드

## 소개

정렬 필드는 컬렉션의 레코드를 정렬하는 데 사용되며, 그룹별 정렬을 지원합니다.

:::warning
정렬 필드는 동일한 컬렉션 필드이므로, 그룹 정렬을 사용할 때 하나의 레코드가 여러 그룹에 할당될 수 없습니다.
:::

## 설치

내장 플러그인이므로 별도로 설치할 필요가 없습니다.

## 사용자 매뉴얼

### 정렬 필드 생성

![20240409091123_rec_](https://static-docs.nocobase.com/20240409091123_rec_.gif)

정렬 필드를 생성할 때 정렬 값이 초기화됩니다.

- 그룹 정렬을 선택하지 않은 경우, 기본 키 필드와 생성일 필드를 기준으로 초기화됩니다.
- 그룹 정렬을 선택한 경우, 먼저 데이터를 그룹화한 다음 기본 키 필드와 생성일 필드를 기준으로 초기화됩니다.

:::warning{title="트랜잭션 일관성 설명"}
- 필드 생성 시, 정렬 값 초기화에 실패하면 정렬 필드가 생성되지 않습니다.
- 특정 범위 내에서 레코드가 A 위치에서 B 위치로 이동할 때, A와 B 사이의 모든 레코드의 정렬 값이 변경됩니다. 이 업데이트 중 하나라도 실패하면 이동 작업 전체가 롤백되며, 관련 레코드의 정렬 값은 변경되지 않습니다.
:::

#### 예시 1: sort1 필드 생성

sort1 필드는 그룹화되지 않습니다.

![20240409091510](https://static-docs.nocobase.com/20240409091510.png)

각 레코드의 정렬 필드는 기본 키 필드와 생성일 필드를 기준으로 초기화됩니다.

![20240409092305](https://static-docs.nocobase.com/20240409092305.png)

#### 예시 2: Class ID를 기준으로 그룹화된 sort2 필드 생성

![20240409092620](https://static-docs.nocobase.com/20240409092620.png)

이때 컬렉션의 모든 레코드가 먼저 그룹화된 다음(Class ID 기준 그룹화), 정렬 필드(sort2)가 초기화됩니다. 각 레코드의 초기 값은 다음과 같습니다.

![20240409092847](https://static-docs.nocobase.com/20240409092847.png)

### 드래그 앤 드롭 정렬

정렬 필드는 주로 다양한 블록의 레코드를 드래그 앤 드롭으로 정렬하는 데 사용됩니다. 현재 드래그 앤 드롭 정렬을 지원하는 블록은 테이블과 칸반입니다.

:::warning
- 동일한 정렬 필드를 드래그 앤 드롭 정렬에 사용할 때, 여러 블록에서 혼용하면 기존 정렬이 손상될 수 있습니다.
- 테이블 드래그 앤 드롭 정렬 필드는 그룹화 규칙이 있는 정렬 필드를 선택할 수 없습니다.
  - 예외: 일대다 관계 테이블 블록에서는 외래 키를 그룹으로 사용할 수 있습니다.
- 현재 칸반 블록만 그룹별 드래그 앤 드롭 정렬을 지원합니다.
:::

#### 테이블 행 드래그 앤 드롭 정렬

테이블 블록

![20240409104621_rec_](https://static-docs.nocobase.com/20240409104621_rec_.gif)

관계 테이블 블록

<video controls width="100%" src="https://static-docs.nocobase.com/20240409111903_rec_.mp4" title="Title"></video>

:::warning
일대다 관계 블록에서:

- 그룹화되지 않은 정렬 필드를 선택하면 모든 레코드가 정렬에 참여할 수 있습니다.
- 외래 키를 기준으로 먼저 그룹화한 다음 정렬하면, 정렬 규칙은 현재 그룹 내의 데이터에만 영향을 미칩니다.

최종 결과는 동일하지만, 정렬에 참여하는 레코드 수는 다릅니다. 자세한 내용은 [정렬 규칙 설명](#sorting-rule-explanation)을 참조하십시오.
:::

#### 칸반 카드 드래그 앤 드롭 정렬

![20240409110423_rec_](https://static-docs.nocobase.com/20240409110423_rec_.gif)

### 정렬 규칙 설명

#### 그룹화되지 않은(또는 동일 그룹) 요소 간의 이동

다음과 같은 데이터 세트가 있다고 가정해 보겠습니다.

```
[1,2,3,4,5,6,7,8,9]
```

예를 들어, 요소 5가 3의 위치로 앞으로 이동하면, 3, 4, 5의 위치만 변경됩니다. 5는 3의 위치를 차지하고, 3과 4는 각각 한 칸씩 뒤로 이동합니다.

```
[1,2,5,3,4,6,7,8,9]
```

이어서 6을 8의 위치로 뒤로 이동하면, 6은 8의 위치를 차지하고, 7과 8은 각각 한 칸씩 앞으로 이동합니다.

```
[1,2,5,3,4,7,8,6,9]
```

#### 다른 그룹 간 요소 이동

그룹 정렬 시, 특정 레코드가 다른 그룹으로 이동하면 해당 레코드가 속한 그룹도 변경됩니다. 예시는 다음과 같습니다.

```
A: [1,2,3,4]
B: [5,6,7,8]
```

1이 6 뒤로 이동하면(기본 동작), 1이 속한 그룹도 A에서 B로 변경됩니다.

```
A: [2,3,4]
B: [5,6,1,7,8]
```

#### 정렬 변경은 인터페이스에 표시되는 데이터와 무관합니다.

예를 들어, 다음과 같은 데이터 세트가 있습니다.

```
[1,2,3,4,5,6,7,8,9]
```

인터페이스에는 다음만 표시됩니다.

```
[1,5,9]
```

1이 9의 위치로 이동하면, 중간에 있는 2, 3, 4, 5, 6, 7, 8 데이터의 위치도 모두 변경됩니다.

```
[2,3,4,5,6,7,8,9,1]
```

인터페이스 표시:

```
[5,9,1]
```