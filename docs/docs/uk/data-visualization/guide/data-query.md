:::tip Повідомлення про переклад ШІ
Ця документація була автоматично перекладена штучним інтелектом.
:::


# Запит даних

Панель конфігурації діаграми загалом поділяється на три частини: Запит даних, Опції діаграми та Події взаємодії, а також кнопки Скасувати, Попередній перегляд і Зберегти внизу.

Спершу розгляньмо панель "Запит даних", щоб зрозуміти два режими запитів (Builder/SQL) та їхні поширені функції.

## Структура панелі
![clipboard-image-1761466636](https://static-docs.nocobase.com/clipboard-image-1761466636.png)

> Порада: Щоб зручніше налаштовувати поточний вміст, можете спочатку згорнути інші панелі.

Угорі розташована панель дій:
- Режим: Builder (графічний, простий та зручний) / SQL (ручне написання запитів, гнучкіший).
- Виконати запит: Натисніть, щоб виконати запит даних.
- Переглянути результат: Відкриває панель результатів даних, де ви можете перемикатися між режимами перегляду Table/JSON. Натисніть ще раз, щоб згорнути панель.

Зверху донизу:
- Джерело даних та колекція: Обов'язково. Виберіть джерело даних та колекцію.
- Міри (Measures): Обов'язково. Числові поля, які потрібно відобразити.
- Виміри (Dimensions): Групування за полями (наприклад, дата, категорія, регіон).
- Фільтр: Встановіть умови фільтрації (наприклад, =, ≠, >, <, містить, діапазон). Кілька умов можна комбінувати.
- Сортування: Виберіть поле для сортування та порядок (за зростанням/спаданням).
- Пагінація: Контролює діапазон даних та порядок повернення.

## Режим Builder

### Вибір джерела даних та колекції
- На панелі "Запит даних" виберіть режим "Builder".
- Виберіть джерело даних та колекцію (таблицю даних). Якщо колекція недоступна для вибору або порожня, спочатку перевірте дозволи та чи була вона створена.

### Налаштування мір (Measures)
- Виберіть одне або кілька числових полів і встановіть агрегацію: `Sum`, `Count`, `Avg`, `Max`, `Min`.
- Поширені сценарії використання: `Count` для підрахунку записів, `Sum` для обчислення загальної суми.

### Налаштування вимірів (Dimensions)
- Виберіть одне або кілька полів як виміри для групування.
- Поля дати та часу можна форматувати (наприклад, `YYYY-MM`, `YYYY-MM-DD`) для зручного групування за місяцями чи днями.

### Фільтрація, сортування та пагінація
- Фільтр: Додайте умови (наприклад, =, ≠, містить, діапазон). Кілька умов можна комбінувати.
- Сортування: Виберіть поле та порядок сортування (за зростанням/спаданням).
- Пагінація: Встановіть `Limit` та `Offset` для контролю кількості повернених рядків. Під час налагодження рекомендується встановлювати невелике значення `Limit`.

### Виконання запиту та перегляд результату
- Натисніть "Виконати запит", щоб запустити його. Після повернення результату перейдіть до "Переглянути дані" та перемикайтеся між `Table / JSON`, щоб перевірити стовпці та значення.
- Перед відображенням полів діаграми, спершу підтвердіть назви та типи стовпців тут, щоб уникнути порожньої діаграми або помилок пізніше.

![20251026174338](https://static-docs.nocobase.com/20251026174338.png)

### Подальше відображення полів

Пізніше, під час налаштування "Опцій діаграми", ви будете відображати поля на основі полів таблиці з обраного джерела даних та колекції.

## Режим SQL

### Написання запиту
- Перейдіть у режим "SQL", введіть ваш запит і натисніть "Виконати запит".
- Приклад (загальна сума замовлень за датою):
```sql
SELECT 
  TO_CHAR(order_date, 'YYYY-MM') as mon,
  SUM(total_amount) AS total
FROM "order"
GROUP BY mon
ORDER BY mon ASC
LIMIT 100;
```

![20251026175952](https://static-docs.nocobase.com/20251026175952.png)

### Виконання запиту та перегляд результату

- Натисніть "Виконати запит", щоб запустити його. Після повернення результату перейдіть до "Переглянути дані" та перемикайтеся між `Table / JSON`, щоб перевірити стовпці та значення.
- Перед відображенням полів діаграми, спершу підтвердіть назви та типи стовпців тут, щоб уникнути порожньої діаграми або помилок пізніше.

### Подальше відображення полів

Пізніше, під час налаштування "Опцій діаграми", ви будете відображати поля на основі стовпців з результату запиту.

> [!TIP]
> Для отримання додаткової інформації про режим SQL, будь ласка, зверніться до розділу Розширене використання — Запит даних у режимі SQL.