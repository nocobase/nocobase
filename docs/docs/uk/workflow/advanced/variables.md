:::tip Повідомлення про переклад ШІ
Ця документація була автоматично перекладена штучним інтелектом.
:::


# Використання змінних

## Основні концепції

Як і змінні в мовах програмування, **змінні** в робочому процесі є важливим інструментом для з'єднання та організації процесів.

Коли кожен вузол виконується після запуску робочого процесу, деякі параметри конфігурації можуть використовувати змінні. Джерелом цих змінних є дані з попередніх вузлів поточного вузла, і вони включають такі категорії:

- Дані контексту тригера: У випадках, таких як тригери дій або тригери колекцій, об'єкт даних одного рядка може використовуватися як змінна всіма вузлами. Деталі можуть відрізнятися залежно від реалізації кожного тригера.
- Дані попередніх вузлів: Коли процес досягає будь-якого вузла, це дані результатів раніше виконаних вузлів.
- Локальні змінні: Коли вузол знаходиться в певних спеціальних розгалужених структурах, він може використовувати специфічні локальні змінні в межах цієї гілки. Наприклад, у циклічній структурі можна використовувати об'єкт даних кожної ітерації.
- Системні змінні: Деякі вбудовані системні параметри, такі як поточний час.

Ми вже неодноразово використовували функцію змінних у розділі [Швидкий старт](../getting-started.md). Наприклад, у вузлі обчислення ми можемо використовувати змінні для посилання на дані контексту тригера для виконання розрахунків:

![Вузол обчислення, що використовує функції та змінні](https://static-docs.nocobase.com/837e4851a4c70a1932542caadef3431b.png)

У вузлі оновлення використовуйте дані контексту тригера як змінну для умови фільтрації та посилайтеся на результат вузла обчислення як змінну для значення поля, що оновлюється:

![Змінні вузла оновлення даних](https://static-docs.nocobase.com/2e147c93643e7ebc709b9b7ab4f3af8c.png)

## Структура даних

Змінна внутрішньо є JSON-структурою, і зазвичай ви можете використовувати певну частину даних за її JSON-шляхом. Оскільки багато змінних базуються на структурі колекцій NocoBase, дані асоціацій будуть ієрархічно структуровані як властивості об'єктів, утворюючи деревоподібну структуру. Наприклад, ми можемо вибрати значення певного поля з даних асоціації запитаних даних. Крім того, коли дані асоціації мають структуру "один до багатьох", змінна може бути масивом.

При виборі змінної найчастіше потрібно буде вибрати атрибут значення останнього рівня, який зазвичай є простим типом даних, таким як число або рядок. Однак, коли в ієрархії змінної є масив, атрибут останнього рівня також буде відображений як масив. Правильно обробляти дані масиву можна лише в тому випадку, якщо відповідний вузол підтримує масиви. Наприклад, у вузлі обчислення деякі обчислювальні механізми мають функції спеціально для обробки масивів. Інший приклад – у вузлі циклу, де об'єкт циклу також може бути масивом.

Наприклад, коли вузол запиту запитує кілька фрагментів даних, результатом вузла буде масив, що містить кілька рядків однорідних даних:

```json
[
  {
    "id": 1,
    "title": "Заголовок 1"
  },
  {
    "id": 2,
    "title": "Заголовок 2"
  }
]
```

Однак, при використанні цього як змінної в наступних вузлах, якщо вибрана змінна має вигляд `Дані вузла/Вузол запиту/Заголовок`, ви отримаєте масив, відображений на відповідні значення полів:

```json
["Заголовок 1", "Заголовок 2"]
```

Якщо це багатовимірний масив (наприклад, поле зв'язку "багато до багатьох"), ви отримаєте одновимірний масив з відповідним полем, що було "вирівняно".

## Вбудовані системні змінні

### Системний час

Отримує системний час на момент виконання вузла. Часовий пояс цього часу відповідає часовому поясу, встановленому на сервері.

### Параметри діапазону дат

Можна використовувати при налаштуванні умов фільтрації полів дати у вузлах запиту, оновлення та видалення. Підтримується лише для порівнянь "дорівнює". Початкова та кінцева точки діапазону дат базуються на часовому поясі, встановленому на сервері.

![Параметри діапазону дат](https://static-docs.nocobase.com/20240817175354.png)