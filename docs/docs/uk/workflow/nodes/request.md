---
pkg: '@nocobase/plugin-workflow-request'
---
:::tip Повідомлення про переклад ШІ
Ця документація була автоматично перекладена штучним інтелектом.
:::

# HTTP Запит

## Вступ

Коли вам потрібно взаємодіяти з іншою веб-системою, ви можете використовувати вузол HTTP Запит. Під час виконання цей вузол надсилає HTTP-запит на вказану адресу відповідно до своїх налаштувань. Він може передавати дані у форматі JSON або `application/x-www-form-urlencoded` для взаємодії із зовнішніми системами.

Якщо ви знайомі з такими інструментами для надсилання запитів, як Postman, то швидко освоїте використання вузла HTTP Запит. На відміну від цих інструментів, усі параметри у вузлі HTTP Запит можуть використовувати контекстні змінні поточного робочого процесу, що дозволяє органічно інтегрувати їх з бізнес-процесами системи.

## Встановлення

Це вбудований плагін, тому встановлення не потрібне.

## Створення вузла

В інтерфейсі налаштування робочого процесу натисніть кнопку плюса («+») у процесі, щоб додати вузол «HTTP Запит»:

![HTTP Запит_Додати](https://static-docs.nocobase.com/46f2a6fc3f6869c80f8fbd362a54e644.png)

## Налаштування вузла

![HTTP Запит_Налаштування вузла](https://static-docs.nocobase.com/2fcb29af66d869c80f8fbd362a54e644.png)

### Метод запиту

Доступні методи HTTP-запитів: `GET`, `POST`, `PUT`, `PATCH` та `DELETE`.

### URL-адреса запиту

URL-адреса HTTP-сервісу, яка повинна містити частину протоколу (`http://` або `https://`). Рекомендується використовувати `https://`.

### Формат даних запиту

Це `Content-Type` у заголовку запиту. Підтримувані формати дивіться у розділі «[Тіло запиту](#тіло-запиту)».

### Налаштування заголовків запиту

Пари ключ-значення для розділу заголовків запиту. Значення можуть використовувати змінні з контексту робочого процесу.

:::info{title=Порада}
Заголовок запиту `Content-Type` налаштовується через формат даних запиту. Його не потрібно заповнювати тут, і будь-яке перевизначення буде неефективним.
:::

### Параметри запиту

Пари ключ-значення для розділу параметрів запиту (query). Значення можуть використовувати змінні з контексту робочого процесу.

### Тіло запиту

Частина Body запиту. Підтримуються різні формати залежно від обраного `Content-Type`.

#### `application/json`

Підтримує текст у стандартному форматі JSON. Ви можете вставляти змінні з контексту робочого процесу за допомогою кнопки змінних у верхньому правому куті текстового редактора.

:::info{title=Порада}
Змінні повинні використовуватися всередині рядка JSON, наприклад: `{ "a": "{{$context.data.a}}" }`.
:::

#### `application/x-www-form-urlencoded`

Формат пар ключ-значення. Значення можуть використовувати змінні з контексту робочого процесу. Коли змінні включені, вони будуть розпарсені як шаблон рядка та об'єднані в кінцеве строкове значення.

#### `application/xml`

Підтримує текст у стандартному форматі XML. Ви можете вставляти змінні з контексту робочого процесу за допомогою кнопки змінних у верхньому правому куті текстового редактора.

#### `multipart/form-data` <Badge>v1.8.0+</Badge>

Підтримує пари ключ-значення для даних форми. Файли можна завантажувати, коли тип даних встановлено як об'єкт файлу. Файли можна вибирати лише через змінні з існуючих об'єктів файлів у контексті, наприклад, результати запиту до колекції файлів або пов'язані дані з асоційованої колекції файлів.

:::info{title=Порада}
При виборі файлових даних переконайтеся, що змінна відповідає одному об'єкту файлу, а не списку файлів (у запиті зв'язку «один-до-багатьох» або «багато-до-багатьох» значення поля зв'язку буде масивом).
:::

### Налаштування тайм-ауту

Якщо запит довго не відповідає, налаштування тайм-ауту можна використовувати для скасування його виконання. Якщо запит перевищить час очікування, поточний робочий процес буде достроково завершено зі статусом помилки.

### Ігнорувати помилки

Вузол запиту вважає успішними стандартні HTTP-статуси від `200` до `299` (включно), а всі інші — невдалими. Якщо встановлено прапорець «Ігнорувати невдалі запити та продовжувати робочий процес», то наступні вузли робочого процесу продовжать виконуватися, навіть якщо запит завершиться невдачею.

## Використання результату відповіді

Результат відповіді HTTP-запиту може бути розпарсений вузлом [JSON Запит](./json-query.md) для використання в наступних вузлах.

Починаючи з версії `v1.0.0-alpha.16`, три частини результату відповіді вузла запиту можуть використовуватися як окремі змінні:

*   Код стану відповіді
*   Заголовки відповіді
*   Дані відповіді

![HTTP Запит_Використання результату відповіді](https://static-docs.nocobase.com/20240529110610.png)

Код стану відповіді зазвичай є стандартним HTTP-статусом у числовому форматі, наприклад `200`, `403` тощо (надається постачальником послуг).

Заголовки відповіді (Response headers) мають формат JSON. Як заголовки, так і дані відповіді у форматі JSON все ще потребують парсингу за допомогою вузла JSON перед використанням.

## Приклад

Наприклад, ми можемо використовувати вузол запиту для підключення до хмарної платформи для надсилання SMS-повідомлень. Налаштування для API надсилання SMS від Alibaba Cloud може виглядати так (вам потрібно буде звернутися до документації конкретного API, щоб адаптувати параметри):

![HTTP Запит_Налаштування вузла](https://static-docs.nocobase.com/20240515124004.png)

Коли робочий процес запускає цей вузол, він викликає API SMS від Alibaba Cloud із налаштованим вмістом. Якщо запит успішний, SMS буде надіслано через хмарний SMS-сервіс.