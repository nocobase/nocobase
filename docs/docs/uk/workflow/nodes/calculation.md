:::tip Повідомлення про переклад ШІ
Ця документація була автоматично перекладена штучним інтелектом.
:::


# Обчислення

Вузол обчислення дозволяє оцінювати вирази. Результат обчислення зберігається у відповідному вузлі, щоб його могли використовувати наступні вузли. Це інструмент для обчислення, обробки та перетворення даних, який певною мірою може замінити функціонал виклику функції та присвоєння її результату змінній у мовах програмування.

## Створення вузла

В інтерфейсі налаштування робочого процесу натисніть кнопку плюса («+»), щоб додати вузол «Обчислення»:

![Вузол обчислення_Додати](https://static-docs.nocobase.com/58a426945251cd143eb4b16579.png)

## Налаштування вузла

![Вузол обчислення_Налаштування](https://static-docs.nocobase.com/6a155de3883d8cd1881b2d9c33874.png)

### Рушій обчислень

Рушій обчислень визначає синтаксис, який підтримується для виразів. Наразі підтримуються рушії обчислень [Math.js](https://mathjs.org/) та [Formula.js](https://formulajs.info/). Кожен рушій має велику кількість вбудованих загальних функцій та методів для операцій з даними. Детальну інформацію про використання можна знайти в їхній офіційній документації.

:::info{title=Порада}
Зверніть увагу, що різні рушії мають відмінності у доступі до індексів масивів. Індекси Math.js починаються з `1`, тоді як Formula.js — з `0`.
:::

Якщо ж вам потрібне просте об'єднання рядків, ви можете безпосередньо скористатися «Рядковим шаблоном». Цей рушій замінить змінні у виразі на їхні відповідні значення, а потім поверне об'єднаний рядок.

### Вираз

Вираз — це рядкове представлення формули обчислення, яке може складатися зі змінних, констант, операторів та підтримуваних функцій. Ви можете використовувати змінні з контексту робочого процесу, наприклад, результат попереднього вузла обчислення або локальні змінні циклу.

Якщо введений вираз не відповідає синтаксису, в налаштуваннях вузла буде видано помилку. Якщо під час виконання змінна не існує, або тип не відповідає, або використано неіснуючу функцію, вузол обчислення достроково завершить роботу зі статусом помилки.

## Приклад

### Обчислення загальної вартості замовлення

Зазвичай замовлення може містити кілька товарів, і кожен товар має різну ціну та кількість. Загальна вартість замовлення має бути сумою добутків ціни та кількості всіх товарів. Після завантаження списку деталей замовлення (набір даних зі зв'язком «один-до-багатьох») ви можете використовувати вузол обчислення для розрахунку загальної вартості замовлення:

![Вузол обчислення_Приклад_Налаштування](https://static-docs.nocobase.com/85966b0116afb49aa966eeaa85e78dae.png)

Тут функція `SUMPRODUCT` з Formula.js може обчислити суму добутків для двох масивів однакової довжини, що дає загальну вартість замовлення.