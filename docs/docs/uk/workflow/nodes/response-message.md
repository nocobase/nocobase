---
pkg: '@nocobase/plugin-workflow-response-message'
---
:::tip Повідомлення про переклад ШІ
Ця документація була автоматично перекладена штучним інтелектом.
:::

# Повідомлення-відповідь

## Вступ

Вузол повідомлення-відповіді дозволяє надсилати користувацькі повідомлення з робочого процесу клієнту, який ініціював дію, у певних типах робочих процесів.

:::info{title=Примітка}
Наразі його підтримується використовувати в синхронному режимі для робочих процесів типу «Подія перед дією» та «Подія користувацької дії».
:::

## Створення вузла

У підтримуваних типах робочих процесів ви можете додати вузол «Повідомлення-відповідь» у будь-якому місці робочого процесу. Для цього натисніть кнопку плюс («+») у робочому процесі:

![Додавання вузла](https://static-docs.nocobase.com/eac2b3565e95e4ce59f340624062ed3d.png)

Повідомлення-відповідь існує у вигляді масиву протягом усього процесу запиту. Щоразу, коли в робочому процесі виконується вузол повідомлення-відповіді, новий вміст повідомлення додається до цього масиву. Коли сервер надсилає відповідь, усі повідомлення відправляються клієнту разом.

## Конфігурація вузла

Вміст повідомлення — це шаблонний рядок, куди можна вставляти змінні. Ви можете довільно організувати цей шаблонний вміст у конфігурації вузла:

![Конфігурація вузла](https://static-docs.nocobase.com/d5fa5f4002d50baf3ba16048818fddfc.png)

Коли робочий процес досягає цього вузла, шаблон буде проаналізовано для генерації вмісту повідомлення. У наведеній вище конфігурації змінна «Локальна змінна / Перебрати всі продукти / Об'єкт циклу / Продукт / Заголовок» буде замінена на певне значення в реальному робочому процесі, наприклад:

```
Продукт "iPhone 14 pro" відсутній на складі
```

![Вміст повідомлення](https://static-docs.nocobase.com/06bd4a6b6ec499c853f0c39987f63a6a.png)

## Конфігурація робочого процесу

Статус повідомлення-відповіді залежить від успішного чи невдалого виконання робочого процесу. Невдача виконання будь-якого вузла призведе до збою всього робочого процесу. У такому випадку вміст повідомлення буде повернуто клієнту зі статусом невдачі та відображено.

Якщо вам потрібно активно визначити стан невдачі в робочому процесі, ви можете використати «Кінцевий вузол» і налаштувати його на стан невдачі. При виконанні цього вузла робочий процес завершиться зі статусом невдачі, а повідомлення буде повернуто клієнту зі статусом невдачі.

Якщо весь робочий процес не призвів до стану невдачі та успішно завершився, вміст повідомлення буде повернуто клієнту зі статусом успіху.

:::info{title=Примітка}
Якщо в робочому процесі визначено кілька вузлів повідомлення-відповіді, виконані вузли додаватимуть вміст повідомлення до масиву. При остаточному поверненні клієнту весь вміст повідомлень буде повернуто та відображено разом.
:::

## Сценарії використання

### Робочий процес «Подія перед дією»

Використання повідомлення-відповіді в робочому процесі «Подія перед дією» дозволяє надсилати відповідний зворотний зв'язок клієнту після завершення робочого процесу. Детальніше дивіться у розділі [Подія перед дією](../triggers/pre-action.md).

### Робочий процес «Подія користувацької дії»

Використання повідомлення-відповіді в синхронному режимі «Події користувацької дії» дозволяє надсилати відповідний зворотний зв'язок клієнту після завершення робочого процесу. Детальніше дивіться у розділі [Подія користувацької дії](../triggers/custom-action.md).