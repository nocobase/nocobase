:::tip Повідомлення про переклад ШІ
Ця документація була автоматично перекладена штучним інтелектом.
:::


# Багатоумовне розгалуження <Badge>v2.0.0+</Badge>

## Вступ

Цей вузол схожий на оператори `switch / case` або `if / else if` у мовах програмування. Система послідовно оцінює налаштовані умови. Щойно умова виконується, робочий процес виконує відповідну гілку та пропускає подальші перевірки умов. Якщо жодна умова не виконується, виконується гілка «Інакше».

## Створення вузла

В інтерфейсі налаштування робочого процесу натисніть кнопку плюса («+») у потоці, щоб додати вузол «Багатоумовне розгалуження»:

![Створити вузол багатоумовного розгалуження](https://static-docs.nocobase.com/20251123222134.png)

## Керування гілками

### Гілки за замовчуванням

Після створення вузол за замовчуванням містить дві гілки:

1. **Гілка умови**: Тут можна налаштувати конкретні умови перевірки.
2. **Гілка «Інакше»**: Сюди переходить робочий процес, якщо жодна з гілок умов не виконується; налаштування умов не потрібне.

Натисніть кнопку «Додати гілку» під вузлом, щоб додати більше гілок умов.

![20251123222540](https://static-docs.nocobase.com/20251123222540.png)

### Додавання гілки

Після натискання «Додати гілку» нова гілка додається перед гілкою «Інакше».

![20251123222805](https://static-docs.nocobase.com/20251123222805.png)

### Видалення гілки

Якщо існує кілька гілок умов, натисніть піктограму кошика праворуч від гілки, щоб видалити її. Якщо залишилася лише одна гілка умови, її не можна видалити.

![20251123223127](https://static-docs.nocobase.com/20251123223127.png)

:::info{title=Примітка}
Видалення гілки також призведе до видалення всіх вузлів у ній; будь ласка, дійте обережно.

Гілка «Інакше» є вбудованою і не може бути видалена.
:::

## Налаштування вузла

### Налаштування умов

Натисніть назву умови у верхній частині гілки, щоб відредагувати деталі умови:

![20251123223352](https://static-docs.nocobase.com/20251123223352.png)

#### Мітка умови

Підтримуються власні мітки. Після заповнення мітка відображатиметься як назва умови на схемі робочого процесу. Якщо не налаштовано (або залишено порожнім), за замовчуванням відображається як «Умова 1», «Умова 2» тощо, послідовно.

![20251123224209](https://static-docs.nocobase.com/20251123224209.png)

#### Механізм обчислення

Наразі підтримуються три механізми:

- **Базовий**: Використовує прості логічні порівняння (наприклад, дорівнює, містить тощо) та комбінації «І»/«АБО» для визначення результатів.
- **Math.js**: Підтримує обчислення виразів за допомогою синтаксису [Math.js](https://mathjs.org/).
- **Formula.js**: Підтримує обчислення виразів за допомогою синтаксису [Formula.js](https://formulajs.info/) (схоже на формули Excel).

Усі три режими підтримують використання змінних контексту робочого процесу як параметрів.

### Якщо жодна умова не виконується

На панелі налаштування вузла можна визначити подальшу дію, якщо жодна умова не виконується:

![20251123224348](https://static-docs.nocobase.com/20251123224348.png)

*   **Завершити робочий процес з помилкою (за замовчуванням)**: Позначає статус робочого процесу як «невдалий» і припиняє його виконання.
*   **Продовжити виконання наступних вузлів**: Після завершення поточного вузла продовжує виконання наступних вузлів у робочому процесі.

:::info{title=Примітка}
Незалежно від обраного способу обробки, якщо жодна умова не виконується, робочий процес спочатку перейде до гілки «Інакше» для виконання вузлів у ній.
:::

## Історія виконання

В історії виконання робочого процесу вузол багатоумовного розгалуження позначає результат кожної умови різними кольорами:

-   **Зелений**: Умова виконана; робочий процес перейшов до цієї гілки.
-   **Червоний**: Умова не виконана (або сталася помилка обчислення); гілка пропущена.
-   **Синій**: Перевірка не виконувалася (пропущено, оскільки попередня умова вже була виконана).

![20251123225455](https://static-docs.nocobase.com/20251123225455.png)

Якщо помилка конфігурації спричиняє виняток під час обчислення умови, окрім відображення червоним кольором, при наведенні курсора на назву умови відображатиметься конкретна інформація про помилку:

![20251123231014](https://static-docs.nocobase.com/20251123231014.png)

Коли виникає виняток під час обчислення умови, вузол багатоумовного розгалуження завершиться зі статусом «Помилка» і не продовжуватиме виконання наступних вузлів.