---
pkg: '@nocobase/plugin-workflow-variable'
---
:::tip Повідомлення про переклад ШІ
Ця документація була автоматично перекладена штучним інтелектом.
:::

# Змінна

## Вступ

Ви можете оголошувати змінні в робочому процесі або присвоювати значення вже оголошеним змінним. Зазвичай це використовується для зберігання тимчасових даних у межах робочого процесу.

## Створення вузла

В інтерфейсі конфігурації робочого процесу натисніть кнопку плюса («+») у робочому процесі, щоб додати вузол «Змінна»:

![Додати вузол змінної](https://static-docs.nocobase.com/53b1e48e777bfff7f2a08271526ef3ee.png)

## Налаштування вузла

### Режим

Вузол змінної схожий на змінні в програмуванні: його потрібно спочатку оголосити, перш ніж його можна буде використовувати та присвоювати йому значення. Тому при створенні вузла змінної необхідно вибрати його режим. Доступні два режими:

![Вибір режиму](https://static-docs.nocobase.com/49d8b7b501de6faef6f303262aa14550.png)

- Оголосити нову змінну: Створює нову змінну.
- Присвоїти значення існуючій змінній: Присвоює значення змінній, яка була оголошена раніше в робочому процесі, що еквівалентно зміні значення змінної.

Коли вузол, що створюється, є першим вузлом змінної в робочому процесі, ви можете вибрати лише режим оголошення, оскільки наразі немає доступних змінних для присвоєння.

Коли ви вибираєте присвоєння значення оголошеній змінній, вам також потрібно вибрати цільову змінну, тобто вузол, де змінна була оголошена:

![Вибір змінної для присвоєння значення](https://static-docs.nocobase.com/1ce8911548d7347e693d8cc8ac1953eb.png)

### Значення

Значення змінної може бути будь-якого типу. Це може бути константа, наприклад, рядок, число, логічне значення або дата, або це може бути інша змінна з робочого процесу.

У режимі оголошення встановлення значення змінної еквівалентно присвоєнню їй початкового значення.

![Оголошення початкового значення](https://static-docs.nocobase.com/4ce2c508986565ad537343013758c6a4.png)

У режимі присвоєння встановлення значення змінної еквівалентно зміні значення оголошеної цільової змінної на нове значення. Подальше використання отримуватиме це нове значення.

![Присвоєння змінній тригера оголошеній змінній](https://static-docs.nocobase.com/858bae180712ad279ae6a964a77a7659.png)

## Використання значення змінної

У наступних вузлах після вузла змінної ви можете використовувати значення змінної, вибравши оголошену змінну з групи «Змінні вузла». Наприклад, у вузлі запиту використовуйте значення змінної як умову запиту:

![Використання значення змінної як умови фільтрації запиту](https://static-docs.nocobase.com/1ca91c295254ff85999a1751499f14bc.png)

## Приклад

Вузол змінної є особливо корисним у розгалуженнях, де нові значення обчислюються або об'єднуються з попередніми (подібно до `reduce`/`concat` у програмуванні), а потім використовуються після завершення розгалуження. Нижче наведено приклад реалізації об'єднання рядка одержувачів за допомогою циклічного розгалуження та вузла змінної.

Спочатку створіть робочий процес, що запускається оновленням колекції, який спрацьовує при оновленні даних «Статті» та попередньо завантажує пов'язані дані асоціації «Автор» (для отримання одержувачів):

![Налаштування тригера](https://static-docs.nocobase.com/93327530a93c695c637d74cdfdcd5cde.png)

Потім створіть вузол змінної для зберігання рядка одержувачів:

![Вузол змінної одержувача](https://static-docs.nocobase.com/d26fa4a7e7ee4f34e0d8392a51c6666e.png)

Далі створіть вузол циклічного розгалуження, щоб перебрати авторів статті та об'єднати їхню інформацію про одержувачів у змінну одержувача:

![Перебір авторів у статті](https://static-docs.nocobase.com/083fe62c943c17a643dc47ec2872e07c.png)

Усередині циклічного розгалуження спочатку створіть вузол обчислення, щоб об'єднати поточного автора з уже збереженим рядком авторів:

![Об'єднання рядка одержувачів](https://static-docs.nocobase.com/5d21a990162f32cb8818d27b16fd1bcd.png)

Після вузла обчислення створіть ще один вузол змінної. Виберіть режим присвоєння, як ціль присвоєння виберіть вузол змінної одержувача, а як значення – результат вузла обчислення:

![Присвоєння об'єднаного рядка одержувачів вузлу одержувача](https://static-docs.nocobase.com/fc40ed95dd9b61d924b7ca11b23f9482.png)

Таким чином, після завершення циклічного розгалуження змінна одержувача зберігатиме рядок одержувачів усіх авторів статті. Потім, після циклу, ви можете використовувати вузол HTTP-запиту для виклику API надсилання пошти, передаючи значення змінної одержувача як параметр одержувача до API:

![Надсилання пошти одержувачам через вузол запиту](https://static-docs.nocobase.com/37f714a1a63e172bcb2dce10a250947e.png)

Таким чином, проста функція масової розсилки електронних листів була реалізована за допомогою циклу та вузла змінної.