---
pkg: "@nocobase/plugin-data-source-rest-api"
---
:::tip Повідомлення про переклад ШІ
Ця документація була автоматично перекладена штучним інтелектом.
:::



# Джерело даних REST API

## Вступ

Цей плагін дозволяє легко інтегрувати дані з джерел REST API.

## Встановлення

Цей плагін є комерційним, тому його потрібно завантажити та активувати через менеджер плагінів.

![20240323162741](https://static-docs.nocobase.com/20240323162741.png)

## Додавання джерела REST API

Після активації плагіна ви можете додати джерело REST API, вибравши його у випадаючому меню "Додати нове" в розділі керування джерелами даних.

![20240721171420](https://static-docs.nocobase.com/20240721171420.png)

Налаштуйте джерело REST API.

![20240721171507](https://static-docs.nocobase.com/20240721171507.png)

## Додавання колекції

У NocoBase RESTful-ресурс відображається як колекція, наприклад, ресурс "Користувачі".

```bash
GET /users
POST /users
GET /users/1
PUT /users/1
DELETE /users/1
```

Ці кінцеві точки API відображаються в NocoBase наступним чином:

```bash
GET /users:list
POST /users:create
POST /users:get?filterByTk=1
POST /users:update?filterByTk=1
POST /users:destroy?filterByTk=1
```

Щоб отримати повний посібник зі специфікацій дизайну NocoBase API, зверніться до документації API.

![20240716213344](https://static-docs.nocobase.com/20240716213344.png)

Перегляньте розділ "NocoBase API - Core" для отримання детальної інформації.

![20240716213258](https://static-docs.nocobase.com/20240716213258.png)

Конфігурація колекції для джерела даних REST API включає наступне:

### Список

Налаштуйте відображення інтерфейсу для перегляду списку ресурсів.

![20240716211351](https://static-docs.nocobase.com/20240716211351.png)

### Отримати

Налаштуйте відображення інтерфейсу для перегляду деталей ресурсу.

![20240716211532](https://static-docs.nocobase.com/20240716211532.png)

### Створити

Налаштуйте відображення інтерфейсу для створення ресурсу.

![20240716211634](https://static-docs.nocobase.com/20240716211634.png)

### Оновити

Налаштуйте відображення інтерфейсу для оновлення ресурсу.
![20240716211733](https://static-docs.nocobase.com/20240716211733.png)

### Видалити

Налаштуйте відображення інтерфейсу для видалення ресурсу.

![20240716211808](https://static-docs.nocobase.com/20240716211808.png)

Інтерфейси "Список" та "Отримати" є обов'язковими для налаштування.

## Відлагодження API

### Інтеграція параметрів запиту

Приклад: Налаштуйте параметри пагінації для API "Список". Якщо сторонній API не підтримує пагінацію нативно, NocoBase буде виконувати пагінацію на основі отриманих даних списку.

![20241121205229](https://static-docs.nocobase.com/20241121205229.png)

Зверніть увагу, що діятимуть лише ті змінні, які були додані в інтерфейсі.

| Назва параметра стороннього API | Параметр NocoBase           |
| ------------------------------- | --------------------------- |
| page                            | {{request.params.page}}     |
| limit                           | {{request.params.pageSize}} |

Ви можете натиснути "Спробувати" (Try it out), щоб відлагодити та переглянути відповідь.

![20241121210320](https://static-docs.nocobase.com/20241121210320.png)

<video width="100%" height="440" controls>
      <source src="https://static-docs.nocobase.com/20241121211034.mp4" type="video/mp4">
</video>

### Перетворення формату відповіді

Формат відповіді стороннього API може не відповідати стандарту NocoBase, тому його потрібно перетворити, перш ніж він буде коректно відображений на фронтенді.

![20241121214638](https://static-docs.nocobase.com/20241121214638.png)

Налаштуйте правила перетворення відповідно до формату відповіді стороннього API, щоб забезпечити відповідність виводу стандарту NocoBase.

![20241121215100](https://static-docs.nocobase.com/20241121215100.png)

Опис процесу відлагодження

![20240717110051](https://static-docs.nocobase.com/20240717110051.png)

## Змінні

Джерело даних REST API підтримує три типи змінних для інтеграції API:

- Користувацькі змінні джерела даних
- Змінні запиту NocoBase
- Змінні відповіді сторонніх сервісів

### Користувацькі змінні джерела даних

![20240716221937](https://static-docs.nocobase.com/20240716221937.png)

![20240716221858](https://static-docs.nocobase.com/20240716221858.png)

### Запит NocoBase

- Params: Параметри запиту URL (Search Params), які відрізняються залежно від інтерфейсу.
- Headers: Користувацькі заголовки запиту, що переважно надають специфічну X-інформацію від NocoBase.
- Body: Тіло запиту.
- Token: Токен API для поточного запиту NocoBase.

![20240716222042](https://static-docs.nocobase.com/20240716222042.png)

### Відповіді сторонніх сервісів

Наразі доступне лише тіло відповіді.

![20240716222303](https://static-docs.nocobase.com/20240716222303.png)

Нижче наведено змінні, доступні для кожного інтерфейсу:

### Список

| Параметр                | Опис                                                       |
| ----------------------- | ---------------------------------------------------------- |
| request.params.page     | Поточна сторінка                                           |
| request.params.pageSize | Кількість елементів на сторінку                            |
| request.params.filter   | Критерії фільтрації (мають відповідати формату фільтра NocoBase) |
| request.params.sort     | Критерії сортування (мають відповідати формату сортування NocoBase) |
| request.params.appends  | Поля для завантаження за вимогою, зазвичай для полів асоціацій |
| request.params.fields   | Поля для включення (білий список)                          |
| request.params.except   | Поля для виключення (чорний список)                        |

### Отримати

| Параметр                  | Опис                                                       |
| ------------------------- | ---------------------------------------------------------- |
| request.params.filterByTk | Обов'язково, зазвичай ID поточного запису                 |
| request.params.filter     | Критерії фільтрації (мають відповідати формату фільтра NocoBase) |
| request.params.appends    | Поля для завантаження за вимогою, зазвичай для полів асоціацій |
| request.params.fields     | Поля для включення (білий список)                          |
| request.params.except     | Поля для виключення (чорний список)                        |

### Створити

| Параметр                | Опис                        |
| ----------------------- | --------------------------- |
| request.params.whiteList | Білий список                |
| request.params.blacklist | Чорний список               |
| request.body             | Початкові дані для створення |

### Оновити

| Параметр                  | Опис                                                       |
| ------------------------- | ---------------------------------------------------------- |
| request.params.filterByTk | Обов'язково, зазвичай ID поточного запису                 |
| request.params.filter     | Критерії фільтрації (мають відповідати формату фільтра NocoBase) |
| request.params.whiteList  | Білий список                                               |
| request.params.blacklist  | Чорний список                                              |
| request.body              | Дані для оновлення                                         |

### Видалити

| Параметр                  | Опис                                                       |
| ------------------------- | ---------------------------------------------------------- |
| request.params.filterByTk | Обов'язково, зазвичай ID поточного запису                 |
| request.params.filter     | Критерії фільтрації (мають відповідати формату фільтра NocoBase) |

## Налаштування полів

Метадані полів (Fields) витягуються з даних CRUD-інтерфейсу адаптованого ресурсу, щоб слугувати полями колекції.

![20240716223636](https://static-docs.nocobase.com/20240716223636.png)

Витяг метаданих полів.

![20241121230436](https://static-docs.nocobase.com/20241121230436.png)

Поля та попередній перегляд.

![20240716224403](https://static-docs.nocobase.com/20240716224403.png)

Редагування полів (аналогічно іншим джерелам даних).

![20240716224704](https://static-docs.nocobase.com/20240716224704.png)

## Додавання блоків джерела даних REST API

Після налаштування колекції ви можете додавати блоки до інтерфейсу.

![20240716225120](https://static-docs.nocobase.com/20240716225120.png)