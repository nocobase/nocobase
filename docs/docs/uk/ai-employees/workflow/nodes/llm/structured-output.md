---
pkg: "@nocobase/plugin-ai-ee"
---
:::tip Повідомлення про переклад ШІ
Ця документація була автоматично перекладена штучним інтелектом.
:::



# Структурований вивід

## Вступ

В деяких сценаріях використання користувачі можуть бажати, щоб модель LLM відповідала структурованим вмістом у форматі JSON. Цього можна досягти, налаштувавши «Структурований вивід».

![](https://static-docs.nocobase.com/202503041306405.png)

## Налаштування

- **JSON Schema** – Ви можете вказати очікувану структуру відповіді моделі, налаштувавши [JSON Schema](https://json-schema.org/).
- **Назва (Name)** – _Необов'язково_, використовується, щоб допомогти моделі краще зрозуміти об'єкт, який представляє JSON Schema.
- **Опис (Description)** – _Необов'язково_, використовується, щоб допомогти моделі краще зрозуміти призначення JSON Schema.
- **Strict** – Вимагає від моделі генерувати відповідь суворо відповідно до структури JSON Schema. Наразі цей параметр підтримують лише деякі нові моделі OpenAI. Будь ласка, переконайтеся, що ваша модель сумісна, перш ніж вмикати його.

## Метод генерації структурованого вмісту

Спосіб генерації структурованого вмісту моделлю залежить від використовуваної **моделі** та її конфігурації **Response format**:

1. Моделі, де Response format підтримує лише `text`

   - При виклику вузол прив'язує інструмент (Tool), який генерує вміст у форматі JSON на основі JSON Schema, скеровуючи модель до створення структурованої відповіді шляхом виклику цього інструменту.

2. Моделі, де Response format підтримує режим JSON (`json_object`)

   - Якщо при виклику обрано режим JSON, користувачеві потрібно чітко вказати моделі в Prompt повернути дані у форматі JSON та надати описи полів відповіді.
   - У цьому режимі JSON Schema використовується лише для розбору рядка JSON, повернутого моделлю, та перетворення його на цільовий об'єкт JSON.

3. Моделі, де Response format підтримує JSON Schema (`json_schema`)

   - JSON Schema безпосередньо використовується для визначення цільової структури відповіді для моделі.
   - Додатковий параметр **Strict** вимагає від моделі суворо дотримуватися JSON Schema при генерації відповіді.

4. Локальні моделі Ollama
   - Якщо налаштовано JSON Schema, при виклику вузол передасть її моделі як параметр `format`.

## Використання результату структурованого виводу

Структурований вміст відповіді моделі зберігається як об'єкт JSON у полі Structured content вузла і може бути використаний наступними вузлами.

![](https://static-docs.nocobase.com/202503041330291.png)

![](https://static-docs.nocobase.com/202503041331279.png)