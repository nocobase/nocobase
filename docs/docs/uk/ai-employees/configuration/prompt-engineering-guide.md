:::tip Повідомлення про переклад ШІ
Ця документація була автоматично перекладена штучним інтелектом.
:::


# AI Agent · Посібник з інженерії промптів

> Від «як писати» до «як писати добре» – цей посібник навчить вас створювати високоякісні промпти простим, стабільним та багаторазовим способом.

## 1. Чому промпти є ключовими

Промпт — це «посадова інструкція» для AI-агента, яка безпосередньо визначає його стиль, межі та якість виводу.

**Приклад порівняння:**

❌ Нечіткий промпт:

```
Ви — помічник з аналізу даних, який допомагає користувачам аналізувати дані.
```

✅ Чіткий та керований промпт:

```
Ви — Viz, експерт з аналізу даних.

Визначення ролі
- Стиль: проникливий, чіткий у висловлюваннях, орієнтований на візуалізацію
- Місія: перетворювати складні дані на зрозумілі «графічні історії»

Робочий процес
1) Розуміння вимог
2) Генерація безпечного SQL (використовуючи лише SELECT)
3) Вилучення інсайтів
4) Презентація за допомогою діаграм

Жорсткі правила
- ОБОВ'ЯЗКОВО: Використовуйте лише SELECT, ніколи не змінюйте дані
- ЗАВЖДИ: За замовчуванням виводьте візуалізації діаграм
- НІКОЛИ: Не фабрикуйте та не вгадуйте дані

Формат виводу
Короткий висновок (2-3 речення) + JSON діаграми ECharts
```

**Висновок**: Добре складений промпт чітко визначає «хто це, що робити, як робити і за якими стандартами», роблячи роботу AI стабільною та керованою.

## 2. «Золота формула» промптів: дев'ять елементів

Структура, перевірена на практиці як ефективна:

```
Назва + Подвійні інструкції + Імітація підтвердження + Повторення + Жорсткі правила
+ Фонова інформація + Позитивне підкріплення + Приклади для посилання + Негативні приклади (необов'язково)
```

### 2.1. Опис елементів

| Елемент                 | Що вирішує                               | Чому ефективно                      |
| ----------------------- | ---------------------------------------- | ----------------------------------- |
| Назва                   | Уточнює ідентичність та стиль            | Допомагає AI сформувати «відчуття ролі» |
| Подвійні інструкції     | Розрізняє «хто я / що мені потрібно робити» | Зменшує плутанину з роллю           |
| Імітація підтвердження  | Повторює розуміння перед виконанням      | Запобігає відхиленням               |
| Повторення              | Ключові моменти з'являються повторно     | Підвищує пріоритет                  |
| Жорсткі правила         | ОБОВ'ЯЗКОВО/ЗАВЖДИ/НІКОЛИ                | Встановлює базовий рівень           |
| Фонова інформація       | Необхідні знання та обмеження            | Зменшує непорозуміння               |
| Позитивне підкріплення  | Керує очікуваннями та стилем             | Більш стабільний тон та продуктивність |
| Приклади для посилання  | Надає пряму модель для імітації          | Вивід ближчий до очікувань          |
| Негативні приклади       | Уникає поширених помилок                 | Виправляє помилки, стає точнішим з використанням |

### 2.2. Шаблон для швидкого старту

```yaml
# 1) Назва
Ви — [Ім'я], чудовий [Роль/Спеціаліст].

# 2) Подвійні інструкції
## Роль
Стиль: [Прикметник ×2-3]
Місія: [Опис основної відповідальності в одному реченні]

## Робочий процес завдання
1) Розуміння: [Ключовий момент]
2) Виконання: [Ключовий момент]
3) Перевірка: [Ключовий момент]
4) Презентація: [Ключовий момент]

# 3) Імітація підтвердження
Перед виконанням повторіть своє розуміння: «Я розумію, що вам потрібно... Я виконаю це за допомогою...»

# 4) Повторення
Основна вимога: [1-2 найважливіші моменти] (з'являються щонайменше двічі на початку/в робочому процесі/в кінці)

# 5) Жорсткі правила
ОБОВ'ЯЗКОВО: [Непорушне правило]
ЗАВЖДИ: [Принцип, якого слід завжди дотримуватися]
НІКОЛИ: [Чітко заборонена дія]

# 6) Фонова інформація
[Необхідні знання домену/контекст/поширені помилки]

# 7) Позитивне підкріплення
Ви чудово справляєтеся з [Здатність] і майстерні в [Спеціалізація]. Будь ласка, дотримуйтеся цього стилю для виконання завдання.

# 8) Приклади для посилання
[Надайте стислий приклад «ідеального виводу»]

# 9) Негативні приклади (необов'язково)
- [Неправильний спосіб] → [Правильний спосіб]
```

## 3. Практичний приклад: Viz (Аналіз даних)

Давайте об'єднаємо дев'ять елементів, щоб створити повний, «готовий до використання» приклад.

```text
# Назва
Ви — Viz, експерт з аналізу даних.

# Подвійні інструкції
【Роль】
Стиль: проникливий, чіткий, візуально орієнтований
Місія: перетворювати складні дані на «графічні історії»

【Робочий процес завдання】
1) Розуміння: Аналіз вимог користувача до даних та обсягу метрик
2) Запит: Генерація безпечного SQL (запитувати лише реальні дані, лише SELECT)
3) Аналіз: Вилучення ключових інсайтів (тенденції/порівняння/частки)
4) Презентація: Вибір відповідної діаграми для чіткого вираження

# Імітація підтвердження
Перед виконанням повторіть: «Я розумію, що ви хочете проаналізувати [об'єкт/обсяг], і я представлю результати за допомогою [методу запиту та візуалізації].»

# Повторення
Ще раз наголошую: пріоритет — достовірність даних, краще менше, та краще; якщо даних немає, повідомте про це правдиво.

# Жорсткі правила
ОБОВ'ЯЗКОВО: Використовуйте лише запити SELECT, не змінюйте жодних даних
ЗАВЖДИ: За замовчуванням виводьте візуальну діаграму
НІКОЛИ: Не фабрикуйте та не вгадуйте дані

# Фонова інформація
- ECharts вимагає конфігурації «чистого JSON», без коментарів/функцій
- Кожна діаграма повинна фокусуватися на одній темі, уникайте нагромадження кількох метрик

# Позитивне підкріплення
Ви вмієте витягувати дієві висновки з реальних даних та виражати їх за допомогою найпростіших діаграм.

# Приклади для посилання
Опис (2-3 речення) + JSON діаграми

Приклад опису:
Цього місяця додано 127 нових лідів, що на 23% більше порівняно з попереднім місяцем, переважно з сторонніх каналів.

Приклад діаграми:
{
  "title": {"text": "Тенденція лідів цього місяця"},
  "tooltip": {"trigger": "axis"},
  "xAxis": {"type": "category", "data": ["Тиждень1","Тиждень2","Тиждень3","Тиждень4"]},
  "yAxis": {"type": "value"},
  "series": [{"type": "line", "data": [28,31,35,33]}]
}

# Негативні приклади (необов'язково)
- Змішування мов → Дотримуйтеся мовної послідовності
- Перевантажені діаграми → Кожна діаграма повинна виражати лише одну тему
- Неповні дані → Правдиво вказуйте «Дані відсутні»
```

**Ключові моменти дизайну**

* «Достовірність» згадується кілька разів у робочому процесі, повтореннях та правилах (сильне нагадування)
* Виберіть двокомпонентний вивід «опис + JSON» для легшої інтеграції з фронтендом
* Чітко визначте «SQL тільки для читання», щоб зменшити ризики

## 4. Як покращувати промпти з часом

### 4.1. П'ятикрокова ітерація

```
Почніть з робочої версії → Протестуйте в невеликому масштабі → Зафіксуйте проблеми → Додайте правила/приклади для вирішення проблем → Протестуйте знову
```

<img src="https://static-docs.nocobase.com/prompt-engineering-guide-2025-11-02-20-19-54.png" alt="Процес оптимізації" width="50%">

Рекомендується тестувати 5–10 типових завдань за один раз, завершуючи один раунд протягом 30 хвилин.

### 4.2. Принципи та співвідношення

*   **Пріоритет позитивного керівництва**: Спочатку скажіть AI, що він повинен робити
*   **Покращення, кероване проблемами**: Додавайте обмеження лише тоді, коли виникають проблеми
*   **Помірні обмеження**: Не нагромаджуйте «заборони» з самого початку

Емпіричне співвідношення: **80% позитивного : 20% негативного**.

### 4.3. Типова оптимізація

**Проблема**: Перевантажені діаграми, низька читабельність
**Оптимізація**:

1.  У «Фонову інформацію» додайте: одна тема на діаграму
2.  У «Прикладах для посилання» надайте «діаграму з однією метрикою»
3.  Якщо проблема повторюється, додайте жорстке обмеження в «Жорсткі правила/Повторення»

## 5. Розширені техніки

### 5.1. Використання XML/тегів для чіткішої структури (рекомендовано для довгих промптів)

Коли вміст перевищує 1000 символів або може бути заплутаним, використання тегів для розділення є більш стабільним:

```xml
<Role>Ви — Dex, експерт з організації даних.</Role>
<Style>Ретельний, точний та організований.</Style>

<Task>
Має бути виконано за такими кроками:
1. Визначити ключові поля
2. Витягти значення полів
3. Стандартизувати формат (Дата РРРР-ММ-ДД)
4. Вивести JSON
</Task>

<Rules>
ОБОВ'ЯЗКОВО: Зберігати точність значень полів
НІКОЛИ: Не вгадувати відсутню інформацію
ЗАВЖДИ: Позначати невизначені елементи
</Rules>

<Example>
{"Ім'я":"Іван Петренко","Дата":"2024-01-15","Сума":5000,"Статус":"Підтверджено"}
</Example>
```

### 5.2. Багаторівневий підхід «Фон + Завдання» (більш інтуїтивний спосіб)

*   **Фон** (довгострокова стабільність): Хто цей агент, який його стиль, які можливості він має
*   **Завдання** (за потребою): Що робити зараз, на яких метриках зосередитися, який діапазон за замовчуванням

Це природно відповідає моделі NocoBase «Агент + Завдання»: **фіксований фон, гнучкі завдання**.

### 5.3. Модульне повторне використання

Розділіть загальні правила на модулі, щоб їх можна було комбінувати за потреби:

**Модуль безпеки даних**

```
ОБОВ'ЯЗКОВО: Використовуйте лише SELECT
НІКОЛИ: Не виконуйте INSERT/UPDATE/DELETE
```

**Модуль структури виводу**

```
Вивід повинен включати:
1) Короткий опис (2-3 речення)
2) Основний вміст (діаграма/дані/код)
3) Додаткові пропозиції (якщо є)
```

## 6. Золоті правила (практичні висновки)

1.  Один AI виконує лише один тип роботи; спеціалізація є стабільнішою.
2.  Приклади ефективніші за гасла; спочатку надайте позитивні зразки.
3.  Використовуйте ОБОВ'ЯЗКОВО/ЗАВЖДИ/НІКОЛИ для встановлення меж.
4.  Використовуйте процесно-орієнтований підхід, щоб зменшити невизначеність.
5.  Рухайтеся невеликими кроками, більше тестуйте, менше змінюйте та безперервно ітеруйте.
6.  Не переобтяжуйте обмеженнями; уникайте «жорсткого кодування» поведінки.
7.  Записуйте проблеми та зміни, щоб створювати версії.
8.  80/20: Спочатку поясніть «як робити правильно», потім обмежте «що не робити неправильно».

## 7. Часті запитання

**З1: Яка ідеальна довжина?**

*   Базовий агент: 500–800 символів
*   Складний агент: 800–1500 символів
*   Не рекомендується >2000 символів (може сповільнювати роботу та бути надлишковим)
    Стандарт: Охоплює всі дев'ять елементів, але без зайвих слів.

**З2: Що робити, якщо AI не дотримується інструкцій?**

1.  Використовуйте ОБОВ'ЯЗКОВО/ЗАВЖДИ/НІКОЛИ для уточнення меж.
2.  Повторіть ключові вимоги 2–3 рази.
3.  Використовуйте теги/розділи для покращення структури.
4.  Надавайте більше позитивних прикладів, менше абстрактних принципів.
5.  Оцініть, чи потрібна потужніша модель.

**З3: Як збалансувати позитивне та негативне керівництво?**
Спочатку напишіть позитивні частини (роль, робочий процес, приклади), потім додайте обмеження на основі помилок і обмежуйте лише ті моменти, які «повторно неправильні».

**З4: Чи потрібно часто оновлювати?**

*   Фон (ідентичність/стиль/основні можливості): Довгострокова стабільність
*   Завдання (сценарій/метрики/обсяг): Коригуйте відповідно до бізнес-потреб
*   Створюйте нову версію для будь-яких змін і записуйте «чому її було змінено».

## 8. Наступні кроки

**Практичні вправи**

*   Виберіть просту роль (наприклад, помічник служби підтримки клієнтів), напишіть «робочу версію» за дев'ятьма елементами та протестуйте її з 5 типовими завданнями.
*   Знайдіть існуючого агента, зберіть 3–5 реальних проблем і виконайте невелику ітерацію.

**Додаткове читання**

*   [Посібник з конфігурації AI-агента для адміністратора](./admin-configuration.md): Застосування промптів у фактичній конфігурації
*   Спеціальні посібники для кожного AI-агента: Перегляньте повні шаблони ролей/завдань

## Висновок

**Спочатку запустіть, потім допрацюйте.**
Почніть з «працюючої» версії та постійно збирайте проблеми, додавайте приклади та правила у реальних завданнях.
Пам'ятайте: **Спочатку скажіть йому, як робити правильно (позитивне керівництво), потім обмежте його від неправильних дій (помірне обмеження).**