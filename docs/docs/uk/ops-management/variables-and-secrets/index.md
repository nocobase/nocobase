---
pkg: "@nocobase/plugin-environment-variables"
---
:::tip Повідомлення про переклад ШІ
Ця документація була автоматично перекладена штучним інтелектом.
:::



# Змінні та секрети

## Вступ

Централізоване налаштування та керування змінними середовища та секретами для зберігання конфіденційних даних, повторного використання конфігураційних даних та ізоляції конфігурацій середовища.

## Відмінності від `.env`

| **Особливість**               | **Файл `.env`**                                                                                    | **Динамічно налаштовані змінні та секрети**                                                                                                                |
| ------------------------- | -------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Місце зберігання**      | Зберігаються у файлі `.env` в кореневій директорії проєкту                                            | Зберігаються в таблиці `environmentVariables` у базі даних                                                                                                      |
| **Метод завантаження**        | Завантажуються в `process.env` за допомогою таких інструментів, як `dotenv`, під час запуску застосунку                     | Динамічно зчитуються та завантажуються в `app.environment` під час запуску застосунку                                                                                   |
| **Метод модифікації**   | Потребують прямого редагування файлу, і для застосування змін необхідно перезапустити застосунок | Підтримують модифікацію під час виконання, зміни набувають чинності одразу після перезавантаження конфігурації застосунку                                                    |
| **Ізоляція середовища** | Кожне середовище (розробка, тестування, продакшн) потребує окремого супроводу файлів `.env`  | Кожне середовище (розробка, тестування, продакшн) потребує окремого супроводу даних у таблиці `environmentVariables`                                   |
| **Сценарії застосування**  | Підходять для фіксованих статичних конфігурацій, таких як інформація про основну базу даних застосунку    | Підходять для динамічних конфігурацій, що потребують частих коригувань або пов'язані з бізнес-логікою, наприклад, інформація про зовнішні бази даних, файлові сховища тощо |

## Інсталяція

Вбудований плагін, окрема інсталяція не потрібна.

## Використання

### Повторне використання конфігураційних даних

Наприклад, якщо кілька місць у робочому процесі потребують вузлів електронної пошти та конфігурації SMTP, загальну конфігурацію SMTP можна зберігати у змінних середовища.

![20250102181045](https://static-docs.nocobase.com/20250102181045.png)

### Зберігання конфіденційних даних

Зберігання різноманітної інформації про конфігурацію зовнішніх баз даних, ключів хмарних файлових сховищ тощо.

![20250102103513](https://static-docs.nocobase.com/20250102103513.png)

### Ізоляція конфігурації середовища

У різних середовищах, таких як розробка, тестування та продакшн, використовуються незалежні стратегії керування конфігурацією, щоб забезпечити взаємну несумісність конфігурацій та даних кожного середовища. Кожне середовище має власні незалежні налаштування, змінні та ресурси, що дозволяє уникнути конфліктів між середовищами розробки, тестування та продакшну та забезпечити очікувану роботу системи в кожному середовищі.

Наприклад, конфігурація для служб файлового сховища може відрізнятися між середовищами розробки та продакшну, як показано нижче:

Середовище розробки

```bash
FILE_STORAGE_OSS_BASE_URL=dev-storage.nocobase.com
FILE_STORAGE_OSS_BUCKET=dev-storage
```

Середовище продакшну

```bash
FILE_STORAGE_OSS_BASE_URL=prod-storage.nocobase.com
FILE_STORAGE_OSS_BUCKET=prod-storage
```

## Керування змінними середовища

![20250102155314](https://static-docs.nocobase.com/20250102155314.png)

### Додавання змінних середовища

- Підтримує додавання поодиноко та пакетами
- Підтримує зберігання у відкритому вигляді та зашифрованому

![20250102155509](https://static-docs.nocobase.com/20250102155509.png)

Додавання поодиноко

![20250102155731](https://static-docs.nocobase.com/20250102155731.png)

Пакетне додавання

![20250102155258](https://static-docs.nocobase.com/20250102155258.png)

## Примітки

### Перезапуск застосунку

Після зміни або видалення змінних середовища у верхній частині з'явиться підказка про перезапуск застосунку. Зміни змінних середовища набудуть чинності лише після перезапуску застосунку.

![20250102155007](https://static-docs.nocobase.com/20250102155007.png)

### Зашифроване зберігання

Зашифровані дані для змінних середовища використовують симетричне шифрування AES. ПРИВАТНИЙ КЛЮЧ для шифрування та дешифрування зберігається в директорії сховища. Будь ласка, зберігайте його в безпеці; у разі втрати або перезапису зашифровані дані неможливо буде розшифрувати.

```bash
./storage/environment-variables/<app-name>/aes_key.dat
```

## Наразі підтримувані плагіни для змінних середовища

### Дія: Спеціальний запит

![20250102180751](https://static-docs.nocobase.com/20250102180751.png)

### Автентифікація: CAS

![20250102160129](https://static-docs.nocobase.com/20250102160129.png)

### Автентифікація: DingTalk

![20250102160205](https://static-docs.nocobase.com/20250102160205.png)

### Автентифікація: LDAP

![20250102160312](https://static-docs.nocobase.com/20250102160312.png)

### Автентифікація: OIDC

![20250102160426](https://static-docs.nocobase.com/20250102160426.png)

### Автентифікація: SAML

![20250102160652](https://static-docs.nocobase.com/20250102160652.png)

### Автентифікація: WeCom

![20250102160758](https://static-docs.nocobase.com/20250102160758.png)

### Джерело даних: Зовнішня MariaDB

![20250102160935](https://static-docs.nocobase.com/20250102160935.png)

### Джерело даних: Зовнішня MySQL

![20250102173602](https://static-docs.nocobase.com/20250102173602.png)

### Джерело даних: Зовнішня Oracle

![20250102174153](https://static-docs.nocobase.com/20250102174153.png)

### Джерело даних: Зовнішня PostgreSQL

![20250102175630](https://static-docs.nocobase.com/20250102175630.png)

### Джерело даних: Зовнішній SQL Server

![20250102175814](https://static-docs.nocobase.com/20250102175814.png)

### Джерело даних: KingbaseES

![20250102175951](https://static-docs.nocobase.com/20250102175951.png)

### Джерело даних: REST API

![20250102180109](https://static-docs.nocobase.com/20250102180109.png)

### Файлове сховище: Локальне

![20250102161114](https://static-docs.nocobase.com/20250102161114.png)

### Файлове сховище: Aliyun OSS

![20250102161404](https://static-docs.nocobase.com/20250102161404.png)

### Файлове сховище: Amazon S3

![20250102163730](https://static-docs.nocobase.com/20250102163730.png)

### Файлове сховище: Tencent COS

![20250102173109](https://static-docs.nocobase.com/20250102173109.png)

### Файлове сховище: S3 Pro

Не адаптовано

### Карта: AMap

![20250102163803](https://static-docs.nocobase.com/20250102163803.png)

### Карта: Google

![20250102171524](https://static-docs.nocobase.com/20250102171524.png)

### Налаштування електронної пошти

Не адаптовано

### Сповіщення: Електронна пошта

![20250102164059](https://static-docs.nocobase.com/20250102164059.png)

### Публічні форми

![20250102163849](https://static-docs.nocobase.com/20250102163849.png)

### Системні налаштування

![20250102164139](https://static-docs.nocobase.com/20250102164139.png)

### Верифікація: Aliyun SMS

![20250102164247](https://static-docs.nocobase.com/20250102164247.png)

### Верифікація: Tencent SMS

![20250102165814](https://static-docs.nocobase.com/20250102165814.png)

### Робочий процес

![20250102180537](https://static-docs.nocobase.com/20250102180537.png)