---
pkg: '@nocobase/plugin-acl'
---
:::tip Повідомлення про переклад ШІ
Ця документація була автоматично перекладена штучним інтелектом.
:::

# Об'єднання ролей

Об'єднання ролей — це режим керування дозволами. Залежно від налаштувань системи, розробники можуть обрати використання `Незалежних ролей`, `Дозволити об'єднання ролей` або `Лише об'єднання ролей`, щоб задовольнити різні потреби в дозволах.

![20250312184651](https://static-docs.nocobase.com/20250312184651.png)

## Незалежні ролі

За замовчуванням система використовує незалежні ролі. Це означає, що об'єднання ролей не застосовується, і користувачі повинні перемикатися між ролями, які вони мають, по черзі.

![20250312184729](https://static-docs.nocobase.com/20250312184729.png)
![20250312184826](https://static-docs.nocobase.com/20250312184826.png)

## Дозволити об'єднання ролей

Розробники системи можуть увімкнути `Дозволити об'єднання ролей`. Це дає користувачам змогу одночасно використовувати дозволи всіх призначених їм ролей, а також дозволяє їм перемикатися між ролями індивідуально.

![20250312185006](https://static-docs.nocobase.com/20250312185006.png)

## Лише об'єднання ролей

Користувачі зобов'язані використовувати лише об'єднання ролей і не можуть перемикатися між ролями індивідуально.

![20250312185105](https://static-docs.nocobase.com/20250312185105.png)

## Правила об'єднання ролей

Об'єднання ролей надає максимальні дозволи, що охоплюють усі ролі. Нижче пояснюється, як вирішувати конфлікти дозволів, коли ролі мають різні налаштування для одного й того ж дозволу.

### Об'єднання дозволів на операції

Приклад: Роль 1 (role1) налаштована на `Дозволяє конфігурувати інтерфейс`, а Роль 2 (role2) налаштована на `Дозволяє встановлювати, активувати, вимикати плагіни`.

![20250312190133](https://static-docs.nocobase.com/20250312190133.png)

![20250312190352](https://static-docs.nocobase.com/20250312190352.png)

При вході в систему з роллю, що має **Повні дозволи**, користувач одночасно матиме обидва ці дозволи.

![20250312190621](https://static-docs.nocobase.com/20250312190621.png)

### Об'єднання області даних

#### Рядки даних

Сценарій 1: Кілька ролей встановлюють умови для одного й того ж поля

Фільтр Ролі A: Age < 30

| UserID | Name | Age |
| ------ | ---- | --- |
| 1      | Jack | 23  |
| 2      | Lily | 29  |

Фільтр Ролі B: Age > 25

| UserID | Name | Age |
| ------ | ---- | --- |
| 2      | Lily | 29  |
| 3      | Sam  | 32  |

**Після об'єднання:**

| UserID | Name | Age |
| ------ | ---- | --- |
| 1      | Jack | 23  |
| 2      | Lily | 29  |
| 3      | Sam  | 32  |

Сценарій 2: Різні ролі встановлюють умови для різних полів

Фільтр Ролі A: Age < 30

| UserID | Name | Age |
| ------ | ---- | --- |
| 1      | Jack | 23  |
| 2      | Lily | 29  |

Фільтр Ролі B: Name містить "Ja"

| UserID | Name   | Age |
| ------ | ------ | --- |
| 1      | Jack   | 23  |
| 3      | Jasmin | 27  |

**Після об'єднання:**

| UserID | Name   | Age |
| ------ | ------ | --- |
| 1      | Jack   | 23  |
| 2      | Lily   | 29  |
| 3      | Jasmin | 27  |

#### Стовпці даних

Видимі стовпці Ролі A: Name, Age

| UserID | Name | Age |
| ------ | ---- | --- |
| 1      | Jack | 23  |
| 2      | Lily | 29  |

Видимі стовпці Ролі B: Name, Sex

| UserID | Name | Sex   |
| ------ | ---- | ----- |
| 1      | Jack | Man   |
| 2      | Lily | Woman |

**Після об'єднання:**

| UserID | Name | Age | Sex   |
| ------ | ---- | --- | ----- |
| 1      | Jack | 23  | Man   |
| 2      | Lily | 29  | Woman |

#### Змішані рядки та стовпці

Фільтр Ролі A: Age < 30, стовпці Name, Age

| UserID | Name | Age |
| ------ | ---- | --- |
| 1      | Jack | 23  |
| 2      | Lily | 29  |

Фільтр Ролі B: Name містить "Ja", стовпці Name, Sex

| UserID | Name  | Sex   |
| ------ | ----- | ----- |
| 3      | Jade  | Woman |
| 4      | James | Man   |

**Після об'єднання:**

| UserID | Name  | Age                                              | Sex                                                 |
| ------ | ----- | ------------------------------------------------ | --------------------------------------------------- |
| 1      | Jack  | 23                                               | <span style="background-color:#FFDDDD">Man</span>   |
| 2      | Lily  | 29                                               | <span style="background-color:#FFDDDD">Woman</span> |
| 3      | Jade  | <span style="background-color:#FFDDDD">27</span> | Woman                                               |
| 4      | James | <span style="background-color:#FFDDDD">31</span> | Man                                                 |

**Примітка:** Клітинки з червоним фоном вказують на дані, які невидимі в окремих ролях, але стають видимими в об'єднаній ролі.

#### Підсумок

Правила об'єднання ролей для області даних:

1. Між рядками: якщо хоча б одна умова виконується, рядок має дозволи.
2. Між стовпцями: поля об'єднуються.
3. Якщо налаштовані одночасно рядки та стовпці: рядки та стовпці об'єднуються окремо, а не за комбінаціями (рядок + стовпець).