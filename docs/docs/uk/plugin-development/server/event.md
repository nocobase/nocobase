:::tip –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–µ—Ä–µ–∫–ª–∞–¥ –®–Ü
–¶—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –±—É–ª–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–∫–ª–∞–¥–µ–Ω–∞ —à—Ç—É—á–Ω–∏–º —ñ–Ω—Ç–µ–ª–µ–∫—Ç–æ–º.
:::


# –ü–æ–¥—ñ—ó

–°–µ—Ä–≤–µ—Ä NocoBase –≥–µ–Ω–µ—Ä—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ –ø–æ–¥—ñ—ó –ø—Ä–æ—Ç—è–≥–æ–º –∂–∏—Ç—Ç—î–≤–æ–≥–æ —Ü–∏–∫–ª—É –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É, –∂–∏—Ç—Ç—î–≤–æ–≥–æ —Ü–∏–∫–ª—É –ø–ª–∞–≥—ñ–Ω—ñ–≤ —Ç–∞ –ø—ñ–¥ —á–∞—Å –æ–ø–µ—Ä–∞—Ü—ñ–π –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö. –†–æ–∑—Ä–æ–±–Ω–∏–∫–∏ –ø–ª–∞–≥—ñ–Ω—ñ–≤ –º–æ–∂—É—Ç—å –ø—Ä–æ—Å–ª—É—Ö–æ–≤—É–≤–∞—Ç–∏ —Ü—ñ –ø–æ–¥—ñ—ó –¥–ª—è —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó —Ä–æ–∑—à–∏—Ä–µ–Ω–æ—ó –ª–æ–≥—ñ–∫–∏, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π –∞–±–æ –≤–ª–∞—Å–Ω–æ—ó –ø–æ–≤–µ–¥—ñ–Ω–∫–∏.

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥—ñ–π NocoBase –ø–æ–¥—ñ–ª—è—î—Ç—å—Å—è –Ω–∞ –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ñ —Ä—ñ–≤–Ω—ñ:

- **`app.on()` - –ü–æ–¥—ñ—ó —Ä—ñ–≤–Ω—è –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É**: –ü—Ä–æ—Å–ª—É—Ö–æ–≤—É—é—Ç—å –ø–æ–¥—ñ—ó –∂–∏—Ç—Ç—î–≤–æ–≥–æ —Ü–∏–∫–ª—É –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É, —Ç–∞–∫—ñ —è–∫ –∑–∞–ø—É—Å–∫, –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è, —É–≤—ñ–º–∫–Ω–µ–Ω–Ω—è –ø–ª–∞–≥—ñ–Ω—ñ–≤ —Ç–æ—â–æ.
- **`db.on()` - –ü–æ–¥—ñ—ó —Ä—ñ–≤–Ω—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö**: –ü—Ä–æ—Å–ª—É—Ö–æ–≤—É—é—Ç—å –ø–æ–¥—ñ—ó –æ–ø–µ—Ä–∞—Ü—ñ–π –Ω–∞ —Ä—ñ–≤–Ω—ñ –º–æ–¥–µ–ª—ñ –¥–∞–Ω–∏—Ö, —Ç–∞–∫—ñ —è–∫ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è, –æ–Ω–æ–≤–ª–µ–Ω–Ω—è, –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∑–∞–ø–∏—Å—ñ–≤ —Ç–æ—â–æ.

–û–±–∏–¥–≤–∞ —É—Å–ø–∞–¥–∫–æ–≤—É—é—Ç—å —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –≤—ñ–¥ `EventEmitter` Node.js, –ø—ñ–¥—Ç—Ä–∏–º—É—é—á–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏ `.on()`, `.off()` —Ç–∞ `.emit()`. NocoBase —Ç–∞–∫–æ–∂ —Ä–æ–∑—à–∏—Ä—é—î –ø—ñ–¥—Ç—Ä–∏–º–∫—É `emitAsync`, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫—É –ø–æ–¥—ñ–π —Ç–∞ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –≤—Å—ñ—Ö —Å–ª—É—Ö–∞—á—ñ–≤.

## –ú—ñ—Å—Ü–µ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó —Å–ª—É—Ö–∞—á—ñ–≤ –ø–æ–¥—ñ–π

–°–ª—É—Ö–∞—á—ñ –ø–æ–¥—ñ–π –∑–∞–∑–≤–∏—á–∞–π —Å–ª—ñ–¥ —Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏ —É –º–µ—Ç–æ–¥—ñ `beforeLoad()` –ø–ª–∞–≥—ñ–Ω–∞. –¶–µ –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –ø–æ–¥—ñ—ó –±—É–¥—É—Ç—å –≥–æ—Ç–æ–≤—ñ –≤–∂–µ –Ω–∞ –µ—Ç–∞–ø—ñ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–ª–∞–≥—ñ–Ω–∞, —ñ –ø–æ–¥–∞–ª—å—à–∞ –ª–æ–≥—ñ–∫–∞ –∑–º–æ–∂–µ –∫–æ—Ä–µ–∫—Ç–Ω–æ –Ω–∞ –Ω–∏—Ö —Ä–µ–∞–≥—É–≤–∞—Ç–∏.

```ts
import { Plugin } from '@nocobase/server';

export default class PluginHelloServer extends Plugin {
  async beforeLoad() {

    // –ü—Ä–æ—Å–ª—É—Ö–æ–≤—É–≤–∞–Ω–Ω—è –ø–æ–¥—ñ–π –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É
    this.app.on('afterStart', () => {
      app.logger.info('NocoBase –∑–∞–ø—É—â–µ–Ω–æ');
    });

    // –ü—Ä–æ—Å–ª—É—Ö–æ–≤—É–≤–∞–Ω–Ω—è –ø–æ–¥—ñ–π –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
    this.db.on('afterCreate', (model) => {
      if (model.collectionName === 'posts') {
        app.logger.info(`–ù–æ–≤–∏–π –¥–æ–ø–∏—Å: ${model.get('title')}`);
      }
    });
  }
}
```

## –ü—Ä–æ—Å–ª—É—Ö–æ–≤—É–≤–∞–Ω–Ω—è –ø–æ–¥—ñ–π –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É `app.on()`

–ü–æ–¥—ñ—ó –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –∑–º—ñ–Ω —É –∂–∏—Ç—Ç—î–≤–æ–º—É —Ü–∏–∫–ª—ñ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É NocoBase —Ç–∞ –ø–ª–∞–≥—ñ–Ω—ñ–≤. –í–æ–Ω–∏ —ñ–¥–µ–∞–ª—å–Ω–æ –ø—ñ–¥—Ö–æ–¥—è—Ç—å –¥–ª—è —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –ª–æ–≥—ñ–∫–∏, —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó —Ä–µ—Å—É—Ä—Å—ñ–≤ –∞–±–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –ø–ª–∞–≥—ñ–Ω—ñ–≤.

### –ü–æ—à–∏—Ä–µ–Ω—ñ —Ç–∏–ø–∏ –ø–æ–¥—ñ–π

| –ù–∞–∑–≤–∞ –ø–æ–¥—ñ—ó | –ß–∞—Å —Å–ø—Ä–∞—Ü—é–≤–∞–Ω–Ω—è | –¢–∏–ø–æ–≤–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è |
|-----------|------------|-----------|
| `beforeLoad` / `afterLoad` | –î–æ / –ø—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É | –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è —Ä–µ—Å—É—Ä—Å—ñ–≤, —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó |
| `beforeStart` / `afterStart` | –î–æ / –ø—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É —Å–µ—Ä–≤—ñ—Å—É | –ó–∞–ø—É—Å–∫ –∑–∞–≤–¥–∞–Ω—å, –≤–∏–≤–µ–¥–µ–Ω–Ω—è –ª–æ–≥—ñ–≤ –∑–∞–ø—É—Å–∫—É |
| `beforeInstall` / `afterInstall` | –î–æ / –ø—ñ—Å–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É | –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö, —ñ–º–ø–æ—Ä—Ç —à–∞–±–ª–æ–Ω—ñ–≤ |
| `beforeStop` / `afterStop` | –î–æ / –ø—ñ—Å–ª—è –∑—É–ø–∏–Ω–∫–∏ —Å–µ—Ä–≤—ñ—Å—É | –û—á–∏—â–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤, –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω—É |
| `beforeDestroy` / `afterDestroy` | –î–æ / –ø—ñ—Å–ª—è –∑–Ω–∏—â–µ–Ω–Ω—è –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É | –í–∏–¥–∞–ª–µ–Ω–Ω—è –∫–µ—à—É, —Ä–æ–∑—Ä–∏–≤ –∑'—î–¥–Ω–∞–Ω—å |
| `beforeLoadPlugin` / `afterLoadPlugin` | –î–æ / –ø—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–ª–∞–≥—ñ–Ω–∞ | –ó–º—ñ–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –ø–ª–∞–≥—ñ–Ω–∞ –∞–±–æ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É |
| `beforeEnablePlugin` / `afterEnablePlugin` | –î–æ / –ø—ñ—Å–ª—è —É–≤—ñ–º–∫–Ω–µ–Ω–Ω—è –ø–ª–∞–≥—ñ–Ω–∞ | –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π, —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ª–æ–≥—ñ–∫–∏ –ø–ª–∞–≥—ñ–Ω–∞ |
| `beforeDisablePlugin` / `afterDisablePlugin` | –î–æ / –ø—ñ—Å–ª—è –≤–∏–º–∫–Ω–µ–Ω–Ω—è –ø–ª–∞–≥—ñ–Ω–∞ | –û—á–∏—â–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤ –ø–ª–∞–≥—ñ–Ω–∞ |
| `afterUpgrade` | –ü—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É | –í–∏–∫–æ–Ω–∞–Ω–Ω—è –º—ñ–≥—Ä–∞—Ü—ñ—ó –¥–∞–Ω–∏—Ö –∞–±–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ |

–ü—Ä–∏–∫–ª–∞–¥: –ü—Ä–æ—Å–ª—É—Ö–æ–≤—É–≤–∞–Ω–Ω—è –ø–æ–¥—ñ—ó –∑–∞–ø—É—Å–∫—É –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É

```ts
app.on('afterStart', async () => {
  app.logger.info('üöÄ –°–µ—Ä–≤—ñ—Å NocoBase –∑–∞–ø—É—â–µ–Ω–æ!');
});
```

–ü—Ä–∏–∫–ª–∞–¥: –ü—Ä–æ—Å–ª—É—Ö–æ–≤—É–≤–∞–Ω–Ω—è –ø–æ–¥—ñ—ó –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–ª–∞–≥—ñ–Ω–∞

```ts
app.on('afterLoadPlugin', ({ plugin }) => {
  app.logger.info(`–ü–ª–∞–≥—ñ–Ω ${plugin.name} –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ`);
});
```

## –ü—Ä–æ—Å–ª—É—Ö–æ–≤—É–≤–∞–Ω–Ω—è –ø–æ–¥—ñ–π –±–∞–∑–∏ –¥–∞–Ω–∏—Ö `db.on()`

–ü–æ–¥—ñ—ó –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –¥–æ–∑–≤–æ–ª—è—é—Ç—å –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏ —Ä—ñ–∑–Ω—ñ –∑–º—ñ–Ω–∏ –¥–∞–Ω–∏—Ö –Ω–∞ —Ä—ñ–≤–Ω—ñ –º–æ–¥–µ–ª—ñ. –í–æ–Ω–∏ –ø—ñ–¥—Ö–æ–¥—è—Ç—å –¥–ª—è –∞—É–¥–∏—Ç—É, —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó, –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è —Ç–∞ —ñ–Ω—à–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π.

### –ü–æ—à–∏—Ä–µ–Ω—ñ —Ç–∏–ø–∏ –ø–æ–¥—ñ–π

| –ù–∞–∑–≤–∞ –ø–æ–¥—ñ—ó | –ß–∞—Å —Å–ø—Ä–∞—Ü—é–≤–∞–Ω–Ω—è |
|-----------|------------|
| `beforeSync` / `afterSync` | –î–æ / –ø—ñ—Å–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö |
| `beforeValidate` / `afterValidate` | –î–æ / –ø—ñ—Å–ª—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó –¥–∞–Ω–∏—Ö |
| `beforeCreate` / `afterCreate` | –î–æ / –ø—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–ø–∏—Å—ñ–≤ |
| `beforeUpdate` / `afterUpdate` | –î–æ / –ø—ñ—Å–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ø–∏—Å—ñ–≤ |
| `beforeSave` / `afterSave` | –î–æ / –ø—ñ—Å–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è (–≤–∫–ª—é—á–Ω–æ –∑—ñ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è–º —Ç–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º) |
| `beforeDestroy` / `afterDestroy` | –î–æ / –ø—ñ—Å–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∑–∞–ø–∏—Å—ñ–≤ |
| `afterCreateWithAssociations` / `afterUpdateWithAssociations` / `afterSaveWithAssociations` | –ü—ñ—Å–ª—è –æ–ø–µ—Ä–∞—Ü—ñ–π, —â–æ –≤–∫–ª—é—á–∞—é—Ç—å –∞—Å–æ—Ü—ñ–π–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ |
| `beforeDefineCollection` / `afterDefineCollection` | –î–æ / –ø—ñ—Å–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –∫–æ–ª–µ–∫—Ü—ñ–π |
| `beforeRemoveCollection` / `afterRemoveCollection` | –î–æ / –ø—ñ—Å–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∫–æ–ª–µ–∫—Ü—ñ–π |

–ü—Ä–∏–∫–ª–∞–¥: –ü—Ä–æ—Å–ª—É—Ö–æ–≤—É–≤–∞–Ω–Ω—è –ø–æ–¥—ñ—ó –ø—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö

```ts
db.on('afterCreate', async (model, options) => {
  db.logger.info('–î–∞–Ω—ñ —Å—Ç–≤–æ—Ä–µ–Ω–æ!');
});
```

–ü—Ä–∏–∫–ª–∞–¥: –ü—Ä–æ—Å–ª—É—Ö–æ–≤—É–≤–∞–Ω–Ω—è –ø–æ–¥—ñ—ó –ø–µ—Ä–µ–¥ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º –¥–∞–Ω–∏—Ö

```ts
db.on('beforeUpdate', async (model, options) => {
  db.logger.info('–î–∞–Ω—ñ –±—É–¥—É—Ç—å –æ–Ω–æ–≤–ª–µ–Ω—ñ!');
});
```