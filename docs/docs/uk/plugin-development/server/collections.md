:::tip Повідомлення про переклад ШІ
Ця документація була автоматично перекладена штучним інтелектом.
:::


# Колекції

У розробці плагінів NocoBase **колекція (таблиця даних)** є одним з ключових понять. Ви можете додавати або змінювати структури таблиць даних у плагінах, визначаючи або розширюючи колекції. На відміну від таблиць даних, створених через інтерфейс керування джерелами даних, **колекції, визначені в коді, зазвичай є системними метаданими** і не відображаються у списку керування джерелами даних.

## Визначення колекцій

Відповідно до узгодженої структури каталогів, файли колекцій слід розміщувати в каталозі `./src/server/collections`. Для створення нових таблиць використовуйте `defineCollection()`, а для розширення існуючих — `extendCollection()`.

```ts
import { defineCollection } from '@nocobase/database';

export default defineCollection({
  name: 'articles',
  title: 'Зразкові статті',
  fields: [
    { type: 'string', name: 'title', interface: 'input', uiSchema: { title: 'Заголовок', required: true } },
    { type: 'text', name: 'content', interface: 'textarea', uiSchema: { title: 'Текст' } },
    {
      type: 'belongsTo',
      name: 'author',
      target: 'users',
      foreignKey: 'authorId',
      interface: 'recordPicker',
      uiSchema: { title: 'Автор' },
    },
  ],
});
```

У наведеному вище прикладі:

- `name`: Назва таблиці (у базі даних автоматично буде створено таблицю з такою ж назвою).
- `title`: Назва, що відображається для цієї таблиці в інтерфейсі.
- `fields`: Набір полів, кожне поле містить такі атрибути, як `type`, `name` тощо.

Якщо вам потрібно додати поля або змінити конфігурацію для колекцій інших плагінів, ви можете скористатися `extendCollection()`:

```ts
import { extendCollection } from '@nocobase/database';

export default extendCollection({
  name: 'articles',
  fields: [
    {
      type: 'boolean',
      name: 'isPublished',
      defaultValue: false,
    },
  ],
});
```

Після активації плагіна система автоматично додасть поле `isPublished` до існуючої таблиці `articles`.

:::tip
Узгоджений каталог завершує завантаження до виконання методів `load()` усіх плагінів, що дозволяє уникнути проблем із залежностями, спричинених незавантаженням деяких таблиць даних.
:::

## Синхронізація структури бази даних

При першій активації плагіна система автоматично синхронізує конфігурації колекцій зі структурою бази даних. Якщо плагін вже встановлено та він працює, після додавання або зміни колекцій вам потрібно буде вручну виконати команду оновлення:

```bash
yarn nocobase upgrade
```

Якщо під час синхронізації виникнуть винятки або "брудні" дані, ви можете відновити структуру таблиці, перевстановивши застосунок:

```bash
yarn nocobase install -f
```

## Автоматичне генерування ресурсів

Після визначення колекції система автоматично генерує відповідний ресурс, над яким ви можете безпосередньо виконувати операції CRUD через API. Детальніше дивіться у розділі [Керування ресурсами](./resource-manager.md).