:::tip Повідомлення про переклад ШІ
Ця документація була автоматично перекладена штучним інтелектом.
:::


# Значення за замовчуванням

## Вступ

Значення за замовчуванням — це початкове значення поля при створенні нового запису. Ви можете встановити значення за замовчуванням для поля під час його налаштування в колекції, або вказати його для поля в блоці форми додавання. Його можна встановити як константу або змінну.

## Де можна встановити значення за замовчуванням

### Поля колекції

![20240411095933](https://static-docs.nocobase.com/20240411095933.png)

### Поля у формі додавання

Більшість полів у формі додавання підтримують встановлення значення за замовчуванням.

![20251028161801](https://static-docs.nocobase.com/20251028161801.png)

### Додавання в підформі

Додаткові дані, додані через поле підформи у формі додавання або редагування, матимуть значення за замовчуванням.

Додати нове в підформі
![20251028163455](https://static-docs.nocobase.com/20251028163455.png)

При редагуванні наявних даних порожнє поле не буде заповнено значенням за замовчуванням. Лише щойно додані дані будуть заповнені значенням за замовчуванням.

### Значення за замовчуванням для полів зв'язків

Лише зв'язки типу **«багато до одного»** та **«багато до багатьох»** мають значення за замовчуванням при використанні компонентів вибору (Select, RecordPicker).

![20251028164128](https://static-docs.nocobase.com/20251028164128.png)

## Змінні значень за замовчуванням

### Які змінні доступні

- Поточний користувач;
- Поточний запис; це стосується лише наявних записів;
- Поточна форма, в ідеалі містить лише поля форми;
- Поточний об'єкт, концепція в підформах (об'єкт даних для кожного рядка в підформі);
- Параметри URL
  Докладніше про змінні дивіться у розділі [Змінні](/interface-builder/variables)

### Змінні значень за замовчуванням для полів

Поділяються на дві категорії: поля без зв'язків та поля зв'язків.

#### Змінні значень за замовчуванням для полів зв'язків

- Об'єкт змінної має бути записом колекції;
- Це має бути колекція в ланцюжку успадкування, яка може бути поточною колекцією або батьківською/дочірньою колекцією;
- Змінна «Вибрані записи таблиці» доступна лише для полів зв'язків типу «багато до багатьох» та «один до багатьох/багато до одного»;
- **Для багаторівневих сценаріїв її потрібно вирівняти та видалити дублікати**

```typescript
// Вибрані записи таблиці:
[{id:1},{id:2},{id:3},{id:4}]

// Вибрані записи таблиці/до-одного:
[{toOne: {id:2}}, {toOne: {id:3}}, {toOne: {id:3}}]
// Вирівняти та видалити дублікати
[{id: 2}, {id: 3}]

// Вибрані записи таблиці/до-багатьох:
[{toMany: [{id: 1}, {id:2}]}, {toMany: {[id:3}, {id:4}]}]
// Вирівняти
[{id:1},{id:2},{id:3},{id:4}]
```

#### Змінні значень за замовчуванням для полів без зв'язків

- Типи мають бути узгодженими або сумісними, наприклад, рядки сумісні з числами, а також усі об'єкти, що надають метод toString;
- Поле JSON є особливим і може зберігати будь-який тип даних;

### Рівень поля (необов'язкові поля)

![20240411101157](https://static-docs.nocobase.com/20240411101157.png)

- Змінні значень за замовчуванням для полів без зв'язків
  - При виборі багаторівневих полів це обмежено зв'язками «до одного» і не підтримує зв'язки «до багатьох»;
  - Поле JSON є особливим і може бути без обмежень;

- Змінні значень за замовчуванням для полів зв'язків
  - hasOne, підтримує лише зв'язки «до одного»;
  - hasMany, підтримує як «до одного» (внутрішнє перетворення), так і «до багатьох»;
  - belongsToMany, підтримує як «до одного» (внутрішнє перетворення), так і «до багатьох»;
  - belongsTo, зазвичай для «до одного», але коли батьківський зв'язок є hasMany, він також підтримує «до багатьох» (оскільки hasMany/belongsTo по суті є зв'язком «багато до багатьох»);

## Особливі випадки

### «Багато до багатьох» еквівалентно комбінації «один до багатьох/багато до одного»

Модель

![20240411101558](https://static-docs.nocobase.com/20240411101558.png)

### Чому зв'язки «один до одного» та «один до багатьох» не мають значень за замовчуванням?

Наприклад, у зв'язку A.B, якщо b1 пов'язаний з a1, він не може бути пов'язаний з a2. Якщо b1 стане пов'язаним з a2, його зв'язок з a1 буде розірвано. У цьому випадку дані не є спільними, тоді як значення за замовчуванням є спільним механізмом (усі можуть бути пов'язані). Отже, зв'язки «один до одного» та «один до багатьох» не можуть мати значень за замовчуванням.

### Чому підформи або підтаблиці «багато до одного» та «багато до багатьох» не можуть мати значень за замовчуванням?

Оскільки основна увага підформ і підтаблиць зосереджена на прямому редагуванні даних зв'язків (включно з додаванням та видаленням), тоді як значення за замовчуванням для зв'язків є спільним механізмом, де всі можуть бути пов'язані, але дані зв'язків не можуть бути змінені. Тому в цьому сценарії недоцільно надавати значення за замовчуванням.

Крім того, підформи або підтаблиці мають підполя, і було б незрозуміло, чи є значення за замовчуванням для підформи або підтаблиці значенням за замовчуванням для рядка чи для стовпця.

Враховуючи всі фактори, доцільніше, щоб підформи або підтаблиці не могли мати безпосередньо встановлених значень за замовчуванням, незалежно від типу зв'язку.