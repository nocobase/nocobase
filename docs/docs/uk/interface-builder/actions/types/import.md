---
pkg: "@nocobase/plugin-action-import"
---
:::tip Повідомлення про переклад ШІ
Ця документація була автоматично перекладена штучним інтелектом.
:::

# Імпорт

## Вступ

Ви можете імпортувати дані за допомогою шаблону Excel. Налаштуйте, які поля імпортувати, і шаблон буде згенеровано автоматично.

![20251029165818](https://static-docs.nocobase.com/20251029165818.png)

## Інструкції з імпорту

### Поля числового типу

Підтримуються числа та відсотки. Текст, такий як `N/A` або `-`, буде відфільтровано.

| Число1 | Відсоток | Число2 | Число3 |
| ----- | ------ | ----- | ----- |
| 123   | 25%    | N/A   | -     |

Після перетворення в JSON:

```ts
{
  "Number1": 123,
  "Percentage": 0.25,
  "Number2": null,
  "Number3": null
}
```

### Поля логічного типу

Підтримується введення тексту (англійська мова не чутлива до регістру):

- `Yes`, `Y`, `True`, `1`, `Так`
- `No`, `N`, `False`, `0`, `Ні`

| Поле1 | Поле2 | Поле3 | Поле4 | Поле5 |
| ----- | ----- | ----- | ----- | ----- |
| Ні    | Так   | Y     | true  | 0     |

Після перетворення в JSON:

```ts
{
  "Field1": false,
  "Field2": true,
  "Field3": true,
  "Field4": true,
  "Field5": false
}
```

### Поля типу "Дата"

| DateOnly            | Local(+08:00)       | GMT                 |
| ------------------- | ------------------- | ------------------- |
| 2023-01-18 22:22:22 | 2023-01-18 22:22:22 | 2023-01-18 22:22:22 |

Після перетворення в JSON:

```ts
{
  "DateOnly": "2023-01-18T00:00:00.000Z",
  "Local(+08:00)": "2023-01-18T14:22:22.000Z",
  "GMT": "2023-01-18T22:22:22.000Z"
}
```

### Поля типу "Вибір"

Як текст для імпорту можна використовувати як значення опцій, так і їхні мітки. Кілька опцій розділяються комами (`,` `，`) або переліковими комами (`、`).

Наприклад, доступні опції для поля `Пріоритет` включають:

| Значення опції | Мітка опції |
| ------------ | -------- |
| low          | Низький     |
| medium       | Середній    |
| high         | Високий     |

Як текст для імпорту можна використовувати як значення опцій, так і їхні мітки.

| Пріоритет |
| -------- |
| Високий  |
| low      |

Після перетворення в JSON:

```ts
[{ "Priority": "high" }, { "Priority": "low" }]
```

### Поля адміністративних одиниць Китаю

| Регіон1       | Регіон2       |
| ------------- | ------------- |
| 北京市/市辖区 | 天津市/市辖区 |

Після перетворення в JSON:

```ts
{
  "Region1": ["11", "1101"],
  "Region2": ["12", "1201"]
}
```

### Поля вкладень

| Вкладення                                |
| ---------------------------------------- |
| https://www.nocobase.com/images/logo.png |

Після перетворення в JSON:

```ts
{
  "Attachment": [
    {
      "filename": "logo.png",
      "title": "logo.png",
      "extname": ".png",
      "url": "https://www.nocobase.com/images/logo.png"
    }
  ]
}
```

### Поля типу "Зв'язок"

Кілька записів даних розділяються комами (`,` `，`) або переліковими комами (`、`).

| Відділ/Назва     | Категорія/Заголовок |
| ---------------- | ------------------- |
| Команда розробки | Категорія1、Категорія2 |

Після перетворення в JSON:

```ts
{
  "Department": [1], // 1 — це ID запису для відділу з назвою "Команда розробки"
  "Category": [1, 2] // 1,2 — це ID записів для категорій з заголовками "Категорія1" та "Категорія2"
}
```

### Поля типу "JSON"

| JSON1           |
| --------------- |
| {"key":"value"} |

Після перетворення в JSON:

```ts
{
  "JSON": { "key": "value" }
}
```

### Типи геометрії карти

| Point | Line        | Polygon           | Circle |
| ----- | ----------- | ----------------- | ------ |
| 1,2   | (1,2),(3,4) | (1,2),(3,4),(1,2) | 1,2,3  |

Після перетворення в JSON:

```ts
{
  "Point": [1, 2],
  "Line": [[1, 2], [3, 4]],
  "Polygon": [[1, 2], [3, 4], [1, 2]],
  "Circle": [1, 2, 3]
}
```

## Користувацький формат імпорту

Зареєструйте власний `ValueParser` за допомогою методу `db.registerFieldValueParsers()`, наприклад:

```ts
import { BaseValueParser } from '@nocobase/database';

class PointValueParser extends BaseValueParser {
  async setValue(value) {
    if (Array.isArray(value)) {
      this.value = value;
    } else if (typeof value === 'string') {
      this.value = value.split(',');
    } else {
      this.errors.push('Value invalid');
    }
  }
}

const db = new Database();

// При імпорті поля типу=point дані будуть розпарсені за допомогою PointValueParser
db.registerFieldValueParsers({
  point: PointValueParser,
});
```

Приклад імпорту

| Point |
| ----- |
| 1,2   |

Після перетворення в JSON:

```ts
{
  "Point": [1, 2]
}
```

## Налаштування дії

![20251029170959](https://static-docs.nocobase.com/20251029170959.png)

- Налаштуйте поля, які можна імпортувати

![20251029171036](https://static-docs.nocobase.com/20251029171036.png)

- [Правила зв'язування](/interface-builder/actions/action-settings/linkage-rule): Динамічно показуйте/приховуйте кнопку;
- [Редагувати кнопку](/interface-builder/actions/action-settings/edit-button): Редагуйте заголовок, тип та іконку кнопки;