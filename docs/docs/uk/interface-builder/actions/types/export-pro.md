---
pkg: "@nocobase/plugin-action-export-pro"
---
:::tip Повідомлення про переклад ШІ
Ця документація була автоматично перекладена штучним інтелектом.
:::

# Експорт Pro

## Вступ

Плагін Експорт Pro розширює стандартні можливості експорту, надаючи додаткові функції.

## Встановлення

Цей плагін залежить від плагіна "Керування асинхронними завданнями". Перед використанням Експорт Pro необхідно активувати плагін "Керування асинхронними завданнями".

## Покращені можливості

- Підтримує асинхронні операції експорту, які виконуються в окремому потоці, що дозволяє експортувати великі обсяги даних.
- Підтримує експорт вкладень.

## Посібник користувача

### Налаштування режиму експорту

![20251029172829](https://static-docs.nocobase.com/20251029172829.png)

![20251029172914](https://static-docs.nocobase.com/20251029172914.png)

На кнопці експорту можна налаштувати режим експорту. Доступні три режими:

- **Автоматичний**: Режим експорту визначається обсягом даних. Якщо кількість записів менше 1000 (або 100 для експорту вкладень), використовується синхронний експорт. Якщо кількість записів перевищує 1000 (або 100 для експорту вкладень), використовується асинхронний експорт.
- **Синхронний**: Використовує синхронний експорт, який виконується в основному потоці. Він підходить для невеликих обсягів даних. Експорт великих обсягів даних у синхронному режимі може призвести до блокування системи, зависання та неможливості обробляти запити інших користувачів.
- **Асинхронний**: Використовує асинхронний експорт, який виконується в окремому фоновому потоці та не блокує роботу поточної системи.

### Асинхронний експорт

Після запуску експорту процес виконуватиметься в окремому фоновому потоці, не вимагаючи ручного налаштування користувачем. В інтерфейсі користувача, після початку операції експорту, у верхньому правому куті відображатиметься поточне завдання експорту з відображенням прогресу в реальному часі.

![20251029173028](https://static-docs.nocobase.com/20251029173028.png)

Після завершення експорту ви можете завантажити експортований файл із завдань експорту.

#### Паралельний експорт
Велика кількість паралельних завдань експорту може впливати на конфігурацію сервера, що призводить до уповільнення відгуку системи. Тому системним розробникам рекомендується налаштувати максимальну кількість паралельних завдань експорту (за замовчуванням 3). Коли кількість паралельних завдань перевищує встановлений ліміт, нові завдання стають у чергу.
![20250505171706](https://static-docs.nocobase.com/20250505171706.png)

Спосіб налаштування паралельності: Змінна середовища `ASYNC_TASK_MAX_CONCURRENCY=кількість_паралельних_завдань`

На основі комплексного тестування з різними конфігураціями та складністю даних, рекомендована кількість паралельних завдань:
- 2-ядерний процесор, 3 паралельні завдання.
- 4-ядерний процесор, 5 паралельних завдань.

#### Продуктивність
Якщо ви помітили, що процес експорту відбувається надзвичайно повільно (див. нижче), це може бути проблема продуктивності, спричинена структурою колекції.

| Характеристики даних | Тип індексу | Обсяг даних | Тривалість експорту |
|---------|---------|--------|---------|
| Поля без зв'язків | Первинний ключ / Унікальне обмеження | 1 мільйон | 3～6 хвилин |
| Поля без зв'язків | Звичайний індекс | 1 мільйон | 6～10 хвилин |
| Поля без зв'язків | Композитний індекс (неунікальний) | 1 мільйон | 30 хвилин |
| Поля зв'язків<br>(Один-до-одного, Один-до-багатьох,<br>Багато-до-одного, Багато-до-багатьох) | Первинний ключ / Унікальне обмеження | 500 тисяч | 15～30 хвилин | Поля зв'язків знижують продуктивність |

Щоб забезпечити ефективний експорт, рекомендуємо:
1. Колекція повинна відповідати наступним умовам:

| Тип умови | Обов'язкова умова | Інші примітки |
|---------|------------------------|------|
| Структура колекції (виконати хоча б одну) | Має первинний ключ<br>Має унікальне обмеження<br>Має індекс (унікальний, звичайний, композитний) | Пріоритет: Первинний ключ > Унікальне обмеження > Індекс
| Характеристики поля | Первинний ключ / Унікальне обмеження / Індекс (одне з них) повинні мати властивості, що дозволяють сортування, наприклад: автоінкрементний ID, Snowflake ID, UUID v1, мітка часу, число тощо.<br>(Примітка: Несортовані поля, такі як UUID v3/v4/v5, звичайні рядки тощо, впливатимуть на продуктивність) | Немає |

2. Зменшіть кількість непотрібних полів для експорту, особливо полів зв'язків (проблеми продуктивності, спричинені полями зв'язків, все ще оптимізуються).
![20250506215940](https://static-docs.nocobase.com/20250506215940.png)
3. Якщо експорт все ще повільний після виконання вищезазначених умов, ви можете проаналізувати журнали або надати відгук офіційній команді.
![20250505182122](https://static-docs.nocobase.com/20250505182122.png)

- [Правило зв'язування](/interface-builder/actions/action-settings/linkage-rule): Динамічне відображення/приховування кнопки;
- [Редагувати кнопку](/interface-builder/actions/action-settings/edit-button): Редагування заголовка, типу та іконки кнопки;