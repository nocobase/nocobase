:::tip Повідомлення про переклад ШІ
Ця документація була автоматично перекладена штучним інтелектом.
:::


# Потік подій

## Вступ

Якщо ви хочете запускати власні дії при зміні форми, ви можете скористатися потоком подій. Окрім форм, сторінки, блоки, кнопки та поля також можуть використовувати потоки подій для налаштування власних операцій.

## Як використовувати

Давайте розглянемо простий приклад, щоб зрозуміти, як налаштувати потік подій. Ми реалізуємо зв'язок між двома таблицями: при натисканні на рядок у лівій таблиці дані в правій таблиці автоматично фільтруватимуться.

![20251031092211_rec_](https://static-docs.nocobase.com/20251031092211_rec_.gif)

Кроки налаштування:

1. Натисніть іконку «блискавка» у верхньому правому куті блоку лівої таблиці, щоб відкрити панель налаштування потоку подій.
![20251031092425](https://static-docs.nocobase.com/20251031092425.png)
2. Натисніть «Додати потік подій (Add event flow)», виберіть «Клік по рядку (Row click)» як «Подія-тригер (Trigger event)», що означає, що потік буде запускатися при натисканні на рядок таблиці.
![20251031092637](https://static-docs.nocobase.com/20251031092637.png)
3. «Умова-тригер (Trigger condition)» використовується для налаштування умов. Потік подій запускатиметься лише тоді, коли ці умови будуть виконані. У цьому випадку нам не потрібно нічого налаштовувати, тому потік запускатиметься при будь-якому кліку по рядку.
![20251031092717](https://static-docs.nocobase.com/20251031092717.png)
4. Наведіть курсор на «Додати крок (Add step)», щоб додати кроки операції. Виберіть «Встановити область даних (Set data scope)», щоб налаштувати область даних для правої таблиці.
![20251031092755](https://static-docs.nocobase.com/20251031092755.png)
5. Скопіюйте UID правої таблиці та вставте його в поле введення «UID цільового блоку (Target block UID)». Нижче одразу з'явиться панель налаштування умов, де ви можете налаштувати область даних для правої таблиці.
![20251031092915](https://static-docs.nocobase.com/20251031092915.png)
6. Налаштуйте умову, як показано нижче:
![20251031093233](https://static-docs.nocobase.com/20251031093233.png)
7. Після налаштування області даних вам потрібно оновити блок, щоб відобразити відфільтровані результати. Додайте крок «Оновити цільові блоки (Refresh target blocks)» і введіть UID правої таблиці.
![20251031093150](https://static-docs.nocobase.com/20251031093150.png)
![20251031093341](https://static-docs.nocobase.com/20251031093341.png)
8. Нарешті, натисніть кнопку «Зберегти» у нижньому правому куті, щоб завершити налаштування.

## Типи подій

### Перед рендерингом (Before render)

Універсальна подія, яку можна використовувати на сторінках, у блоках, кнопках або полях. Ця подія дозволяє виконувати завдання ініціалізації, наприклад, налаштовувати різні області даних залежно від умов.

### Клік по рядку (Row click)

Подія, специфічна для блоків таблиць. Запускається при натисканні на рядок таблиці. При спрацьовуванні додає «Запис натиснутого рядка (Clicked row record)» до контексту, який можна використовувати як змінну в умовах і кроках.

### Зміна значень форми (Form values change)

Подія, специфічна для блоків форм. Запускається при зміні значень полів форми. Ви можете отримати значення форми через змінну «Поточна форма (Current form)» в умовах і кроках.

### Клік (Click)

Подія, специфічна для кнопок. Запускається при натисканні на кнопку.

## Типи кроків

### Власна змінна (Custom variable)

Створіть власну змінну для використання в контексті.

#### Область видимості

Власні змінні мають область видимості. Наприклад, змінна, визначена в потоці подій блоку, може використовуватися лише в цьому блоці. Щоб зробити змінну доступною для всіх блоків на поточній сторінці, її потрібно налаштувати в потоці подій сторінки.

#### Змінна форми (Form variable)

Використовуйте значення з блоку форми як змінну. Налаштування:

![20251031093516](https://static-docs.nocobase.com/20251031093516.png)

- Variable title: Заголовок змінної
- Variable identifier: Ідентифікатор змінної
- Form UID: UID форми

#### Інші змінні

Інші типи змінних будуть підтримуватися в майбутньому. Слідкуйте за оновленнями.

### Встановити область даних (Set data scope)

Встановіть область даних для цільового блоку. Налаштування:

![20251031093609](https://static-docs.nocobase.com/20251031093609.png)

- Target block UID: UID цільового блоку
- Condition: Умова фільтрації

### Оновити цільові блоки (Refresh target blocks)

Оновіть цільові блоки. Можна налаштувати кілька блоків. Налаштування:

![20251031093657](https://static-docs.nocobase.com/20251031093657.png)

- Target block UID: UID цільового блоку

### Перехід за URL (Navigate to URL)

Перейдіть за URL-адресою. Налаштування:

![20251031093742](https://static-docs.nocobase.com/20251031093742.png)

- URL: Цільова URL-адреса, підтримує змінні
- Search parameters: Параметри запиту в URL-адресі
- Open in new window: Якщо позначено, відкриває URL-адресу в новій вкладці браузера.

### Показати повідомлення (Show message)

Відображайте глобальні повідомлення зворотного зв'язку про операції.

#### Коли використовувати

- Надавайте повідомлення про успіх, попередження та помилки.
- Відображається по центру вгорі та автоматично зникає, забезпечуючи легкий спосіб сповіщення, не перериваючи дії користувача.

#### Налаштування

![20251031093825](https://static-docs.nocobase.com/20251031093825.png)

- Message type: Тип повідомлення
- Message content: Зміст повідомлення
- Duration: Тривалість відображення (у секундах)

### Показати сповіщення (Show notification)

Відображайте глобальні сповіщення.

#### Коли використовувати

Відображайте сповіщення в чотирьох кутах системи. Часто використовується для:

- Складного змісту сповіщень.
- Інтерактивних сповіщень, що надають користувачам наступні кроки.
- Системних сповіщень.

#### Налаштування

![20251031093934](https://static-docs.nocobase.com/20251031093934.png)

- Notification type: Тип сповіщення
- Notification title: Заголовок сповіщення
- Notification description: Опис сповіщення
- Placement: Розташування, варіанти: вгорі ліворуч, вгорі праворуч, внизу ліворуч, внизу праворуч

### Виконати JavaScript (Execute JavaScript)

![20251031094046](https://static-docs.nocobase.com/20251031094046.png)

Виконайте код JavaScript.