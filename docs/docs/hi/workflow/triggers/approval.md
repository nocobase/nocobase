---
pkg: '@nocobase/plugin-workflow-approval'
---
:::tip
यह दस्तावेज़ AI द्वारा अनुवादित किया गया है। किसी भी अशुद्धि के लिए, कृपया [अंग्रेजी संस्करण](/en) देखें
:::


# अनुमोदन

## परिचय

अनुमोदन एक ऐसी प्रक्रिया है जिसे विशेष रूप से मनुष्यों द्वारा शुरू किया जाता है और मनुष्यों द्वारा ही संसाधित किया जाता है ताकि संबंधित डेटा की स्थिति तय की जा सके। इसका उपयोग आमतौर पर कार्यालय स्वचालन या अन्य मानवीय निर्णय लेने वाले कार्यों के लिए प्रक्रिया प्रबंधन में किया जाता है, जैसे कि 'छुट्टी के आवेदन', 'खर्च प्रतिपूर्ति अनुमोदन' और 'कच्चे माल की खरीद अनुमोदन' जैसे परिदृश्यों के लिए मानवीय **वर्कफ़्लो** बनाना और प्रबंधित करना।

अनुमोदन **प्लगइन** एक समर्पित **वर्कफ़्लो** प्रकार (ट्रिगर) 'अनुमोदन (इवेंट)' और इस प्रक्रिया के लिए एक समर्पित 'अनुमोदन' नोड प्रदान करता है। NocoBase के अनूठे कस्टम **संग्रह** और कस्टम ब्लॉक के साथ मिलकर, आप विभिन्न प्रकार के अनुमोदन परिदृश्यों को तेज़ी से और लचीले ढंग से बना और प्रबंधित कर सकते हैं।

## **वर्कफ़्लो** बनाएँ

**वर्कफ़्लो** बनाते समय, 'अनुमोदन' प्रकार चुनें, और आप एक अनुमोदन **वर्कफ़्लो** बना सकते हैं:

![अनुमोदन ट्रिगर_अनुमोदन वर्कफ़्लो बनाएँ](https://static-docs.nocobase.com/f52dda854f46a669e0c1c7fb487a17ea.png)

इसके बाद, **वर्कफ़्लो** कॉन्फ़िगरेशन इंटरफ़ेस में ट्रिगर पर क्लिक करके एक पॉप-अप विंडो खोलें और अधिक कॉन्फ़िगरेशन करें।

## ट्रिगर कॉन्फ़िगरेशन

### **संग्रह** को बाइंड करें

NocoBase का अनुमोदन **प्लगइन** लचीलेपन के डिज़ाइन पर आधारित है और इसे किसी भी कस्टम **संग्रह** के साथ उपयोग किया जा सकता है। इसका मतलब है कि अनुमोदन कॉन्फ़िगरेशन को डेटा मॉडल को फिर से कॉन्फ़िगर करने की आवश्यकता नहीं है, बल्कि यह सीधे मौजूदा **संग्रह** का पुन: उपयोग करता है। इसलिए, ट्रिगर कॉन्फ़िगरेशन में प्रवेश करने के बाद, आपको सबसे पहले एक **संग्रह** का चयन करना होगा ताकि यह तय किया जा सके कि यह प्रक्रिया किस **संग्रह** के डेटा के बनने या अपडेट होने पर ट्रिगर होगी:

![अनुमोदन ट्रिगर_ट्रिगर कॉन्फ़िगरेशन_संग्रह चुनें](https://static-docs.nocobase.com/8732a4419b1e28d2752b8f601132c82d.png)

फिर, संबंधित **संग्रह** के डेटा को बनाने (या संपादित करने) के फ़ॉर्म में इस **वर्कफ़्लो** को सबमिट बटन से बाइंड करें:

![अनुमोदन शुरू करें_वर्कफ़्लो बाइंड करें](https://static-docs.nocobase.com/2872ff108c61d7bf6d0bfb19886774c6.png)

इसके बाद, जब कोई उपयोगकर्ता इस फ़ॉर्म को सबमिट करता है, तो संबंधित अनुमोदन **वर्कफ़्लो** ट्रिगर हो जाएगा। सबमिट किया गया डेटा न केवल संबंधित **संग्रह** में सहेजा जाता है, बल्कि बाद में अनुमोदन करने वालों द्वारा समीक्षा और उपयोग के लिए अनुमोदन प्रवाह में भी स्नैपशॉट किया जाता है।

### वापस लेना

यदि कोई अनुमोदन **वर्कफ़्लो** आरंभकर्ता को इसे वापस लेने की अनुमति देता है, तो आपको आरंभकर्ता के इंटरफ़ेस कॉन्फ़िगरेशन में 'वापस लेना' बटन को सक्षम करना होगा:

![अनुमोदन ट्रिगर_ट्रिगर कॉन्फ़िगरेशन_वापस लेने की अनुमति दें](https://static-docs.nocobase.com/20251029232544.png)

एक बार सक्षम होने के बाद, इस **वर्कफ़्लो** द्वारा शुरू किया गया अनुमोदन किसी भी अनुमोदनकर्ता द्वारा संसाधित किए जाने से पहले आरंभकर्ता द्वारा वापस लिया जा सकता है। हालांकि, किसी भी बाद के अनुमोदन नोड में कॉन्फ़िगर किए गए अनुमोदनकर्ता द्वारा इसे संसाधित किए जाने के बाद, इसे वापस नहीं लिया जा सकेगा।

:::info{title=टिप}
वापस लेने वाले बटन को सक्षम या हटाने के बाद, परिवर्तनों को प्रभावी होने के लिए आपको ट्रिगर कॉन्फ़िगरेशन डायलॉग में सहेजें और सबमिट करें पर क्लिक करना होगा।
:::

### अनुमोदन आरंभकर्ता के फ़ॉर्म इंटरफ़ेस का कॉन्फ़िगरेशन

अंत में, आपको आरंभकर्ता के फ़ॉर्म इंटरफ़ेस को कॉन्फ़िगर करना होगा। इस इंटरफ़ेस का उपयोग अनुमोदन केंद्र ब्लॉक से शुरू करते समय और उपयोगकर्ता द्वारा वापस लेने के बाद फिर से शुरू करते समय सबमिशन कार्यों के लिए किया जाएगा। डायलॉग खोलने के लिए कॉन्फ़िगर बटन पर क्लिक करें:

![अनुमोदन ट्रिगर_ट्रिगर कॉन्फ़िगरेशन_आरंभकर्ता फ़ॉर्म](https://static-docs.nocobase.com/ca8b7e362d912138cf7d73bb60b37ac1.png)

आप आरंभकर्ता के इंटरफ़ेस के लिए बाइंड किए गए **संग्रह** के आधार पर एक भरने वाला फ़ॉर्म जोड़ सकते हैं, या संकेतों और मार्गदर्शन के लिए वर्णनात्मक टेक्स्ट (Markdown) जोड़ सकते हैं। फ़ॉर्म जोड़ना अनिवार्य है; अन्यथा, आरंभकर्ता इस इंटरफ़ेस में प्रवेश करने पर कोई कार्रवाई नहीं कर पाएगा।

फ़ॉर्म ब्लॉक जोड़ने के बाद, सामान्य फ़ॉर्म कॉन्फ़िगरेशन इंटरफ़ेस की तरह, आप संबंधित **संग्रह** से फ़ील्ड घटक जोड़ सकते हैं और फ़ॉर्म में भरी जाने वाली सामग्री को व्यवस्थित करने के लिए उन्हें अपनी इच्छानुसार व्यवस्थित कर सकते हैं:

![अनुमोदन ट्रिगर_ट्रिगर कॉन्फ़िगरेशन_आरंभकर्ता फ़ॉर्म_फ़ील्ड कॉन्फ़िगरेशन](https://static-docs.nocobase.com/5a1e7f9c9d8de092c7b55585dad7d633.png)

सीधे सबमिट बटन के अलावा, आप एक 'ड्राफ़्ट के रूप में सहेजें' कार्रवाई बटन भी जोड़ सकते हैं ताकि अस्थायी भंडारण प्रक्रिया का समर्थन किया जा सके:

![अनुमोदन ट्रिगर_ट्रिगर कॉन्फ़िगरेशन_आरंभकर्ता फ़ॉर्म_कार्रवाई कॉन्फ़िगरेशन](https://static-docs.nocobase.com/2f4850d2078e94538995a9df70d3d2d1.png)

## अनुमोदन नोड

एक अनुमोदन **वर्कफ़्लो** में, अनुमोदनकर्ताओं के लिए शुरू किए गए अनुमोदन को संसाधित करने (अनुमोदित करने, अस्वीकार करने या वापस भेजने) के लिए परिचालन तर्क को कॉन्फ़िगर करने हेतु एक समर्पित 'अनुमोदन' नोड का उपयोग करना आवश्यक है। 'अनुमोदन' नोड का उपयोग केवल अनुमोदन प्रक्रियाओं में ही किया जा सकता है। विवरण के लिए [अनुमोदन नोड](../nodes/approval.md) देखें।

## अनुमोदन आरंभ करने का कॉन्फ़िगरेशन

एक अनुमोदन **वर्कफ़्लो** को कॉन्फ़िगर और सक्षम करने के बाद, आप इसे संबंधित **संग्रह** के फ़ॉर्म के सबमिट बटन से बाइंड कर सकते हैं, जिससे उपयोगकर्ता सबमिशन पर अनुमोदन शुरू कर सकें:

![अनुमोदन शुरू करें_वर्कफ़्लो बाइंड करें](https://static-docs.nocobase.com/2872ff108c61d7bf6d0bfb19886774c6.png)

**वर्कफ़्लो** को बाइंड करने के बाद, जब कोई उपयोगकर्ता वर्तमान फ़ॉर्म सबमिट करता है, तो एक अनुमोदन शुरू हो जाता है।

:::info{title=टिप}
अनुमोदन शुरू करने वाला बटन वर्तमान में केवल नए या अपडेट फ़ॉर्म में 'सबमिट' (या 'सहेजें') बटन का उपयोग करने का समर्थन करता है। यह '**वर्कफ़्लो** में सबमिट करें' बटन का समर्थन नहीं करता है (यह बटन केवल 'कार्रवाई के बाद की घटना' से बाइंड किया जा सकता है)।
:::

## कार्य केंद्र

कार्य केंद्र उपयोगकर्ताओं को अपने लंबित कार्यों को देखने और संसाधित करने के लिए एक एकीकृत प्रवेश बिंदु प्रदान करता है। वर्तमान उपयोगकर्ता द्वारा शुरू किए गए अनुमोदन और उनके लंबित कार्यों को शीर्ष टूलबार में कार्य केंद्र के माध्यम से एक्सेस किया जा सकता है, और विभिन्न प्रकार के लंबित कार्यों को बाईं ओर के वर्गीकरण नेविगेशन के माध्यम से देखा जा सकता है।

![20250310161203](https://static-docs.nocobase.com/20250310161203.png)

### मेरे द्वारा शुरू किए गए

#### शुरू किए गए अनुमोदन देखें

![20250310161609](https://static-docs.nocobase.com/20250310161609.png)

#### सीधे नया अनुमोदन शुरू करें

![20250310161658](https://static-docs.nocobase.com/20250310161658.png)

### मेरे लंबित कार्य

#### लंबित कार्यों की सूची

![20250310161934](https://static-docs.nocobase.com/20250310161934.png)

#### लंबित कार्यों का विवरण

![20250310162111](https://static-docs.nocobase.com/20250310162111.png)

## HTTP API

### आरंभकर्ता

#### **संग्रह** से आरंभ करें

एक डेटा ब्लॉक से आरंभ करने के लिए, आप इस तरह से कॉल कर सकते हैं (उदाहरण के तौर पर `posts` **संग्रह** के क्रिएट बटन का उपयोग करके):

```bash
curl -X POST -H 'Authorization: Bearer <your token>' -H 'X-Role: <roleName>' -d \
  '{
    "title": "Hello, world!",
    "content": "This is a test post."
  }'
  "http://localhost:3000/api/posts:create?triggerWorkflows=workflowKey"
```

यहां, URL पैरामीटर `triggerWorkflows` **वर्कफ़्लो** की कुंजी है; कई **वर्कफ़्लो** कुंजियों को अल्पविराम से अलग किया जाता है। यह कुंजी **वर्कफ़्लो** कैनवास के शीर्ष पर **वर्कफ़्लो** नाम पर माउस को घुमाने पर प्राप्त की जा सकती है:

![वर्कफ़्लो_कुंजी_देखने का तरीका](https://static-docs.nocobase.com/20240426135108.png)

सफल कॉल पर, संबंधित `posts` **संग्रह** के लिए अनुमोदन **वर्कफ़्लो** ट्रिगर हो जाएगा।

:::info{title="टिप"}
चूंकि बाहरी कॉल को भी उपयोगकर्ता पहचान पर आधारित होना चाहिए, इसलिए HTTP API के माध्यम से कॉल करते समय, सामान्य इंटरफ़ेस से भेजे गए अनुरोधों की तरह, प्रमाणीकरण जानकारी प्रदान की जानी चाहिए, जिसमें `Authorization` अनुरोध हेडर या `token` पैरामीटर (लॉगिन पर प्राप्त टोकन), और `X-Role` अनुरोध हेडर (उपयोगकर्ता की वर्तमान भूमिका का नाम) शामिल हैं।
:::

यदि आपको इस कार्रवाई में एक-से-एक संबंधित डेटा (एक-से-कई अभी समर्थित नहीं है) के लिए एक इवेंट ट्रिगर करने की आवश्यकता है, तो आप पैरामीटर में `!` का उपयोग करके संबंध फ़ील्ड के लिए ट्रिगर डेटा निर्दिष्ट कर सकते हैं:

```bash
curl -X POST -H 'Authorization: Bearer <your token>' -H 'X-Role: <roleName>' -d \
  '{
    "title": "Hello, world!",
    "content": "This is a test post.",
    "category": {
      "title": "Test category"
    }
  }'
  "http://localhost:3000/api/posts:create?triggerWorkflows=workflowKey!category"
```

उपरोक्त कॉल सफल होने पर, संबंधित `categories` **संग्रह** के लिए अनुमोदन इवेंट ट्रिगर हो जाएगा।

:::info{title="टिप"}
HTTP API के माध्यम से कार्रवाई के बाद के इवेंट को ट्रिगर करते समय, आपको **वर्कफ़्लो** की सक्षम स्थिति और **संग्रह** कॉन्फ़िगरेशन के मिलान पर भी ध्यान देना होगा; अन्यथा, कॉल सफल नहीं हो सकती है या त्रुटि हो सकती है।
:::

#### अनुमोदन केंद्र से आरंभ करें

```bash
curl -X POST -H 'Authorization: Bearer <your token>' -H 'X-Role: <roleName>' -d \
  '{
    "collectionName": "<collection name>",
    "workflowId": <workflow id>,
    "data": { "<field>": "<value>" },
    "status": <initial approval status>,
  }'
  "http://localhost:3000/api/approvals:create"
```

**पैरामीटर**

*   `collectionName`: अनुमोदन आरंभ करने के लिए लक्ष्य **संग्रह** का नाम, अनिवार्य।
*   `workflowId`: अनुमोदन आरंभ करने के लिए उपयोग किए जाने वाले **वर्कफ़्लो** की ID, अनिवार्य।
*   `data`: अनुमोदन आरंभ करते समय बनाए गए **संग्रह** रिकॉर्ड के फ़ील्ड, अनिवार्य।
*   `status`: अनुमोदन आरंभ करते समय बनाए गए रिकॉर्ड की स्थिति, अनिवार्य। संभावित मानों में शामिल हैं:
    *   `0`: ड्राफ़्ट, अनुमोदन के लिए सबमिट किए बिना सहेजने को दर्शाता है।
    *   `1`: अनुमोदन के लिए सबमिट करें, आरंभकर्ता द्वारा अनुमोदन अनुरोध सबमिट करने और अनुमोदन प्रक्रिया में प्रवेश करने को दर्शाता है।

#### सहेजें और सबमिट करें

जब कोई आरंभ किया गया (या वापस लिया गया) अनुमोदन ड्राफ़्ट स्थिति में होता है, तो आप निम्न API के माध्यम से इसे फिर से सहेज या सबमिट कर सकते हैं:

```bash
curl -X POST -H 'Authorization: Bearer <your token>' -H 'X-Role: <roleName>' -d \
  '{
    "data": { "<field>": "<value>" },
    "status": 2
  }'
  "http://localhost:3000/api/approvals:update/<approval id>"
```

#### शुरू किए गए अनुमोदनों की सूची प्राप्त करें

```bash
curl -X GET -H 'Authorization: Bearer <your token>' -H 'X-Role: <roleName>' \
  "http://localhost:3000/api/approvals:listMine"
```

#### वापस लेना

आरंभकर्ता निम्न API के माध्यम से वर्तमान में अनुमोदन में मौजूद रिकॉर्ड को वापस ले सकता है:

```bash
curl -X POST -H 'Authorization: Bearer <your token>' -H 'X-Role: <roleName>' -d \
  "http://localhost:3000/api/approvals:withdraw/<approval id>"
```

**पैरामीटर**

*   `<approval id>`: वापस लिए जाने वाले अनुमोदन रिकॉर्ड की ID, अनिवार्य।

### अनुमोदनकर्ता

अनुमोदन **वर्कफ़्लो** के अनुमोदन नोड में प्रवेश करने के बाद, वर्तमान अनुमोदनकर्ता के लिए एक लंबित कार्य बनाया जाता है। अनुमोदनकर्ता इंटरफ़ेस ऑपरेशन के माध्यम से या HTTP API कॉल के माध्यम से अनुमोदन कार्य को पूरा कर सकता है।

#### अनुमोदन प्रसंस्करण रिकॉर्ड प्राप्त करें

लंबित कार्य अनुमोदन प्रसंस्करण रिकॉर्ड होते हैं। आप निम्न API के माध्यम से वर्तमान उपयोगकर्ता के सभी अनुमोदन प्रसंस्करण रिकॉर्ड प्राप्त कर सकते हैं:

```bash
curl -X GET -H 'Authorization: Bearer <your token>' \
  "http://localhost:3000/api/approvalRecords:listMine"
```

यहां, `approvalRecords` एक **संग्रह** संसाधन के रूप में, आप सामान्य क्वेरी शर्तों का भी उपयोग कर सकते हैं, जैसे `filter`, `sort`, `pageSize` और `page`।

#### एकल अनुमोदन प्रसंस्करण रिकॉर्ड प्राप्त करें

```bash
curl -X GET -H 'Authorization: Bearer <your token>' \
  "http://localhost:3000/api/approvalRecords:get/<record id>"
```

#### अनुमोदित करें और अस्वीकार करें

```bash
curl -X POST -H 'Authorization: Bearer <your token>' -d \
  '{
    "status": 2,
    "comment": "Looks good to me.",
    "data": { "<field to modify>": "<value>" }
  }'
  "http://localhost:3000/api/approvalRecords:submit/<record id>"
```

**पैरामीटर**

*   `<record id>`: संसाधित किए जाने वाले अनुमोदन रिकॉर्ड की ID, अनिवार्य।
*   `status`: अनुमोदन प्रक्रिया की स्थिति के लिए फ़ील्ड। `2` 'अनुमोदित करें' के लिए, `-1` 'अस्वीकार करें' के लिए, अनिवार्य।
*   `comment`: अनुमोदन प्रक्रिया के लिए टिप्पणी, वैकल्पिक।
*   `data`: अनुमोदन के बाद वर्तमान अनुमोदन नोड में **संग्रह** रिकॉर्ड में किए गए संशोधनों को दर्शाता है, वैकल्पिक (केवल अनुमोदन पर प्रभावी)।

#### वापस भेजें <Badge>v1.9.0+</Badge>

v1.9.0 संस्करण से पहले, 'वापस भेजें' के लिए 'अनुमोदित करें' और 'अस्वीकार करें' के समान API का उपयोग किया जाता था, जिसमें `"status": 1` 'वापस भेजें' को दर्शाता था।

v1.9.0 संस्करण से शुरू होकर, 'वापस भेजें' के लिए एक अलग API है:

```bash
curl -X POST -H 'Authorization: Bearer <your token>' -d \
  '{
    "returnToNodeKey": "<node key>",
  }'
  "http://localhost:3000/api/approvalRecords:return/<record id>"
```

**पैरामीटर**

*   `<record id>`: संसाधित किए जाने वाले अनुमोदन रिकॉर्ड की ID, अनिवार्य।
*   `returnToNodeKey`: वापस भेजे जाने वाले लक्ष्य नोड की कुंजी, वैकल्पिक। जब नोड में वापस भेजे जा सकने वाले नोड्स की एक सीमा कॉन्फ़िगर की जाती है, तो इस पैरामीटर का उपयोग यह निर्दिष्ट करने के लिए किया जा सकता है कि किस नोड पर वापस भेजा जाए। यदि कॉन्फ़िगर नहीं किया गया है, तो इस पैरामीटर को पास करने की आवश्यकता नहीं है, और यह डिफ़ॉल्ट रूप से आरंभकर्ता द्वारा फिर से सबमिट करने के लिए शुरुआती बिंदु पर वापस चला जाएगा।

#### प्रतिनिधित्व सौंपना

```bash
curl -X POST -H 'Authorization: Bearer <your token>' -d \
  '{
    "assignee": <user id>,
  }'
  "http://localhost:3000/api/approvalRecords:delegate/<record id>"
```

**पैरामीटर**

*   `<record id>`: संसाधित किए जाने वाले अनुमोदन रिकॉर्ड की ID, अनिवार्य।
*   `assignee`: प्रतिनिधित्व सौंपने वाले उपयोगकर्ता की ID, अनिवार्य।

#### अतिरिक्त हस्ताक्षरकर्ता जोड़ें

```bash
curl -X POST -H 'Authorization: Bearer <your token>' -d \
  '{
    "assignees": [<user id>],
    "order": <order>,
  }'
  "http://localhost:3000/api/approvalRecords:add/<record id>"
```

**पैरामीटर**

*   `<record id>`: संसाधित किए जाने वाले अनुमोदन रिकॉर्ड की ID, अनिवार्य।
*   `assignees`: अतिरिक्त हस्ताक्षरकर्ता के रूप में जोड़े जाने वाले उपयोगकर्ता ID की सूची, अनिवार्य।
*   `order`: अतिरिक्त हस्ताक्षरकर्ता का क्रम, `-1` 'मेरे' से पहले को दर्शाता है, `1` 'मेरे' के बाद को दर्शाता है।