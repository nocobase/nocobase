---
pkg: '@nocobase/plugin-workflow-webhook'
---
:::tip
यह दस्तावेज़ AI द्वारा अनुवादित किया गया है। किसी भी अशुद्धि के लिए, कृपया [अंग्रेजी संस्करण](/en) देखें
:::


# वेबहुक

## परिचय

वेबहुक ट्रिगर एक ऐसा URL प्रदान करता है जिसे थर्ड-पार्टी सिस्टम HTTP अनुरोधों के माध्यम से कॉल कर सकते हैं। जब कोई थर्ड-पार्टी इवेंट होता है, तो इस URL पर एक HTTP अनुरोध भेजा जाता है और वर्कफ़्लो का निष्पादन ट्रिगर होता है। यह बाहरी सिस्टम द्वारा शुरू की गई सूचनाओं के लिए उपयुक्त है, जैसे भुगतान कॉलबैक, संदेश आदि।

## वर्कफ़्लो बनाना

वर्कफ़्लो बनाते समय, प्रकार के रूप में "वेबहुक इवेंट" चुनें:

![20241210105049](https://static-docs.nocobase.com/20241210105049.png)

:::info{title="नोट"}
इसमें "सिंक्रोनस" और "एसिंक्रोनस" वर्कफ़्लो के बीच अंतर यह है कि सिंक्रोनस वर्कफ़्लो प्रतिक्रिया लौटने से पहले वर्कफ़्लो के पूरा होने का इंतजार करता है, जबकि एसिंक्रोनस वर्कफ़्लो ट्रिगर कॉन्फ़िगरेशन में कॉन्फ़िगर की गई प्रतिक्रिया को तुरंत लौटा देता है और पृष्ठभूमि में निष्पादन को कतारबद्ध करता है।
:::

## ट्रिगर कॉन्फ़िगरेशन

![20241210105441](https://static-docs.nocobase.com/20241210105441.png)

### वेबहुक URL

वेबहुक ट्रिगर का URL सिस्टम द्वारा स्वचालित रूप से जेनरेट किया जाता है और इस वर्कफ़्लो से जुड़ा होता है। आप इसे कॉपी करने के लिए दाईं ओर के बटन पर क्लिक कर सकते हैं और इसे थर्ड-पार्टी सिस्टम में पेस्ट कर सकते हैं।

इसमें HTTP विधि केवल POST का समर्थन करती है; अन्य विधियाँ `405` त्रुटि लौटाएँगी।

### सुरक्षा

वर्तमान में HTTP बेसिक ऑथेंटिकेशन समर्थित है। आप इस विकल्प को सक्षम करके और एक यूज़रनेम और पासवर्ड सेट करके, थर्ड-पार्टी सिस्टम के वेबहुक URL में यूज़रनेम और पासवर्ड भाग को शामिल कर सकते हैं, ताकि वेबहुक के लिए सुरक्षा प्रमाणीकरण लागू किया जा सके (मानक विवरण के लिए देखें: [MDN: HTTP authentication](https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication#basic_authentication_scheme))।

जब एक यूज़रनेम और पासवर्ड सेट किया जाता है, तो सिस्टम अनुरोध में यूज़रनेम और पासवर्ड के मिलान की जाँच करेगा। यदि वे प्रदान नहीं किए गए हैं या मेल नहीं खाते हैं, तो `401` त्रुटि लौटाई जाएगी।

### अनुरोध डेटा पार्स करना

जब कोई थर्ड-पार्टी वेबहुक को कॉल करती है, तो अनुरोध में लाए गए डेटा को वर्कफ़्लो में उपयोग करने से पहले पार्स करने की आवश्यकता होती है। पार्स करने के बाद, यह एक ट्रिगर वैरिएबल के रूप में उपलब्ध होगा, जिसे बाद के नोड्स में संदर्भित किया जा सकता है।

HTTP अनुरोध का पार्सिंग तीन भागों में विभाजित है:

1.  अनुरोध हेडर

    अनुरोध हेडर आमतौर पर स्ट्रिंग प्रकार के सरल की-वैल्यू पेयर होते हैं। जिन हेडर फ़ील्ड्स का आपको उपयोग करना है, उन्हें सीधे कॉन्फ़िगर किया जा सकता है, जैसे `Date`, `X-Request-Id` आदि।

2.  अनुरोध पैरामीटर

    अनुरोध पैरामीटर URL में क्वेरी पैरामीटर भाग होते हैं, जैसे `http://localhost:13000/api/webhook:trigger/1hfmkioou0d?query=1` में `query` पैरामीटर। आप एक पूरा नमूना URL या केवल क्वेरी पैरामीटर भाग का नमूना पेस्ट करके और पार्स बटन पर क्लिक करके की-वैल्यू पेयर को स्वचालित रूप से पार्स कर सकते हैं।

    ![20241210111155](https://static-docs.nocobase.com/20241210111155.png)

    स्वचालित पार्सिंग URL के पैरामीटर भाग को एक JSON संरचना में परिवर्तित कर देगी और पैरामीटर पदानुक्रम के आधार पर `query[0]`, `query[0].a` जैसे पाथ जेनरेट करेगी। यदि पाथ का नाम आपकी आवश्यकताओं को पूरा नहीं करता है, तो इसे मैन्युअल रूप से संशोधित किया जा सकता है, लेकिन आमतौर पर संशोधन की आवश्यकता नहीं होती है। उपनाम (alias) वैरिएबल के रूप में उपयोग किए जाने पर वैरिएबल का प्रदर्शन नाम होता है, जो वैकल्पिक है। साथ ही, पार्सिंग नमूने से पैरामीटर की एक पूरी सूची जेनरेट करेगी; यदि आपको किसी पैरामीटर की आवश्यकता नहीं है, तो आप उसे हटा सकते हैं।

3.  अनुरोध बॉडी

    अनुरोध बॉडी HTTP अनुरोध का बॉडी भाग है। वर्तमान में, केवल `Content-Type` `application/json` वाले अनुरोध बॉडी समर्थित हैं। आप सीधे पार्स किए जाने वाले पाथ को कॉन्फ़िगर कर सकते हैं, या आप एक JSON नमूना इनपुट करके स्वचालित पार्सिंग के लिए पार्स बटन पर क्लिक कर सकते हैं।

    ![20241210112529](https://static-docs.nocobase.com/20241210112529.png)

    स्वचालित पार्सिंग JSON संरचना में की-वैल्यू पेयर को पाथ में परिवर्तित कर देगी। उदाहरण के लिए, `{"a": 1, "b": {"c": 2}}` `a`, `b`, और `b.c` जैसे पाथ जेनरेट करेगा। उपनाम (alias) वैरिएबल के रूप में उपयोग किए जाने पर वैरिएबल का प्रदर्शन नाम होता है, जो वैकल्पिक है। साथ ही, पार्सिंग नमूने से पैरामीटर की एक पूरी सूची जेनरेट करेगी; यदि आपको किसी पैरामीटर की आवश्यकता नहीं है, तो आप उसे हटा सकते हैं।

### प्रतिक्रिया सेटिंग्स

वेबहुक की प्रतिक्रिया सेटिंग्स सिंक्रोनस और एसिंक्रोनस वर्कफ़्लो में अलग-अलग होती हैं। एसिंक्रोनस वर्कफ़्लो में, प्रतिक्रिया सीधे ट्रिगर में कॉन्फ़िगर की जाती है। वेबहुक अनुरोध प्राप्त होने पर, यह तुरंत ट्रिगर में कॉन्फ़िगर की गई प्रतिक्रिया को थर्ड-पार्टी सिस्टम को लौटा देता है और फिर वर्कफ़्लो को निष्पादित करता है। जबकि सिंक्रोनस वर्कफ़्लो को व्यावसायिक आवश्यकताओं के अनुसार प्रवाह में एक प्रतिक्रिया नोड जोड़कर संभाला जाना चाहिए (विवरण के लिए देखें: [प्रतिक्रिया नोड](#प्रतिक्रिया-नोड))।

आमतौर पर, एसिंक्रोनस रूप से ट्रिगर किए गए वेबहुक इवेंट की प्रतिक्रिया का स्टेटस कोड `200` होता है और प्रतिक्रिया बॉडी `ok` होती है। आप आवश्यकतानुसार प्रतिक्रिया के स्टेटस कोड, हेडर और बॉडी को भी कस्टमाइज़ कर सकते हैं।

![20241210114312](https://static-docs.nocobase.com/20241210114312.png)

## प्रतिक्रिया नोड

संदर्भ: [प्रतिक्रिया नोड](../nodes/response.md)

## उदाहरण

एक वेबहुक वर्कफ़्लो में, आप विभिन्न व्यावसायिक शर्तों के आधार पर अलग-अलग प्रतिक्रियाएँ लौटा सकते हैं, जैसा कि नीचे दिए गए चित्र में दिखाया गया है:

![20241210120655](https://static-docs.nocobase.com/20241210120655.png)

एक कंडीशनल ब्रांच नोड का उपयोग करके, यह निर्धारित किया जाता है कि कोई विशेष व्यावसायिक स्थिति पूरी हुई है या नहीं। यदि यह पूरी होती है, तो सफलता की प्रतिक्रिया लौटाई जाती है; अन्यथा, विफलता की प्रतिक्रिया लौटाई जाती है।