---
pkg: '@nocobase/plugin-workflow-json-query'
---
:::tip
यह दस्तावेज़ AI द्वारा अनुवादित किया गया है। किसी भी अशुद्धि के लिए, कृपया [अंग्रेजी संस्करण](/en) देखें
:::


# JSON गणना

## परिचय

विभिन्न JSON गणना इंजनों का उपयोग करके, यह अपस्ट्रीम नोड्स द्वारा उत्पन्न जटिल JSON डेटा की गणना या उसकी संरचना को बदलता है, ताकि बाद के नोड्स इसका उपयोग कर सकें। उदाहरण के लिए, SQL ऑपरेशन और HTTP अनुरोध नोड्स के परिणामों को इस नोड के माध्यम से आवश्यक मानों और वेरिएबल फ़ॉर्मेट में बदला जा सकता है, ताकि बाद के नोड्स उनका उपयोग कर सकें।

## नोड बनाएँ

वर्कफ़्लो कॉन्फ़िगरेशन इंटरफ़ेस में, प्रक्रिया में प्लस ("+") बटन पर क्लिक करके "JSON गणना" नोड जोड़ें:

![नोड बनाएँ](https://static-docs.nocobase.com/7de796517539ad9dfc88b7160f1d0dd7.png)

:::info{title=टिप}
आमतौर पर, JSON गणना नोड को अन्य डेटा नोड्स के नीचे बनाया जाता है ताकि उन्हें पार्स किया जा सके।
:::

## नोड कॉन्फ़िगरेशन

### पार्सिंग इंजन

JSON गणना नोड विभिन्न पार्सिंग इंजनों के माध्यम से विभिन्न सिंटैक्स का समर्थन करता है। आप अपनी पसंद और प्रत्येक इंजन की विशेषताओं के आधार पर चुनाव कर सकते हैं। वर्तमान में, तीन पार्सिंग इंजन समर्थित हैं:

- [JMESPath](https://jmespath.org/)
- [JSONPath Plus](https://jsonpath-plus.github.io/JSONPath/docs/ts/)
- [JSONata](https://jsonata.org/)

![इंजन चयन](https://static-docs.nocobase.com/29be3b92a62b7d20312d1673e749f2ec.png)

### डेटा स्रोत

डेटा स्रोत अपस्ट्रीम नोड का परिणाम हो सकता है, या वर्कफ़्लो संदर्भ में एक डेटा ऑब्जेक्ट भी हो सकता है। यह आमतौर पर एक ऐसा डेटा ऑब्जेक्ट होता है जिसमें कोई अंतर्निहित संरचना नहीं होती है, जैसे कि SQL नोड का परिणाम, या HTTP अनुरोध नोड का परिणाम।

![डेटा स्रोत](https://static-docs.nocobase.com/f5a97e20693b3d30b3a994a576aa282d.png)

:::info{title=टिप}
आमतौर पर, संग्रह-संबंधित नोड्स के डेटा ऑब्जेक्ट संग्रह कॉन्फ़िगरेशन जानकारी के माध्यम से संरचित होते हैं और आमतौर पर उन्हें JSON गणना नोड द्वारा पार्स करने की आवश्यकता नहीं होती है।
:::

### पार्सिंग एक्सप्रेशन

पार्सिंग आवश्यकताओं और चुने गए पार्सिंग इंजन के आधार पर कस्टम पार्सिंग एक्सप्रेशन।

![पार्सिंग एक्सप्रेशन](https://static-docs.nocobase.com/181abd162fd32c09b62f6aa1d1cb3ed4.png)

:::info{title=टिप}
विभिन्न इंजन अलग-अलग पार्सिंग सिंटैक्स प्रदान करते हैं। विवरण के लिए, कृपया लिंक में दिए गए दस्तावेज़ देखें।
:::

`v1.0.0-alpha.15` संस्करण से, एक्सप्रेशन वेरिएबल के उपयोग का समर्थन करते हैं। वेरिएबल को विशिष्ट इंजन के निष्पादन से पहले प्री-पार्स किया जाता है, स्ट्रिंग टेम्पलेट नियमों के अनुसार वेरिएबल को विशिष्ट स्ट्रिंग मानों से बदला जाता है, और एक्सप्रेशन में अन्य स्थिर स्ट्रिंग के साथ जोड़कर अंतिम एक्सप्रेशन बनाया जाता है। यह सुविधा तब बहुत उपयोगी होती है जब आपको गतिशील रूप से एक्सप्रेशन बनाने की आवश्यकता होती है, उदाहरण के लिए, जब कुछ JSON सामग्री को पार्स करने के लिए एक गतिशील कुंजी की आवश्यकता होती है।

### प्रॉपर्टी मैपिंग

जब गणना का परिणाम एक ऑब्जेक्ट (या ऑब्जेक्ट्स का एक ऐरे) होता है, तो आप प्रॉपर्टी मैपिंग के माध्यम से आवश्यक प्रॉपर्टीज़ को चाइल्ड वेरिएबल में मैप कर सकते हैं ताकि बाद के नोड्स उनका उपयोग कर सकें।

![प्रॉपर्टी मैपिंग](https://static-docs.nocobase.com/b876abe4ccf6b4709eb8748f21ef3527.png)

:::info{title=टिप}
किसी ऑब्जेक्ट (या ऑब्जेक्ट्स के ऐरे) के परिणाम के लिए, यदि प्रॉपर्टी मैपिंग नहीं की जाती है, तो पूरा ऑब्जेक्ट (या ऑब्जेक्ट्स का ऐरे) नोड के परिणाम में एक सिंगल वेरिएबल के रूप में सहेजा जाएगा, और ऑब्जेक्ट के प्रॉपर्टी मानों को सीधे वेरिएबल के रूप में उपयोग नहीं किया जा सकेगा।
:::

## उदाहरण

मान लीजिए कि पार्स किया जाने वाला डेटा एक पिछले SQL नोड से है जिसका उपयोग डेटा क्वेरी करने के लिए किया गया था, और इसका परिणाम ऑर्डर डेटा का एक सेट है:

```json
[
  {
    "id": 1,
    "products": [
      {
        "id": 1,
        "title": "Product 1",
        "price": 100,
        "quantity": 1
      },
      {
        "id": 2,
        "title": "Product 2",
        "price": 120,
        "quantity": 2
      }
    ]
  },
  {
    "id": 2,
    "products": [
      {
        "id": 3,
        "title": "Product 3",
        "price": 130,
        "quantity": 1
      },
      {
        "id": 4,
        "title": "Product 4",
        "price": 140,
        "quantity": 2
      }
    ]
  }
]
```

यदि हमें डेटा में दो ऑर्डर के कुल मूल्य को पार्स और गणना करने की आवश्यकता है, और इसे संबंधित ऑर्डर ID के साथ एक ऑब्जेक्ट में इकट्ठा करना है ताकि ऑर्डर के कुल मूल्य को अपडेट किया जा सके, तो हम इसे इस प्रकार कॉन्फ़िगर कर सकते हैं:

![उदाहरण - SQL कॉन्फ़िगरेशन पार्स करें](https://static-docs.nocobase.com/e62322a868b26ff98120bfcd6dcdb3bd.png)

1. JSONata पार्सिंग इंजन चुनें;
2. SQL नोड के परिणाम को डेटा स्रोत के रूप में चुनें;
3. JSONata एक्सप्रेशन `$[0].{"id": id, "total": products.(price * quantity)}` का उपयोग करके पार्स करें;
4. प्रॉपर्टी मैपिंग चुनें, और `id` तथा `total` को चाइल्ड वेरिएबल में मैप करें;

अंतिम पार्सिंग परिणाम इस प्रकार है:

```json
[
  {
    "id": 1,
    "total": 340
  },
  {
    "id": 2,
    "total": 410
  }
]
```

इसके बाद, परिणामी ऑर्डर ऐरे के माध्यम से लूप करें और ऑर्डर के कुल मूल्य को अपडेट करें।

![संबंधित ऑर्डर के कुल मूल्य को अपडेट करें](https://static-docs.nocobase.com/b3329b0efe4471f5eed1f0673bef740e.png)