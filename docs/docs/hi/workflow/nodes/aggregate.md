---
pkg: '@nocobase/plugin-workflow-aggregate'
---
:::tip
यह दस्तावेज़ AI द्वारा अनुवादित किया गया है। किसी भी अशुद्धि के लिए, कृपया [अंग्रेजी संस्करण](/en) देखें
:::


# एग्रीगेट क्वेरी

## परिचय

किसी `संग्रह` में, कुछ शर्तों को पूरा करने वाले डेटा पर एग्रीगेट फ़ंक्शन क्वेरी चलाने और संबंधित सांख्यिकीय परिणाम वापस करने के लिए इसका उपयोग किया जाता है। इसका उपयोग अक्सर रिपोर्ट से संबंधित सांख्यिकीय डेटा को संसाधित करने के लिए किया जाता है।

इस नोड का कार्यान्वयन डेटाबेस के एग्रीगेट फ़ंक्शन पर आधारित है। वर्तमान में, यह केवल एक `संग्रह` के एकल फ़ील्ड पर सांख्यिकी का समर्थन करता है। सांख्यिकी का संख्यात्मक परिणाम नोड के आउटपुट में सहेजा जाएगा ताकि बाद में अन्य नोड इसका उपयोग कर सकें।

## इंस्टॉलेशन

यह एक बिल्ट-इन `प्लगइन` है, इंस्टॉलेशन की आवश्यकता नहीं है।

## नोड बनाएँ

`वर्कफ़्लो` कॉन्फ़िगरेशन इंटरफ़ेस में, फ़्लो में प्लस ("+") बटन पर क्लिक करके "एग्रीगेट क्वेरी" नोड जोड़ें:

![एग्रीगेट क्वेरी नोड बनाएँ](https://static-docs.nocobase.com/7f9d806ebf5064f80c30f8b67f316f0f.png)

## नोड कॉन्फ़िगरेशन

![एग्रीगेट क्वेरी नोड_नोड कॉन्फ़िगरेशन](https://static-docs.nocobase.com/57362f747b9992230567c6bb5e986fd2.png)

### एग्रीगेट फ़ंक्शन

SQL के 5 एग्रीगेट फ़ंक्शन - `COUNT`, `SUM`, `AVG`, `MIN`, और `MAX` का समर्थन करता है। डेटा पर एग्रीगेट क्वेरी करने के लिए इनमें से किसी एक को चुनें।

### लक्ष्य प्रकार

एग्रीगेट क्वेरी के लक्ष्य को दो तरीकों से चुना जा सकता है। पहला तरीका है सीधे लक्ष्य `संग्रह` और उसके एक फ़ील्ड का चयन करना। दूसरा तरीका है `वर्कफ़्लो` संदर्भ में मौजूद डेटा ऑब्जेक्ट के माध्यम से, उसके वन-टू-मेनी संबंधित `संग्रह` और फ़ील्ड का चयन करके एग्रीगेट क्वेरी करना।

### डिस्टिंक्ट

यह SQL में `DISTINCT` के समान है। डुप्लीकेट हटाने के लिए फ़ील्ड, चुने गए `संग्रह` फ़ील्ड के समान होता है। इन दोनों के लिए अलग-अलग फ़ील्ड चुनना वर्तमान में समर्थित नहीं है।

### फ़िल्टर शर्तें

सामान्य `संग्रह` क्वेरी में फ़िल्टर शर्तों के समान, आप `वर्कफ़्लो` के संदर्भ वेरिएबल का उपयोग कर सकते हैं।

## उदाहरण

एग्रीगेट लक्ष्य "संग्रह डेटा" को समझना अपेक्षाकृत आसान है। यहाँ, हम "एक नया लेख जोड़ने के बाद उस लेख की श्रेणी में कुल लेखों की संख्या गिनना" को एक उदाहरण के रूप में उपयोग करेंगे, ताकि "संबंधित `संग्रह` डेटा" के एग्रीगेट लक्ष्य के उपयोग को समझाया जा सके।

सबसे पहले, दो `संग्रह` बनाएँ: "लेख" (Articles) और "श्रेणियाँ" (Categories)। "लेख" `संग्रह` में "श्रेणियाँ" `संग्रह` की ओर इशारा करने वाला एक मेनी-टू-वन संबंध फ़ील्ड है, और साथ ही "श्रेणियाँ" से "लेख" तक एक रिवर्स वन-टू-मेनी संबंध फ़ील्ड भी बनाया गया है:

| फ़ील्ड का नाम | प्रकार           |
| -------- | -------------- |
| शीर्षक     | सिंगल लाइन टेक्स्ट       |
| श्रेणी | मेनी-टू-वन (श्रेणियाँ) |

| फ़ील्ड का नाम   | प्रकार           |
| -------- | -------------- |
| श्रेणी का नाम | सिंगल लाइन टेक्स्ट       |
| लेख | वन-टू-मेनी (लेख) |

इसके बाद, एक `संग्रह` इवेंट द्वारा ट्रिगर होने वाला `वर्कफ़्लो` बनाएँ। इसे "लेख" `संग्रह` में नया डेटा जोड़ने के बाद ट्रिगर होने के लिए चुनें।

फिर, एक एग्रीगेट क्वेरी नोड जोड़ें और इसे इस प्रकार कॉन्फ़िगर करें:

![एग्रीगेट क्वेरी नोड_उदाहरण_नोड कॉन्फ़िगरेशन](https://static-docs.nocobase.com/542272e638c6c0a567373d1b37ddda78.png)

इस तरह, `वर्कफ़्लो` ट्रिगर होने के बाद, एग्रीगेट क्वेरी नोड नए जोड़े गए लेख की श्रेणी में सभी लेखों की संख्या गिनेगा और इसे नोड के परिणाम के रूप में सहेजेगा।

:::info{title=सुझाव}
यदि आपको `संग्रह` इवेंट ट्रिगर से संबंध डेटा का उपयोग करने की आवश्यकता है, तो आपको ट्रिगर के "प्रीलोड संबंधित डेटा" (Preload associated data) अनुभाग में संबंधित फ़ील्ड्स को कॉन्फ़िगर करना होगा, अन्यथा उन्हें चुना नहीं जा सकेगा।
:::