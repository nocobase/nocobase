
:::tip
рдпрд╣ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ AI рджреНрд╡рд╛рд░рд╛ рдЕрдиреБрд╡рд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред рдХрд┐рд╕реА рднреА рдЕрд╢реБрджреНрдзрд┐ рдХреЗ рд▓рд┐рдП, рдХреГрдкрдпрд╛ [рдЕрдВрдЧреНрд░реЗрдЬреА рд╕рдВрд╕реНрдХрд░рдг](/en) рджреЗрдЦреЗрдВ
:::


# рд╕рдВрджрд░реНрдн рдкреНрд░рдгрд╛рд▓реА рдХрд╛ рдЕрд╡рд▓реЛрдХрди

NocoBase рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рдЗрдВрдЬрди рдХреА рд╕рдВрджрд░реНрдн рдкреНрд░рдгрд╛рд▓реА рдХреЛ рддреАрди рдкрд░рддреЛрдВ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЬрд┐рдирдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдПрдХ рдЕрд▓рдЧ рдХрд╛рд░реНрдпрдХреНрд╖реЗрддреНрд░ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рд╣реИред рдЗрд╕рдХрд╛ рд╕рд╣реА рдЙрдкрдпреЛрдЧ рд╕реЗрд╡рд╛рдУрдВ, рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдФрд░ рдбреЗрдЯрд╛ рдХреЗ рд▓рдЪреАрд▓реЗ рд╕рд╛рдЭрд╛рдХрд░рдг рдФрд░ рдЕрд▓рдЧрд╛рд╡ рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рд╡реНрдпрд╡рд╕рд╛рдп рдХреА рд░рдЦрд░рдЦрд╛рд╡ рдХреНрд╖рдорддрд╛ рдФрд░ рдорд╛рдкрдиреАрдпрддрд╛ рдореЗрдВ рд╕реБрдзрд╛рд░ рд╣реЛрддрд╛ рд╣реИред

- **FlowEngineContext (рд╡реИрд╢реНрд╡рд┐рдХ рд╕рдВрджрд░реНрдн)**: рдпрд╣ рд╡рд┐рд╢реНрд╡ рд╕реНрддрд░ рдкрд░ рдЕрджреНрд╡рд┐рддреАрдп рд╣реИ рдФрд░ рд╕рднреА рдореЙрдбрд▓ рддрдерд╛ рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рджреНрд╡рд╛рд░рд╛ рд╕реБрд▓рдн рд╣реИред рдпрд╣ рд╡реИрд╢реНрд╡рд┐рдХ рд╕реЗрд╡рд╛рдУрдВ, рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдЖрджрд┐ рдХреЛ рдкрдВрдЬреАрдХреГрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рд╣реИред
- **FlowModelContext (рдореЙрдбрд▓ рд╕рдВрджрд░реНрдн)**: рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдореЙрдбрд▓ рдЯреНрд░реА рдХреЗ рднреАрддрд░ рд╕рдВрджрд░реНрдн рд╕рд╛рдЭрд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдЙрдк-рдореЙрдбрд▓ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдкреИрд░реЗрдВрдЯ рдореЙрдбрд▓ рдХреЗ рд╕рдВрджрд░реНрдн рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рд╕рдорд╛рди рдирд╛рдо рдУрд╡рд░рд░рд╛рдЗрдб рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддреЗ рд╣реИрдВред рдпрд╣ рдореЙрдбрд▓-рд╕реНрддрд░реАрдп рддрд░реНрдХ рдФрд░ рдбреЗрдЯрд╛ рдЕрд▓рдЧрд╛рд╡ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рд╣реИред
- **FlowRuntimeContext (рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рд░рдирдЯрд╛рдЗрдо рд╕рдВрджрд░реНрдн)**: рдпрд╣ рд╣рд░ рдмрд╛рд░ рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рд╣реЛрдиреЗ рдкрд░ рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдкреВрд░реЗ рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рдирд┐рд╖реНрдкрд╛рджрди рдЪрдХреНрд░ рдХреЗ рджреМрд░рд╛рди рдмрдирд╛ рд░рд╣рддрд╛ рд╣реИред рдпрд╣ рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рдХреЗ рднреАрддрд░ рдбреЗрдЯрд╛ рдкрд╛рд╕ рдХрд░рдиреЗ, рд╡реЗрд░рд┐рдПрдмрд▓ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдФрд░ рд░рдирдЯрд╛рдЗрдо рд╕реНрдерд┐рддрд┐ рд░рд┐рдХреЙрд░реНрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рд╣реИред рдпрд╣ `mode: 'runtime' | 'settings'` рджреЛ рдореЛрдб рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рдХреНрд░рдорд╢рдГ рд░рдирдЯрд╛рдЗрдо рдореЛрдб рдФрд░ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдореЛрдб рдХреЗ рдЕрдиреБрд░реВрдк рд╣реИрдВред

рд╕рднреА `FlowEngineContext` (рд╡реИрд╢реНрд╡рд┐рдХ рд╕рдВрджрд░реНрдн), `FlowModelContext` (рдореЙрдбрд▓ рд╕рдВрджрд░реНрдн), `FlowRuntimeContext` (рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рд░рдирдЯрд╛рдЗрдо рд╕рдВрджрд░реНрдн) рдЖрджрд┐, `FlowContext` рдХреЗ рдЙрдк-рд╡рд░реНрдЧ рдпрд╛ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рд╣реИрдВред

---

## ЁЯЧВя╕П рдкрджрд╛рдиреБрдХреНрд░рдо рдЖрд░реЗрдЦ

```text
FlowEngineContext (рд╡реИрд╢реНрд╡рд┐рдХ рд╕рдВрджрд░реНрдн)
тФВ
тФЬтФАтФА FlowModelContext (рдореЙрдбрд▓ рд╕рдВрджрд░реНрдн)
тФВ     тФЬтФАтФА рдЙрдк FlowModelContext (рдЙрдк-рдореЙрдбрд▓)
тФВ     тФВ     тФЬтФАтФА FlowRuntimeContext (рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рд░рдирдЯрд╛рдЗрдо рд╕рдВрджрд░реНрдн)
тФВ     тФВ     тФФтФАтФА FlowRuntimeContext (рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рд░рдирдЯрд╛рдЗрдо рд╕рдВрджрд░реНрдн)
тФВ     тФФтФАтФА FlowRuntimeContext (рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рд░рдирдЯрд╛рдЗрдо рд╕рдВрджрд░реНрдн)
тФВ
тФЬтФАтФА FlowModelContext (рдореЙрдбрд▓ рд╕рдВрджрд░реНрдн)
тФВ     тФФтФАтФА FlowRuntimeContext (рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рд░рдирдЯрд╛рдЗрдо рд╕рдВрджрд░реНрдн)
тФВ
тФФтФАтФА FlowModelContext (рдореЙрдбрд▓ рд╕рдВрджрд░реНрдн)
      тФЬтФАтФА рдЙрдк FlowModelContext (рдЙрдк-рдореЙрдбрд▓)
      тФВ     тФФтФАтФА FlowRuntimeContext (рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рд░рдирдЯрд╛рдЗрдо рд╕рдВрджрд░реНрдн)
      тФФтФАтФА FlowRuntimeContext (рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рд░рдирдЯрд╛рдЗрдо рд╕рдВрджрд░реНрдн)
```

- `FlowModelContext`, рдкреНрд░рддрд┐рдирд┐рдзрд┐ рддрдВрддреНрд░ (delegate mechanism) рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ `FlowEngineContext` рдХреЗ рдЧреБрдгреЛрдВ рдФрд░ рд╡рд┐рдзрд┐рдпреЛрдВ рддрдХ рдкрд╣реБрдБрдЪ рд╕рдХрддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рд╡реИрд╢реНрд╡рд┐рдХ рдХреНрд╖рдорддрд╛рдУрдВ рдХреЛ рд╕рд╛рдЭрд╛ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред
- рдПрдХ рдЙрдк-рдореЙрдбрд▓ рдХрд╛ `FlowModelContext`, рдкреНрд░рддрд┐рдирд┐рдзрд┐ рддрдВрддреНрд░ (delegate mechanism) рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкреИрд░реЗрдВрдЯ рдореЙрдбрд▓ рдХреЗ рд╕рдВрджрд░реНрдн (рддреБрд▓реНрдпрдХрд╛рд▓рд┐рдХ рд╕рдВрдмрдВрдз) рддрдХ рдкрд╣реБрдБрдЪ рд╕рдХрддрд╛ рд╣реИ, рдФрд░ рд╕рдорд╛рди рдирд╛рдо рдУрд╡рд░рд░рд╛рдЗрдб рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИред
- рдЕрддреБрд▓реНрдпрдХрд╛рд▓рд┐рдХ рдкреИрд░реЗрдВрдЯ-рдЪрд╛рдЗрд▓реНрдб рдореЙрдбрд▓ рдкреНрд░рддрд┐рдирд┐рдзрд┐ рд╕рдВрдмрдВрдз (delegate relationship) рд╕реНрдерд╛рдкрд┐рдд рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВ, рддрд╛рдХрд┐ рд╕реНрдерд┐рддрд┐ рдкреНрд░рджреВрд╖рдг рд╕реЗ рдмрдЪрд╛ рдЬрд╛ рд╕рдХреЗред
- `FlowRuntimeContext` рд╣рдореЗрд╢рд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐ рддрдВрддреНрд░ (delegate mechanism) рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЕрдкрдиреЗ рд╕рдВрдмрдВрдзрд┐рдд `FlowModelContext` рддрдХ рдкрд╣реБрдБрдЪрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЛ рдКрдкрд░ рдХреА рдУрд░ рдкреНрд░рд╕рд╛рд░рд┐рдд рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред

## ЁЯзн рд░рдирдЯрд╛рдЗрдо рдФрд░ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдореЛрдб (mode)

`FlowRuntimeContext` рджреЛ рдореЛрдб рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рдиреНрд╣реЗрдВ `mode` рдкреИрд░рд╛рдореАрдЯрд░ рджреНрд╡рд╛рд░рд╛ рдЕрд▓рдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ:

- `mode: 'runtime'` (рд░рдирдЯрд╛рдЗрдо рдореЛрдб): рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рдХреЗ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдирд┐рд╖реНрдкрд╛рджрди рдЪрд░рдг рдХреЗ рджреМрд░рд╛рди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдЧреБрдг рдФрд░ рд╡рд┐рдзрд┐рдпрд╛рдБ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдбреЗрдЯрд╛ рд▓реМрдЯрд╛рддреЗ рд╣реИрдВред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП:
  ```js
  console.log(runtimeCtx.steps.step1.result); // 42
  ```

- `mode: 'settings'` (рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдореЛрдб): рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рдбрд┐рдЬрд╝рд╛рдЗрди рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдЪрд░рдг рдХреЗ рджреМрд░рд╛рди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдЧреБрдг рдПрдХреНрд╕реЗрд╕ рдПрдХ рд╡реЗрд░рд┐рдПрдмрд▓ рдЯреЗрдореНрдкрд▓реЗрдЯ рд╕реНрдЯреНрд░рд┐рдВрдЧ рд▓реМрдЯрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдПрдХреНрд╕рдкреНрд░реЗрд╢рди рдФрд░ рд╡реЗрд░рд┐рдПрдмрд▓ рдЪрдпрди рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реЛрддрд╛ рд╣реИред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП:
  ```js
  console.log(settingsCtx.steps.step1.result); // '{{ ctx.steps.step1.result }}'
  ```

рдпрд╣ рджреЛрд╣рд░реА-рдореЛрдб рдбрд┐рдЬрд╝рд╛рдЗрди рд░рдирдЯрд╛рдЗрдо рдкрд░ рдбреЗрдЯрд╛ рдЙрдкрд▓рдмреНрдзрддрд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рджреМрд░рд╛рди рд╡реЗрд░рд┐рдПрдмрд▓ рд╕рдВрджрд░реНрдн рдФрд░ рдПрдХреНрд╕рдкреНрд░реЗрд╢рди рдЬрдирд░реЗрд╢рди рдХреЛ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рдмрдирд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рдЗрдВрдЬрди рдХреЗ рд▓рдЪреАрд▓реЗрдкрди рдФрд░ рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдореЗрдВ рд╡реГрджреНрдзрд┐ рд╣реЛрддреА рд╣реИред