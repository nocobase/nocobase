---
pkg: '@nocobase/plugin-auth-wecom'
---
:::tip
เอกสารนี้แปลโดย AI หากมีข้อมูลที่ไม่ถูกต้อง โปรดดู[เวอร์ชันภาษาอังกฤษ](/en)
:::

# การยืนยันตัวตน: WeCom

## บทนำ

ปลั๊กอิน **WeCom** ช่วยให้ผู้ใช้สามารถเข้าสู่ระบบ NocoBase โดยใช้บัญชี WeCom ได้ครับ/ค่ะ

## เปิดใช้งานปลั๊กอิน

![](https://static-docs.nocobase.com/202406272056962.png)

## สร้างและตั้งค่าแอปพลิเคชัน WeCom ที่สร้างเอง

ไปที่หน้าผู้ดูแลระบบ WeCom เพื่อสร้างแอปพลิเคชันที่สร้างเองครับ/ค่ะ

![](https://static-docs.nocobase.com/202406272101321.png)

![](https://static-docs.nocobase.com/202406272102087.png)

คลิกที่แอปพลิเคชันเพื่อเข้าสู่หน้ารายละเอียด เลื่อนหน้าลงมา แล้วคลิกที่ปุ่ม 「เข้าสู่ระบบด้วยการอนุญาตจาก WeCom」 ครับ/ค่ะ

![](https://static-docs.nocobase.com/202406272104655.png)

ตั้งค่าโดเมน Callback ที่ได้รับอนุญาตเป็นโดเมนแอปพลิเคชัน NocoBase ของคุณครับ/ค่ะ

![](https://static-docs.nocobase.com/202406272105662.png)

กลับไปที่หน้ารายละเอียดแอปพลิเคชัน แล้วคลิกที่ 「การอนุญาตผ่านเว็บและ JS-SDK」 ครับ/ค่ะ

![](https://static-docs.nocobase.com/202406272107063.png)

ตั้งค่าและยืนยันโดเมน Callback สำหรับฟังก์ชันการอนุญาตผ่านเว็บ OAuth2.0 ของแอปพลิเคชันครับ/ค่ะ

![](https://static-docs.nocobase.com/202406272107899.png)

บนหน้ารายละเอียดแอปพลิเคชัน คลิกที่ 「IP ที่เชื่อถือได้ขององค์กร」 ครับ/ค่ะ

![](https://static-docs.nocobase.com/202406272108834.png)

กำหนดค่า IP ของแอปพลิเคชัน NocoBase ครับ/ค่ะ

![](https://static-docs.nocobase.com/202406272109805.png)

## รับข้อมูลรับรองจากหน้าผู้ดูแลระบบ WeCom

ในหน้าผู้ดูแลระบบ WeCom ภายใต้เมนู "บริษัทของฉัน" ให้คัดลอก 「ID บริษัท」 ครับ/ค่ะ

![](https://static-docs.nocobase.com/202406272111637.png)

ในหน้าผู้ดูแลระบบ WeCom ภายใต้เมนู "การจัดการแอปพลิเคชัน" ให้ไปที่หน้ารายละเอียดของแอปพลิเคชันที่สร้างไว้ในขั้นตอนก่อนหน้า แล้วคัดลอก AgentId และ Secret ครับ/ค่ะ

![](https://static-docs.nocobase.com/202406272122322.png)

## เพิ่มการยืนยันตัวตนด้วย WeCom ใน NocoBase

ไปที่หน้าการจัดการปลั๊กอินการยืนยันตัวตนผู้ใช้ครับ/ค่ะ

![](https://static-docs.nocobase.com/202406272115044.png)

เพิ่ม - WeCom

![](https://static-docs.nocobase.com/202406272115805.png)

### การตั้งค่า

![](https://static-docs.nocobase.com/202412041459250.png)

| ตัวเลือกการตั้งค่า                                                                                                | คำอธิบาย                                                                                                 | ข้อกำหนดเวอร์ชัน |
| ----------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------- | -------- |
| เมื่อหมายเลขโทรศัพท์ไม่ตรงกับผู้ใช้ที่มีอยู่ <br />ควรสร้างผู้ใช้ใหม่โดยอัตโนมัติหรือไม่ | เมื่อหมายเลขโทรศัพท์ไม่ตรงกับผู้ใช้ที่มีอยู่ ควรสร้างผู้ใช้ใหม่โดยอัตโนมัติหรือไม่                                                 | -        |
| ID บริษัท                                                                                            | ID บริษัท, ได้รับจากหน้าผู้ดูแลระบบ WeCom                                                                    | -        |
| AgentId                                                                                               | ได้รับจากการตั้งค่าแอปพลิเคชันที่สร้างเองในหน้าผู้ดูแลระบบ WeCom                                                                 | -        |
| Secret                                                                                                | ได้รับจากการตั้งค่าแอปพลิเคชันที่สร้างเองในหน้าผู้ดูแลระบบ WeCom                                                                 | -        |
| Origin                                                                                                | โดเมนแอปพลิเคชันปัจจุบัน                                                                                       | -        |
| ลิงก์เปลี่ยนเส้นทางแอปพลิเคชัน Workbench                                                                   | เส้นทางแอปพลิเคชันที่จะเปลี่ยนเส้นทางหลังจากเข้าสู่ระบบสำเร็จ                                                                           | `v1.4.0` |
| เข้าสู่ระบบอัตโนมัติ                                                                                       | เข้าสู่ระบบอัตโนมัติเมื่อเปิดลิงก์แอปพลิเคชันในเบราว์เซอร์ WeCom เมื่อมีการตั้งค่าตัวยืนยันตัวตน WeCom หลายตัว จะมีเพียงตัวเดียวเท่านั้นที่สามารถเปิดใช้งานตัวเลือกนี้ได้ | `v1.4.0` |
| ลิงก์หน้าแรกของแอปพลิเคชัน Workbench                                                                                 | ลิงก์หน้าแรกของแอปพลิเคชัน Workbench                                                                                 | -        |

## ตั้งค่าหน้าแรกของแอปพลิเคชัน WeCom

:::info
สำหรับเวอร์ชัน `v1.4.0` ขึ้นไป เมื่อเปิดใช้งานตัวเลือก "เข้าสู่ระบบอัตโนมัติ" ลิงก์หน้าแรกของแอปพลิเคชันสามารถลดรูปให้สั้นลงได้เป็น: `https://<url>/<path>` ตัวอย่างเช่น `https://example.nocobase.com/admin` ครับ/ค่ะ

คุณยังสามารถตั้งค่าลิงก์แยกกันสำหรับมือถือและเดสก์ท็อปได้ครับ/ค่ะ ตัวอย่างเช่น `https://example.nocobase.com/m` และ `https://example.nocobase.com/admin`
:::

เข้าสู่หน้าผู้ดูแลระบบ WeCom แล้วนำลิงก์หน้าแรกของแอปพลิเคชัน Workbench ที่คัดลอกไว้ไปวางในช่องที่อยู่หน้าแรกของแอปพลิเคชันที่เกี่ยวข้องครับ/ค่ะ

![](https://static-docs.nocobase.com/202406272123631.png)

![](https://static-docs.nocobase.com/202406272123048.png)

## การเข้าสู่ระบบ

เยี่ยมชมหน้าเข้าสู่ระบบ แล้วคลิกปุ่มด้านล่างแบบฟอร์มเข้าสู่ระบบเพื่อเริ่มการเข้าสู่ระบบด้วยบุคคลที่สามครับ/ค่ะ

![](https://static-docs.nocobase.com/202406272124608.png)

:::warning
เนื่องจากข้อจำกัดด้านสิทธิ์ของ WeCom สำหรับข้อมูลที่ละเอียดอ่อน เช่น หมายเลขโทรศัพท์ การอนุญาตจะสามารถทำได้ภายในไคลเอนต์ WeCom เท่านั้นครับ/ค่ะ เมื่อเข้าสู่ระบบด้วย WeCom เป็นครั้งแรก โปรดทำตามขั้นตอนด้านล่างเพื่อทำการอนุญาตการเข้าสู่ระบบครั้งแรกภายในไคลเอนต์ WeCom ครับ/ค่ะ
:::

## การเข้าสู่ระบบครั้งแรก

จากไคลเอนต์ WeCom ให้ไปที่ Workbench เลื่อนลงไปด้านล่างสุด แล้วคลิกที่แอปพลิเคชันเพื่อเข้าสู่หน้าแรกของแอปพลิเคชันที่คุณได้ตั้งค่าไว้ก่อนหน้านี้ ซึ่งจะทำให้การอนุญาตเข้าสู่ระบบครั้งแรกเสร็จสมบูรณ์ครับ/ค่ะ หลังจากนั้น คุณก็จะสามารถใช้ WeCom เพื่อเข้าสู่ระบบแอปพลิเคชัน NocoBase ของคุณได้ครับ/ค่ะ

<img src="https://static-docs.nocobase.com/202406272131113.png" width="400" />