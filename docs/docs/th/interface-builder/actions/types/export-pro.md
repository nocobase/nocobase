---
pkg: "@nocobase/plugin-action-export-pro"
---

:::tip
เอกสารนี้แปลโดย AI หากมีข้อมูลที่ไม่ถูกต้อง โปรดดู[เวอร์ชันภาษาอังกฤษ](/en)
:::



# เอ็กซ์พอร์ต Pro

## บทนำ

ปลั๊กอิน Export Pro มีฟังก์ชันที่ได้รับการปรับปรุงเพิ่มเติมจากความสามารถในการส่งออกมาตรฐานครับ/ค่ะ

## การติดตั้ง

ปลั๊กอินนี้ขึ้นอยู่กับปลั๊กอินการจัดการงานแบบอะซิงโครนัส (Asynchronous Task Management) ครับ/ค่ะ คุณต้องเปิดใช้งานปลั๊กอินการจัดการงานแบบอะซิงโครนัสก่อนใช้งานครับ/ค่ะ

## การปรับปรุงคุณสมบัติ

- รองรับการดำเนินการส่งออกแบบอะซิงโครนัส (Asynchronous Export) โดยทำงานในเธรดแยกต่างหาก ซึ่งเหมาะสำหรับการส่งออกข้อมูลปริมาณมากครับ/ค่ะ
- รองรับการส่งออกไฟล์แนบครับ/ค่ะ

## คู่มือการใช้งาน

### การตั้งค่าโหมดการส่งออก

![20251029172829](https://static-docs.nocobase.com/20251029172829.png)

![20251029172914](https://static-docs.nocobase.com/20251029172914.png)

ที่ปุ่มส่งออก คุณสามารถตั้งค่าโหมดการส่งออกได้ครับ/ค่ะ โดยมี 3 โหมดให้เลือกดังนี้:

- **อัตโนมัติ (Auto):** ระบบจะกำหนดโหมดการส่งออกตามปริมาณข้อมูล หากข้อมูลมีน้อยกว่า 1,000 รายการ (หรือ 100 รายการสำหรับการส่งออกไฟล์แนบ) จะใช้การส่งออกแบบซิงโครนัส (Synchronous) แต่หากข้อมูลมีมากกว่า 1,000 รายการ (หรือ 100 รายการสำหรับการส่งออกไฟล์แนบ) จะใช้การส่งออกแบบอะซิงโครนัส (Asynchronous) ครับ/ค่ะ
- **ซิงโครนัส (Synchronous):** ใช้การส่งออกแบบซิงโครนัส ซึ่งจะทำงานในเธรดหลัก เหมาะสำหรับข้อมูลขนาดเล็กครับ/ค่ะ หากส่งออกข้อมูลจำนวนมากในโหมดนี้ อาจทำให้ระบบหยุดชะงัก ค้าง และไม่สามารถจัดการคำขอจากผู้ใช้รายอื่นได้ครับ/ค่ะ
- **อะซิงโครนัส (Asynchronous):** ใช้การส่งออกแบบอะซิงโครนัส ซึ่งจะทำงานในเธรดเบื้องหลังที่แยกต่างหาก ทำให้ไม่ขัดขวางการทำงานของระบบในปัจจุบันครับ/ค่ะ

### การส่งออกแบบอะซิงโครนัส

หลังจากที่คุณเริ่มการส่งออก กระบวนการส่งออกจะทำงานในเธรดเบื้องหลังที่แยกต่างหาก โดยไม่จำเป็นต้องตั้งค่าด้วยตนเองครับ/ค่ะ ในส่วนติดต่อผู้ใช้ (UI) หลังจากดำเนินการส่งออกแล้ว งานส่งออกที่กำลังทำงานอยู่จะแสดงที่มุมขวาบน พร้อมทั้งแสดงความคืบหน้าของงานแบบเรียลไทม์ครับ/ค่ะ

![20251029173028](https://static-docs.nocobase.com/20251029173028.png)

เมื่อการส่งออกเสร็จสมบูรณ์ คุณสามารถดาวน์โหลดไฟล์ที่ส่งออกได้จากรายการงานส่งออกครับ/ค่ะ

#### การส่งออกพร้อมกัน (Concurrent Exports)
เมื่อมีงานส่งออกพร้อมกันจำนวนมาก อาจส่งผลต่อประสิทธิภาพของเซิร์ฟเวอร์ ทำให้ระบบตอบสนองช้าลงได้ครับ/ค่ะ ดังนั้น เราจึงแนะนำให้ผู้พัฒนาระบบกำหนดจำนวนงานส่งออกพร้อมกันสูงสุด (ค่าเริ่มต้นคือ 3) หากมีงานเกินกว่าจำนวนที่กำหนด งานเหล่านั้นจะเข้าสู่สถานะรอคิวครับ/ค่ะ
![20250505171706](https://static-docs.nocobase.com/20250505171706.png)

วิธีการตั้งค่าจำนวนงานพร้อมกัน: กำหนดตัวแปรสภาพแวดล้อม `ASYNC_TASK_MAX_CONCURRENCY=จำนวนงานพร้อมกัน`

จากการทดสอบที่ครอบคลุมภายใต้การตั้งค่าและความซับซ้อนของข้อมูลที่แตกต่างกัน จำนวนงานพร้อมกันที่แนะนำคือ:
- CPU 2 คอร์, จำนวนงานพร้อมกัน 3
- CPU 4 คอร์, จำนวนงานพร้อมกัน 5

#### เกี่ยวกับประสิทธิภาพ
หากคุณพบว่ากระบวนการส่งออกช้าผิดปกติ (โปรดดูข้อมูลอ้างอิงด้านล่าง) อาจเป็นปัญหาด้านประสิทธิภาพที่เกิดจากโครงสร้างของคอลเลกชันครับ/ค่ะ

| ลักษณะข้อมูล | ประเภทดัชนี (Index Type) | ปริมาณข้อมูล | ระยะเวลาส่งออก |
|---------|---------|--------|---------|
| ไม่มีฟิลด์ความสัมพันธ์ | Primary Key / Unique Constraint | 1 ล้าน | 3～6 นาที |  
| ไม่มีฟิลด์ความสัมพันธ์ | ดัชนีทั่วไป (Regular Index) | 1 ล้าน | 6～10 นาที | 
| ไม่มีฟิลด์ความสัมพันธ์ | ดัชนีรวม (Composite Index) (ไม่ซ้ำกัน) | 1 ล้าน | 30 นาที | 
| ฟิลด์ความสัมพันธ์<br>(หนึ่งต่อหนึ่ง, หนึ่งต่อหลาย,<br>หลายต่อหนึ่ง, หลายต่อหลาย) | Primary Key / Unique Constraint | 5 แสน | 15～30 นาที | ฟิลด์ความสัมพันธ์ทำให้ประสิทธิภาพลดลง |

เพื่อให้การส่งออกมีประสิทธิภาพ เราขอแนะนำให้คุณดำเนินการดังนี้ครับ/ค่ะ:
1. คอลเลกชันต้องเป็นไปตามเงื่อนไขต่อไปนี้:

| ประเภทเงื่อนไข | เงื่อนไขที่จำเป็น | หมายเหตุอื่น ๆ |
|---------|------------------------|------|
| โครงสร้างคอลเลกชัน (ต้องเป็นไปตามอย่างน้อยหนึ่งข้อ) | มี Primary Key<br>มี Unique Constraint<br>มี Index (Unique, Regular, Composite) | ลำดับความสำคัญ: Primary Key > Unique Constraint > Index
| คุณสมบัติของฟิลด์ | Primary Key / Unique Constraint / Index (อย่างใดอย่างหนึ่ง) ต้องมีคุณสมบัติที่สามารถจัดเรียงได้ เช่น: Auto-incrementing ID, Snowflake ID, UUID v1, Timestamp, ตัวเลข ฯลฯ<br>(ข้อควรระวัง: ฟิลด์ที่ไม่สามารถจัดเรียงได้ เช่น UUID v3/v4/v5, สตริงทั่วไป ฯลฯ จะส่งผลต่อประสิทธิภาพ) | ไม่มี |

2. ลดจำนวนฟิลด์ที่ไม่จำเป็นต้องส่งออก โดยเฉพาะฟิลด์ความสัมพันธ์ (ปัญหาด้านประสิทธิภาพที่เกิดจากฟิลด์ความสัมพันธ์ยังคงอยู่ระหว่างการปรับปรุงครับ/ค่ะ)
![20250506215940](https://static-docs.nocobase.com/20250506215940.png)
3. หากคุณได้ปฏิบัติตามเงื่อนไขข้างต้นแล้ว แต่การส่งออกยังคงช้าอยู่ คุณสามารถวิเคราะห์บันทึก (logs) หรือแจ้งข้อเสนอแนะไปยังทีมงานอย่างเป็นทางการได้ครับ/ค่ะ
![20250505182122](https://static-docs.nocobase.com/20250505182122.png)

- [กฎการเชื่อมโยง](/interface-builder/actions/action-settings/linkage-rule): แสดง/ซ่อนปุ่มแบบไดนามิก
- [แก้ไขปุ่ม](/interface-builder/actions/action-settings/edit-button): แก้ไขชื่อ, ประเภท และไอคอนของปุ่ม