---
pkg: '@nocobase/plugin-acl'
---

:::tip
เอกสารนี้แปลโดย AI หากมีข้อมูลที่ไม่ถูกต้อง โปรดดู[เวอร์ชันภาษาอังกฤษ](/en)
:::



# การรวมบทบาท (Role Union)

การรวมบทบาท (Role Union) เป็นรูปแบบการจัดการสิทธิ์ที่นักพัฒนาสามารถเลือกได้ตามการตั้งค่าระบบว่าจะใช้บทบาทแบบแยก (Independent roles), อนุญาตให้รวมบทบาท (Allow roles union) หรือใช้การรวมบทบาทเท่านั้น (Roles union only) เพื่อตอบสนองความต้องการด้านสิทธิ์ที่แตกต่างกันครับ/ค่ะ

![20250312184651](https://static-docs.nocobase.com/20250312184651.png)

## บทบาทแบบแยก (Independent roles)

โดยค่าเริ่มต้น ระบบจะใช้บทบาทแบบแยก (Independent roles) ซึ่งหมายความว่าจะไม่มีการรวมบทบาท ผู้ใช้จะต้องสลับบทบาทที่ตนเองมีทีละบทบาทครับ/ค่ะ

![20250312184729](https://static-docs.nocobase.com/20250312184729.png)
![20250312184826](https://static-docs.nocobase.com/20250312184826.png)

## อนุญาตให้รวมบทบาท (Allow roles union)

อนุญาตให้นักพัฒนาสามารถใช้การรวมบทบาท (Allow roles union) ได้ ซึ่งหมายความว่าผู้ใช้จะสามารถใช้สิทธิ์ของทุกบทบาทที่ตนเองมีได้พร้อมกัน ในขณะเดียวกันก็ยังอนุญาตให้ผู้ใช้สลับบทบาทของตนเองทีละบทบาทได้ด้วยครับ/ค่ะ

![20250312185006](https://static-docs.nocobase.com/20250312185006.png)

## ใช้การรวมบทบาทเท่านั้น (Roles union only)

บังคับให้ผู้ใช้ต้องใช้การรวมบทบาทเท่านั้น (Roles union only) และไม่สามารถสลับบทบาททีละบทบาทได้ครับ/ค่ะ

![20250312185105](https://static-docs.nocobase.com/20250312185105.png)

## กฎสำหรับการรวมบทบาท (Role Union)

การรวมบทบาทจะให้สิทธิ์สูงสุดจากทุกบทบาทที่ผู้ใช้มีครับ/ค่ะ ด้านล่างนี้คือคำอธิบายว่าจะตัดสินสิทธิ์ของบทบาทอย่างไรเมื่อมีการตั้งค่าสิทธิ์เดียวกันในบทบาทที่แตกต่างกันเกิดความขัดแย้ง

### การรวมสิทธิ์การดำเนินการ (Operation Permission Merge)

ตัวอย่าง: บทบาทที่ 1 (role1) ถูกตั้งค่าให้อนุญาตการกำหนดค่าส่วนติดต่อผู้ใช้ และบทบาทที่ 2 (role2) ถูกตั้งค่าให้อนุญาตการติดตั้ง, เปิดใช้งาน, และปิดใช้งานปลั๊กอินครับ/ค่ะ

![20250312190133](https://static-docs.nocobase.com/20250312190133.png)

![20250312190352](https://static-docs.nocobase.com/20250312190352.png)

เมื่อเข้าสู่ระบบด้วยบทบาทที่มี**สิทธิ์ทั้งหมด** ผู้ใช้จะได้รับสิทธิ์ทั้งสองอย่างพร้อมกันครับ/ค่ะ

![20250312190621](https://static-docs.nocobase.com/20250312190621.png)

### การรวมขอบเขตข้อมูล (Data Scope Merge)

#### แถวข้อมูล (Data Rows)

สถานการณ์ที่ 1: หลายบทบาทตั้งเงื่อนไขบนฟิลด์เดียวกัน

บทบาท A, เงื่อนไข: Age < 30

| UserID | Name | Age |
| ------ | ---- | --- |
| 1      | Jack | 23  |
| 2      | Lily | 29  |

บทบาท B, เงื่อนไข: Age > 25

| UserID | Name | Age |
| ------ | ---- | --- |
| 2      | Lily | 29  |
| 3      | Sam  | 32  |

หลังจากการรวม:

| UserID | Name | Age |
| ------ | ---- | --- |
| 1      | Jack | 23  |
| 2      | Lily | 29  |
| 3      | Sam  | 32  |

สถานการณ์ที่ 2: บทบาทที่แตกต่างกันตั้งเงื่อนไขบนฟิลด์ที่แตกต่างกัน

บทบาท A, เงื่อนไข: Age < 30

| UserID | Name | Age |
| ------ | ---- | --- |
| 1      | Jack | 23  |
| 2      | Lily | 29  |

บทบาท B, เงื่อนไข: Name มี "Ja"

| UserID | Name   | Age |
| ------ | ------ | --- |
| 1      | Jack   | 23  |
| 3      | Jasmin | 27  |

หลังจากการรวม:

| UserID | Name   | Age |
| ------ | ------ | --- |
| 1      | Jack   | 23  |
| 2      | Lily   | 29  |
| 3      | Jasmin | 27  |

#### คอลัมน์ข้อมูล (Data Columns)

บทบาท A, คอลัมน์ที่มองเห็นได้: Name, Age

| UserID | Name | Age |
| ------ | ---- | --- |
| 1      | Jack | 23  |
| 2      | Lily | 29  |

บทบาท B, คอลัมน์ที่มองเห็นได้: Name, Sex

| UserID | Name | Sex   |
| ------ | ---- | ----- |
| 1      | Jack | Man   |
| 2      | Lily | Woman |

หลังจากการรวม:

| UserID | Name | Age | Sex   |
| ------ | ---- | --- | ----- |
| 1      | Jack | 23  | Man   |
| 2      | Lily | 29  | Woman |

#### การผสมผสานระหว่างแถวและคอลัมน์

บทบาท A, เงื่อนไข: Age < 30, คอลัมน์ที่มองเห็นได้: Name, Age

| UserID | Name | Age |
| ------ | ---- | --- |
| 1      | Jack | 23  |
| 2      | Lily | 29  |

บทบาท B, เงื่อนไข: Name มี "Ja", คอลัมน์ที่มองเห็นได้: Name, Sex

| UserID | Name  | Sex   |
| ------ | ----- | ----- |
| 3      | Jade  | Woman |
| 4      | James | Man   |

หลังจากการรวม:

| UserID | Name  | Age                                              | Sex                                                 |
| ------ | ----- | ------------------------------------------------ | --------------------------------------------------- |
| 1      | Jack  | 23                                               | <span style="background-color:#FFDDDD">Man</span>   |
| 2      | Lily  | 29                                               | <span style="background-color:#FFDDDD">Woman</span> |
| 3      | Jade  | <span style="background-color:#FFDDDD">27</span> | Woman                                               |
| 4      | James | <span style="background-color:#FFDDDD">31</span> | Man                                                 |

**หมายเหตุ: ข้อมูลที่ถูกทำเครื่องหมายไว้บางส่วน อาจไม่สามารถมองเห็นได้ในบทบาทแต่ละบทบาท แต่จะมองเห็นได้เมื่อมีการรวมบทบาท**

#### สรุป

กฎการรวมบทบาทสำหรับขอบเขตข้อมูล:

1.  สำหรับแถวข้อมูล: หากเงื่อนไขใดเงื่อนไขหนึ่งเป็นจริง ถือว่ามีสิทธิ์เข้าถึงแถวนั้น
2.  สำหรับคอลัมน์ข้อมูล: ฟิลด์จะถูกรวมเข้าด้วยกัน
3.  เมื่อมีการตั้งค่าทั้งแถวและคอลัมน์พร้อมกัน: การรวมจะทำแยกกันระหว่างแถวกับแถว และคอลัมน์กับคอลัมน์ ไม่ใช่การรวมแบบชุด (แถว+คอลัมน์) เข้าด้วยกัน