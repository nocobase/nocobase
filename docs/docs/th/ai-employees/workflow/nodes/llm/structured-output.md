---
pkg: "@nocobase/plugin-ai-ee"
---
:::tip
เอกสารนี้แปลโดย AI หากมีข้อมูลที่ไม่ถูกต้อง โปรดดู[เวอร์ชันภาษาอังกฤษ](/en)
:::



# เอาต์พุตแบบมีโครงสร้าง

## บทนำ

ในบางสถานการณ์การใช้งาน ผู้ใช้อาจต้องการให้โมเดล LLM ตอบกลับด้วยเนื้อหาที่มีโครงสร้างในรูปแบบ JSON ซึ่งสามารถทำได้โดยการตั้งค่า "เอาต์พุตแบบมีโครงสร้าง" ครับ/ค่ะ

![](https://static-docs.nocobase.com/202503041306405.png)

## การตั้งค่า

- **JSON Schema** - ผู้ใช้สามารถกำหนดโครงสร้างที่คาดหวังของการตอบกลับจากโมเดลได้โดยการตั้งค่า [JSON Schema](https://json-schema.org/) ครับ/ค่ะ
- **ชื่อ (Name)** - _ไม่บังคับ_ ใช้เพื่อช่วยให้โมเดลเข้าใจวัตถุที่ JSON Schema แสดงถึงได้ดีขึ้นครับ/ค่ะ
- **คำอธิบาย (Description)** - _ไม่บังคับ_ ใช้เพื่อช่วยให้โมเดลเข้าใจวัตถุประสงค์ของ JSON Schema ได้ดีขึ้นครับ/ค่ะ
- **Strict** - กำหนดให้โมเดลสร้างการตอบกลับตามโครงสร้าง JSON Schema อย่างเคร่งครัด ปัจจุบัน มีเพียงโมเดลใหม่บางรุ่นจาก OpenAI เท่านั้นที่รองรับพารามิเตอร์นี้ โปรดตรวจสอบว่าโมเดลของคุณรองรับหรือไม่ก่อนที่จะเลือกใช้งานครับ/ค่ะ

## วิธีการสร้างเนื้อหาแบบมีโครงสร้าง

วิธีการสร้างเนื้อหาแบบมีโครงสร้างของโมเดลจะขึ้นอยู่กับ **โมเดล** ที่ใช้และการตั้งค่า **Response format** ครับ/ค่ะ

1. โมเดลที่ Response format รองรับแค่ `text`

   - เมื่อมีการเรียกใช้งาน โหนดจะผูก Tools ที่สร้างเนื้อหาในรูปแบบ JSON ตาม JSON Schema เพื่อนำทางให้โมเดลสร้างการตอบกลับแบบมีโครงสร้างโดยการเรียกใช้ Tools นั้นครับ/ค่ะ

2. โมเดลที่ Response format รองรับโหมด JSON (`json_object`)

   - หากเลือกโหมด JSON เมื่อมีการเรียกใช้งาน ผู้ใช้จะต้องระบุใน Prompt อย่างชัดเจนให้โมเดลส่งคืนข้อมูลในรูปแบบ JSON และให้คำอธิบายสำหรับฟิลด์การตอบกลับด้วยครับ/ค่ะ
   - ในโหมดนี้ JSON Schema จะถูกใช้เพื่อแยกวิเคราะห์สตริง JSON ที่โมเดลส่งคืนเท่านั้น และแปลงให้เป็นออบเจกต์ JSON เป้าหมายครับ/ค่ะ

3. โมเดลที่ Response format รองรับ JSON Schema (`json_schema`)

   - JSON Schema จะถูกใช้โดยตรงเพื่อระบุโครงสร้างการตอบกลับเป้าหมายสำหรับโมเดลครับ/ค่ะ
   - สามารถเลือกพารามิเตอร์ **Strict** ได้ ซึ่งจะกำหนดให้โมเดลสร้างการตอบกลับตาม JSON Schema อย่างเคร่งครัดครับ/ค่ะ

4. โมเดล Ollama แบบโลคัล
   - หากมีการตั้งค่า JSON Schema เมื่อมีการเรียกใช้งาน โหนดจะส่ง JSON Schema นั้นเป็นพารามิเตอร์ `format` ไปยังโมเดลครับ/ค่ะ

## การใช้งานผลลัพธ์เอาต์พุตแบบมีโครงสร้าง

เนื้อหาแบบมีโครงสร้างที่โมเดลตอบกลับจะถูกบันทึกในรูปแบบออบเจกต์ JSON ในฟิลด์ Structured content ของโหนด และสามารถนำไปใช้โดยโหนดถัดไปได้ครับ/ค่ะ

![](https://static-docs.nocobase.com/202503041330291.png)

![](https://static-docs.nocobase.com/202503041331279.png)