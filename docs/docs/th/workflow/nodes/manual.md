---
pkg: '@nocobase/plugin-workflow-manual'
---
:::tip
เอกสารนี้แปลโดย AI หากมีข้อมูลที่ไม่ถูกต้อง โปรดดู[เวอร์ชันภาษาอังกฤษ](/en)
:::

# การประมวลผลด้วยตนเอง

## บทนำ

เมื่อกระบวนการทางธุรกิจไม่สามารถตัดสินใจได้โดยอัตโนมัติทั้งหมด เราสามารถใช้โหนดการทำงานด้วยตนเอง (Manual Node) เพื่อมอบอำนาจการตัดสินใจบางส่วนให้กับการประมวลผลโดยคนได้ครับ/ค่ะ

เมื่อโหนดการทำงานด้วยตนเองถูกเรียกใช้งาน ระบบจะหยุดการทำงานของ เวิร์กโฟลว์ ทั้งหมดชั่วคราว และสร้างงานที่ต้องทำ (to-do task) ให้กับผู้ใช้ที่เกี่ยวข้องครับ/ค่ะ หลังจากผู้ใช้ส่งงานแล้ว เวิร์กโฟลว์จะดำเนินการต่อ รอต่อไป หรือสิ้นสุดลง ขึ้นอยู่กับสถานะที่เลือก ซึ่งมีประโยชน์อย่างมากในสถานการณ์ที่ต้องการการอนุมัติกระบวนการต่างๆ ครับ/ค่ะ

## การติดตั้ง

เป็น ปลั๊กอิน ที่มาพร้อมกับระบบ ไม่จำเป็นต้องติดตั้งเพิ่มเติมครับ/ค่ะ

## การสร้างโหนด

ในหน้าจอการตั้งค่า เวิร์กโฟลว์ ให้คลิกปุ่มเครื่องหมายบวก ("+") ใน เวิร์กโฟลว์ เพื่อเพิ่มโหนด "การประมวลผลด้วยตนเอง" ครับ/ค่ะ

![สร้างโหนดการทำงานด้วยตนเอง](https://static-docs.nocobase.com/4dd259f1aceeaf9b825abb4b257df909.png)

## การตั้งค่าโหนด

### ผู้รับผิดชอบ

โหนดการทำงานด้วยตนเองจำเป็นต้องระบุผู้ใช้หนึ่งคนเพื่อเป็นผู้ดำเนินการงานที่ต้องทำครับ/ค่ะ รายการงานที่ต้องทำสามารถเพิ่มเป็นบล็อกในหน้าได้ และเนื้อหาของหน้าต่างป๊อปอัปงานสำหรับแต่ละโหนดจะต้องถูกตั้งค่าในส่วนการตั้งค่าอินเทอร์เฟซของโหนดนั้นๆ ครับ/ค่ะ

เลือกผู้ใช้ หรือเลือก Primary Key (คีย์หลัก) หรือ Foreign Key (คีย์นอก) ของข้อมูลผู้ใช้จากบริบทผ่านตัวแปรครับ/ค่ะ

![โหนดการทำงานด้วยตนเอง_ตั้งค่า_ผู้รับผิดชอบ_เลือกตัวแปร](https://static-docs.nocobase.com/22fbca3b8e21fda3a831019037001445.png)

:::info{title=ข้อแนะนำ}
ขณะนี้ตัวเลือกผู้รับผิดชอบสำหรับโหนดการทำงานด้วยตนเองยังไม่รองรับการมอบหมายงานให้ผู้ใช้หลายคนครับ/ค่ะ ฟังก์ชันนี้จะได้รับการสนับสนุนในเวอร์ชันอนาคตครับ/ค่ะ
:::

### การตั้งค่าส่วนติดต่อผู้ใช้

การตั้งค่าส่วนติดต่อผู้ใช้สำหรับรายการงานที่ต้องทำเป็นส่วนสำคัญของโหนดการทำงานด้วยตนเองครับ/ค่ะ คุณสามารถคลิกปุ่ม "ตั้งค่าส่วนติดต่อผู้ใช้" เพื่อเปิดหน้าต่างป๊อปอัปการตั้งค่าแยกต่างหาก ซึ่งสามารถตั้งค่าแบบ WYSIWYG (What You See Is What You Get) ได้เหมือนกับหน้าเว็บทั่วไปเลยครับ/ค่ะ

![โหนดการทำงานด้วยตนเอง_การตั้งค่าโหนด_การตั้งค่าส่วนติดต่อ](https://static-docs.nocobase.com/fd360168c879743cf22d57440cd2590f.png)

#### แถบ (Tabs)

แถบ (Tabs) สามารถใช้เพื่อแยกเนื้อหาที่แตกต่างกันได้ครับ/ค่ะ เช่น แถบหนึ่งสำหรับฟอร์มที่ได้รับการอนุมัติ อีกแถบหนึ่งสำหรับฟอร์มที่ถูกปฏิเสธ หรือใช้เพื่อแสดงรายละเอียดของข้อมูลที่เกี่ยวข้อง เป็นต้น ซึ่งสามารถตั้งค่าได้อย่างอิสระครับ/ค่ะ

#### บล็อก

ประเภทของบล็อกที่รองรับหลักๆ มีสองประเภทใหญ่ๆ คือ บล็อกข้อมูล (Data Blocks) และบล็อกฟอร์ม (Form Blocks) ครับ/ค่ะ ส่วน Markdown จะใช้สำหรับเนื้อหาคงที่ เช่น ข้อความแจ้งเตือนต่างๆ ครับ/ค่ะ

##### บล็อกข้อมูล

บล็อกข้อมูลสามารถเลือกแสดงข้อมูลจากทริกเกอร์ หรือผลลัพธ์จากการประมวลผลของโหนดใดๆ เพื่อให้ข้อมูลบริบทที่เกี่ยวข้องกับผู้รับผิดชอบงานที่ต้องทำครับ/ค่ะ ตัวอย่างเช่น หาก เวิร์กโฟลว์ ถูกทริกเกอร์ด้วยเหตุการณ์ฟอร์ม คุณสามารถสร้างบล็อกรายละเอียดสำหรับข้อมูลทริกเกอร์ได้ ซึ่งจะสอดคล้องกับการตั้งค่ารายละเอียดของหน้าทั่วไป โดยคุณสามารถเลือกฟิลด์ใดก็ได้ที่มีอยู่ในข้อมูลทริกเกอร์เพื่อแสดงผลครับ/ค่ะ

![โหนดการทำงานด้วยตนเอง_การตั้งค่าโหนด_การตั้งค่าส่วนติดต่อ_บล็อกข้อมูล_ทริกเกอร์](https://static-docs.nocobase.com/675c3e58a1a4f45db310a72c2d0a404c.png)

บล็อกข้อมูลโหนดก็คล้ายกันครับ/ค่ะ คุณสามารถเลือกผลลัพธ์ข้อมูลจากโหนดต้นทางเพื่อแสดงเป็นรายละเอียดได้ ตัวอย่างเช่น ผลลัพธ์จากโหนดคำนวณต้นทางสามารถใช้เป็นข้อมูลอ้างอิงบริบทสำหรับงานที่ต้องทำของผู้รับผิดชอบได้ครับ/ค่ะ

![โหนดการทำงานด้วยตนเอง_การตั้งค่าโหนด_การตั้งค่าส่วนติดต่อ_บล็อกข้อมูล_ข้อมูลโหนด](https://static-docs.nocobase.com/a538e26e58a1a4f45db310a72c2d0a404c.png)

:::info{title=ข้อแนะนำ}
เนื่องจากขณะตั้งค่าส่วนติดต่อผู้ใช้ เวิร์กโฟลว์ยังไม่ได้อยู่ในสถานะที่ทำงานอยู่ ดังนั้นจึงไม่มีข้อมูลเฉพาะเจาะจงแสดงในบล็อกข้อมูลครับ/ค่ะ ข้อมูลที่เกี่ยวข้องกับกระบวนการเฉพาะจะปรากฏให้เห็นในหน้าต่างป๊อปอัปงานที่ต้องทำก็ต่อเมื่อ เวิร์กโฟลว์ ถูกทริกเกอร์และทำงานแล้วเท่านั้นครับ/ค่ะ
:::

##### บล็อกฟอร์ม

ในส่วนติดต่อผู้ใช้สำหรับงานที่ต้องทำ จำเป็นต้องมีการตั้งค่าบล็อกฟอร์มอย่างน้อยหนึ่งบล็อก เพื่อใช้ในการตัดสินใจขั้นสุดท้ายว่า เวิร์กโฟลว์ ควรดำเนินการต่อหรือไม่ครับ/ค่ะ หากไม่มีการตั้งค่าฟอร์ม จะทำให้กระบวนการหยุดชะงักและไม่สามารถดำเนินการต่อได้ บล็อกฟอร์มมีสามประเภท ได้แก่:

- ฟอร์มกำหนดเอง
- ฟอร์มสร้างข้อมูลใหม่
- ฟอร์มอัปเดตข้อมูล

![โหนดการทำงานด้วยตนเอง_การตั้งค่าโหนด_การตั้งค่าส่วนติดต่อ_ประเภทฟอร์ม](https://static-docs.nocobase.com/2d068f3012ab07e32a265405492104a8.png)

ฟอร์มสร้างข้อมูลใหม่และฟอร์มอัปเดตข้อมูลจำเป็นต้องเลือก คอลเลกชัน ที่เป็นฐานครับ/ค่ะ หลังจากผู้ใช้ส่งงานที่ต้องทำ ค่าในฟอร์มจะถูกใช้เพื่อเพิ่มหรืออัปเดตข้อมูลใน คอลเลกชัน ที่ระบุ ส่วนฟอร์มกำหนดเองนั้น คุณสามารถกำหนดฟอร์มชั่วคราวที่ไม่เกี่ยวข้องกับ คอลเลกชัน ใดๆ ได้อย่างอิสระครับ/ค่ะ ค่าฟิลด์ที่ผู้ใช้ส่งหลังจากส่งงานที่ต้องทำสามารถนำไปใช้ในโหนดถัดไปได้ครับ/ค่ะ

ปุ่มส่งฟอร์มสามารถตั้งค่าได้สามประเภท ได้แก่:

- ส่งและดำเนินการ เวิร์กโฟลว์ ต่อ
- ส่งและสิ้นสุด เวิร์กโฟลว์
- บันทึกค่าฟอร์มชั่วคราวเท่านั้น

![โหนดการทำงานด้วยตนเอง_การตั้งค่าโหนด_การตั้งค่าส่วนติดต่อ_ปุ่มฟอร์ม](https://static-docs.nocobase.com/6b45995b14152e85a821dff6f6e3189a.png)

ปุ่มทั้งสามนี้แสดงถึงสถานะของโหนดสามแบบในกระบวนการ เวิร์กโฟลว์ ครับ/ค่ะ หลังจากส่งแล้ว สถานะของโหนดจะเปลี่ยนเป็น "เสร็จสมบูรณ์" "ถูกปฏิเสธ" หรือยังคงอยู่ในสถานะ "รอ" ครับ/ค่ะ ฟอร์มจะต้องมีการตั้งค่าปุ่มอย่างน้อยหนึ่งในสองปุ่มแรก เพื่อกำหนดทิศทางการดำเนินการต่อของ เวิร์กโฟลว์ ทั้งหมดครับ/ค่ะ

บนปุ่ม "ดำเนินการ เวิร์กโฟลว์ ต่อ" คุณสามารถตั้งค่าการกำหนดค่าให้กับฟิลด์ในฟอร์มได้ครับ/ค่ะ

![โหนดการทำงานด้วยตนเอง_การตั้งค่าโหนด_การตั้งค่าส่วนติดต่อ_ปุ่มฟอร์ม_ตั้งค่าค่าฟอร์ม](https://static-docs.nocobase.com/2cec2d4e2957f068877e616dec3b56dd.png)

![โหนดการทำงานด้วยตนเอง_การตั้งค่าโหนด_การตั้งค่าส่วนติดต่อ_ปุ่มฟอร์ม_หน้าต่างป๊อปอัปตั้งค่าค่าฟอร์ม](https://static-docs.nocobase.com/5ff51b60c76cdb76e6f1cc95dc3d8640.png)

หลังจากเปิดหน้าต่างป๊อปอัป คุณสามารถกำหนดค่าให้กับฟิลด์ใดๆ ในฟอร์มได้ครับ/ค่ะ เมื่อฟอร์มถูกส่ง ค่านี้จะกลายเป็นค่าสุดท้ายของฟิลด์นั้นๆ ซึ่งมีประโยชน์อย่างยิ่งเมื่อทำการตรวจสอบข้อมูลครับ/ค่ะ คุณสามารถใช้ปุ่ม "ดำเนินการ เวิร์กโฟลว์ ต่อ" ที่แตกต่างกันหลายปุ่มในฟอร์มเดียว โดยแต่ละปุ่มจะตั้งค่า Enum (ค่าคงที่) ที่แตกต่างกันสำหรับฟิลด์ที่มีสถานะคล้ายกัน เพื่อให้สามารถดำเนินการ เวิร์กโฟลว์ ต่อไปได้โดยใช้ค่าข้อมูลที่แตกต่างกันครับ/ค่ะ

## บล็อกงานที่ต้องทำ

สำหรับการประมวลผลด้วยตนเอง คุณจำเป็นต้องเพิ่มรายการงานที่ต้องทำ (To-do list) ลงในหน้าเว็บด้วยครับ/ค่ะ เพื่อแสดงงานที่ต้องทำ และเพื่อให้บุคลากรที่เกี่ยวข้องสามารถเข้าถึงและจัดการงานเฉพาะของโหนดการทำงานด้วยตนเองผ่านรายการนี้ได้ครับ/ค่ะ

### การเพิ่มบล็อก

คุณสามารถเลือก "งานที่ต้องทำของ เวิร์กโฟลว์" จากบล็อกในหน้า เพื่อเพิ่มบล็อกรายการงานที่ต้องทำได้ครับ/ค่ะ

![โหนดการทำงานด้วยตนเอง_เพิ่มบล็อกงานที่ต้องทำ](https://static-docs.nocobase.com/198b41754cd73b704267bf30fe5e647.png)

ตัวอย่างบล็อกรายการงานที่ต้องทำ:

![โหนดการทำงานด้วยตนเอง_รายการงานที่ต้องทำ](https://static-docs.nocobase.com/cfefb0534.png)

### รายละเอียดงานที่ต้องทำ

หลังจากนั้น บุคลากรที่เกี่ยวข้องสามารถคลิกที่งานที่ต้องทำที่เกี่ยวข้อง เพื่อเปิดหน้าต่างป๊อปอัปงานที่ต้องทำและดำเนินการประมวลผลด้วยตนเองได้ครับ/ค่ะ

![โหนดการทำงานด้วยตนเอง_รายละเอียดงานที่ต้องทำ](https://static-docs.nocobase.com/ccfd0533deebff6b3f6ef4408066e688.png)

## ตัวอย่าง

### การตรวจสอบบทความ

สมมติว่าบทความที่ผู้ใช้ทั่วไปส่งมา จำเป็นต้องได้รับการอนุมัติจากผู้ดูแลระบบก่อนจึงจะสามารถอัปเดตเป็นสถานะเผยแพร่ได้ครับ/ค่ะ หาก เวิร์กโฟลว์ ถูกปฏิเสธ บทความจะยังคงอยู่ในสถานะฉบับร่าง (ไม่เป็นสาธารณะ) กระบวนการนี้สามารถทำได้โดยใช้ฟอร์มอัปเดตในโหนดการทำงานด้วยตนเองครับ/ค่ะ

สร้าง เวิร์กโฟลว์ ที่ถูกทริกเกอร์โดย "เพิ่มบทความใหม่" และเพิ่มโหนดการทำงานด้วยตนเองครับ/ค่ะ

<figure>
  <img alt="โหนดการทำงานด้วยตนเอง_ตัวอย่าง_การตรวจสอบบทความ_การจัดเรียง เวิร์กโฟลว์" src="https://github.com/nocobase/nocobase/assets/525658/2021bf42-f372-4f69-9c84-5a786c061e0e" width="360" />
</figure>

ในโหนดการทำงานด้วยตนเอง ให้ตั้งค่าผู้รับผิดชอบเป็นผู้ดูแลระบบครับ/ค่ะ ในส่วนการตั้งค่าส่วนติดต่อผู้ใช้ ให้เพิ่มบล็อกที่อิงตามข้อมูลทริกเกอร์ เพื่อแสดงรายละเอียดของบทความที่เพิ่มเข้ามาใหม่ครับ/ค่ะ

<figure>
  <img alt="โหนดการทำงานด้วยตนเอง_ตัวอย่าง_การตรวจสอบบทความ_การตั้งค่าโหนด_บล็อกรายละเอียด" src="https://github.com/nocobase/nocobase/assets/525658/c61d0aac-23cb-4387-b60e-ce3cc7bf1c24" width="680" />
</figure>

ในส่วนการตั้งค่าส่วนติดต่อผู้ใช้ ให้เพิ่มบล็อกที่อิงตามฟอร์มอัปเดตข้อมูล โดยเลือก คอลเลกชัน บทความ เพื่อให้ผู้ดูแลระบบตัดสินใจว่าจะอนุมัติหรือไม่ครับ/ค่ะ หลังจากอนุมัติแล้ว บทความที่เกี่ยวข้องจะถูกอัปเดตตามการตั้งค่าอื่นๆ ที่ตามมาครับ/ค่ะ เมื่อเพิ่มฟอร์มแล้ว จะมีปุ่ม "ดำเนินการ เวิร์กโฟลว์ ต่อ" เป็นค่าเริ่มต้น ซึ่งสามารถถือเป็นการอนุมัติเมื่อคลิก จากนั้นให้เพิ่มปุ่ม "สิ้นสุด เวิร์กโฟลว์" สำหรับกรณีที่การตรวจสอบไม่ผ่านครับ/ค่ะ

<figure>
  <img alt="โหนดการทำงานด้วยตนเอง_ตัวอย่าง_การตรวจสอบบทความ_การตั้งค่าโหนด_ฟอร์มและการดำเนินการ" src="https://github.com/nocobase/nocobase/assets/525658/4baaf41e-3d81-4ee8-a038-29db05e0d99f" width="673" />
</figure>

เมื่อดำเนินการ เวิร์กโฟลว์ ต่อ เราจำเป็นต้องอัปเดตสถานะของบทความครับ/ค่ะ มีสองวิธีในการตั้งค่านี้ครับ/ค่ะ วิธีแรกคือการแสดงฟิลด์สถานะของบทความโดยตรงในฟอร์มเพื่อให้ผู้ดำเนินการเลือก ซึ่งวิธีนี้เหมาะสำหรับสถานการณ์ที่ต้องการให้กรอกฟอร์มอย่างกระตือรือร้น เช่น การให้ข้อเสนอแนะ เป็นต้นครับ/ค่ะ

<figure>
  <img alt="โหนดการทำงานด้วยตนเอง_ตัวอย่าง_การตรวจสอบบทความ_การตั้งค่าโหนด_ฟิลด์ฟอร์ม" src="https://github.com/nocobase/nocobase/assets/525658/82ea4e0e-25fc-4921-841e-e1a2782a87d1" width="668" />
</figure>

เพื่อให้การทำงานของผู้ดำเนินการง่ายขึ้น อีกวิธีหนึ่งคือการตั้งค่าการกำหนดค่าฟอร์มบนปุ่ม "ดำเนินการ เวิร์กโฟลว์ ต่อ" ครับ/ค่ะ ในการกำหนดค่า ให้เพิ่มฟิลด์ "สถานะ" โดยมีค่าเป็น "เผยแพร่แล้ว" ซึ่งหมายความว่าเมื่อผู้ดำเนินการคลิกปุ่ม บทความจะถูกอัปเดตเป็นสถานะเผยแพร่แล้วครับ/ค่ะ

<figure>
  <img alt="โหนดการทำงานด้วยตนเอง_ตัวอย่าง_การตรวจสอบบทความ_การตั้งค่าโหนด_การกำหนดค่าฟอร์ม" src="https://github.com/nocobase/nocobase/assets/525658/0340bd9f-8323-4e4f-bc5a-8f81be3d6736" width="711" />
</figure>

จากนั้น จากเมนูการตั้งค่าที่มุมขวาบนของบล็อกฟอร์ม ให้เลือกเงื่อนไขการกรองสำหรับข้อมูลที่จะอัปเดตครับ/ค่ะ ในที่นี้ ให้เลือก คอลเลกชัน "บทความ" และเงื่อนไขการกรองคือ "ID `เท่ากับ` ตัวแปรทริกเกอร์ / ข้อมูลทริกเกอร์ / ID" ครับ/ค่ะ

<figure>
  <img alt="โหนดการทำงานด้วยตนเอง_ตัวอย่าง_การตรวจสอบบทความ_การตั้งค่าโหนด_เงื่อนไขฟอร์ม" src="https://github.com/nocobase/nocobase/assets/525658/da004055-0262-49ae-88dd-3844f3c92e28" width="1020" />
</figure>

สุดท้าย คุณสามารถแก้ไขชื่อของแต่ละบล็อก ข้อความบนปุ่มที่เกี่ยวข้อง และข้อความแนะนำของฟิลด์ฟอร์ม เพื่อให้ส่วนติดต่อผู้ใช้เป็นมิตรมากยิ่งขึ้นครับ/ค่ะ

<figure>
  <img alt="โหนดการทำงานด้วยตนเอง_ตัวอย่าง_การตรวจสอบบทความ_การตั้งค่าโหนด_ฟอร์มสุดท้าย" src="https://github.com/nocobase/nocobase/assets/525658/21db5f6b-690b-49c1-8259-4f7b8874620d" width="678" />
</figure>

ปิดแผงการตั้งค่าและคลิกปุ่มส่งเพื่อบันทึกการตั้งค่าโหนดครับ/ค่ะ ตอนนี้ เวิร์กโฟลว์ ได้รับการตั้งค่าเรียบร้อยแล้ว หลังจากเปิดใช้งาน เวิร์กโฟลว์ นี้ เมื่อมีการเพิ่มบทความใหม่ เวิร์กโฟลว์ จะถูกทริกเกอร์โดยอัตโนมัติครับ/ค่ะ ผู้ดูแลระบบสามารถดูได้จากรายการงานที่ต้องทำว่า เวิร์กโฟลว์ นี้ต้องได้รับการประมวลผล และเมื่อคลิกดู ก็จะเห็นรายละเอียดของงานที่ต้องทำครับ/ค่ะ

<figure>
  <img alt="โหนดการทำงานด้วยตนเอง_ตัวอย่าง_การตรวจสอบบทความ_รายการงานที่ต้องทำ" src="https://github.com/nocobase/nocobase/assets/525658/4e1748cd-6a07-4045-82e5-286826607826" width="1363" />
</figure>

<figure>
  <img alt="โหนดการทำงานด้วยตนเอง_ตัวอย่าง_การตรวจสอบบทความ_รายละเอียดงานที่ต้องทำ" src="https://github.com/nocobase/nocobase/assets/525658/65f01fb1-8cb0-45f8-ac21-ec8ab59be449" width="680" />
</figure>

ผู้ดูแลระบบสามารถพิจารณาด้วยตนเองจากรายละเอียดของบทความ เพื่อตัดสินใจว่าบทความนั้นสามารถเผยแพร่ได้หรือไม่ครับ/ค่ะ หากสามารถเผยแพร่ได้ ให้คลิกปุ่ม "อนุมัติ" บทความจะถูกอัปเดตเป็นสถานะเผยแพร่แล้ว แต่ถ้าไม่สามารถเผยแพร่ได้ ให้คลิกปุ่ม "ปฏิเสธ" บทความจะยังคงอยู่ในสถานะฉบับร่างครับ/ค่ะ

## การอนุมัติการลา

สมมติว่าพนักงานต้องการขอลา ซึ่งต้องได้รับการอนุมัติจากหัวหน้างานก่อนจึงจะมีผล และข้อมูลการลาของพนักงานที่เกี่ยวข้องจะต้องถูกหักออกครับ/ค่ะ ไม่ว่าจะได้รับการอนุมัติหรือปฏิเสธ ก็จะมีการใช้โหนดคำขอ HTTP เพื่อเรียกใช้ API SMS เพื่อส่งข้อความแจ้งเตือนที่เกี่ยวข้องไปยังพนักงาน (ดูส่วน [คำขอ HTTP](#_HTTP_请求)) ครับ/ค่ะ สถานการณ์นี้สามารถทำได้โดยใช้ฟอร์มกำหนดเองในโหนดการทำงานด้วยตนเองครับ/ค่ะ

สร้าง เวิร์กโฟลว์ ที่ถูกทริกเกอร์โดย "สร้างคำขอลา" และเพิ่มโหนดการทำงานด้วยตนเองครับ/ค่ะ ซึ่งคล้ายกับกระบวนการตรวจสอบบทความก่อนหน้านี้ เพียงแต่ในที่นี้ผู้รับผิดชอบคือหัวหน้างานครับ/ค่ะ ในส่วนการตั้งค่าส่วนติดต่อผู้ใช้ ให้เพิ่มบล็อกที่อิงตามข้อมูลทริกเกอร์ เพื่อแสดงรายละเอียดของคำขอลาใหม่ จากนั้นเพิ่มบล็อกที่อิงตามฟอร์มกำหนดเอง เพื่อให้หัวหน้างานตัดสินใจว่าจะอนุมัติหรือไม่ครับ/ค่ะ ในฟอร์มกำหนดเอง ให้เพิ่มฟิลด์สำหรับสถานะการอนุมัติ และฟิลด์สำหรับเหตุผลในการปฏิเสธครับ/ค่ะ

<figure>
  <img alt="โหนดการทำงานด้วยตนเอง_ตัวอย่าง_การอนุมัติการลา_การตั้งค่าโหนด" src="https://github.com/nocobase/nocobase/assets/525658/ef3bc7b8-56e8-4a4e-826e-ffd0b547d1b6" width="675" />
</figure>

แตกต่างจากกระบวนการตรวจสอบบทความครับ/ค่ะ เนื่องจากเราจำเป็นต้องดำเนินการตามกระบวนการต่อไปโดยอิงจากผลการอนุมัติของหัวหน้างาน ดังนั้นในที่นี้เราจึงตั้งค่าเพียงปุ่ม "ดำเนินการ เวิร์กโฟลว์ ต่อ" เพื่อใช้ในการส่งเท่านั้น และไม่ได้ใช้ปุ่ม "สิ้นสุด เวิร์กโฟลว์" ครับ/ค่ะ

ในขณะเดียวกัน หลังจากโหนดการทำงานด้วยตนเอง เราสามารถใช้โหนดเงื่อนไขเพื่อตรวจสอบว่าหัวหน้างานได้อนุมัติคำขอลาหรือไม่ครับ/ค่ะ ในสาขาที่อนุมัติ ให้เพิ่มการประมวลผลข้อมูลเพื่อหักวันลา และหลังจากสาขาต่างๆ รวมกันแล้ว ให้เพิ่มโหนดคำขอเพื่อส่งข้อความ SMS แจ้งเตือนพนักงาน ซึ่งจะได้ เวิร์กโฟลว์ ที่สมบูรณ์ดังนี้ครับ/ค่ะ

<figure>
  <img alt="โหนดการทำงานด้วยตนเอง_ตัวอย่าง_การอนุมัติการลา_การจัดเรียง เวิร์กโฟลว์" src="https://github.com/nocobase/nocobase/assets/525658/733f68da-e44f-4172-9772-a287ac2724f2" width="593" />
</figure>

โดยเงื่อนไขในโหนดการตัดสินใจตามเงื่อนไขถูกตั้งค่าเป็น "โหนดการทำงานด้วยตนเอง / ข้อมูลฟอร์มกำหนดเอง / ค่าของฟิลด์อนุมัติเป็น 'อนุมัติแล้ว'" ครับ/ค่ะ

<figure>
  <img alt="โหนดการทำงานด้วยตนเอง_ตัวอย่าง_การอนุมัติการลา_การตัดสินใจตามเงื่อนไข" src="https://github.com/nocobase/nocobase/assets/525658/57b972f0-a3ce-4f33-8d40-4272ad205c20" width="678" />
</figure>

ข้อมูลในโหนดส่งคำขอยังสามารถใช้ตัวแปรฟอร์มที่เกี่ยวข้องจากโหนดการทำงานด้วยตนเอง เพื่อแยกแยะเนื้อหา SMS สำหรับการอนุมัติและการปฏิเสธได้ครับ/ค่ะ ด้วยวิธีนี้ การตั้งค่า เวิร์กโฟลว์ ทั้งหมดก็เสร็จสมบูรณ์ครับ/ค่ะ หลังจากเปิดใช้งาน เวิร์กโฟลว์ แล้ว เมื่อพนักงานส่งฟอร์มคำขอลา หัวหน้างานก็สามารถดำเนินการอนุมัติในงานที่ต้องทำได้ครับ/ค่ะ โดยการทำงานจะคล้ายกับกระบวนการตรวจสอบบทความครับ/ค่ะ