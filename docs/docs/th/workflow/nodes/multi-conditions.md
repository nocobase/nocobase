:::tip
เอกสารนี้แปลโดย AI หากมีข้อมูลที่ไม่ถูกต้อง โปรดดู[เวอร์ชันภาษาอังกฤษ](/en)
:::


# เงื่อนไขหลายรายการ <Badge>v2.0.0+</Badge>

## บทนำ

คล้ายกับคำสั่ง `switch / case` หรือ `if / else if` ในภาษาโปรแกรมครับ/ค่ะ ระบบจะประเมินเงื่อนไขหลายรายการที่คุณตั้งค่าไว้ทีละรายการตามลำดับ เมื่อตรงตามเงื่อนไขใดเงื่อนไขหนึ่ง ระบบจะดำเนินการตามขั้นตอนในสาขา (branch) นั้นทันที และจะข้ามการตรวจสอบเงื่อนไขที่เหลือไปครับ/ค่ะ หากไม่มีเงื่อนไขใดตรงเลย ระบบจะไปดำเนินการที่สาขา "มิฉะนั้น" (Otherwise) แทนครับ/ค่ะ

## การสร้างโหนด

ในหน้าจอการตั้งค่าเวิร์กโฟลว์ ให้คลิกปุ่มเครื่องหมายบวก ('+') ในโฟลว์ เพื่อเพิ่มโหนด "เงื่อนไขหลายรายการ" ครับ/ค่ะ

![สร้างโหนดเงื่อนไขหลายรายการ](https://static-docs.nocobase.com/20251123222134.png)

## การจัดการสาขา

### สาขาเริ่มต้น

หลังจากสร้างโหนดแล้ว จะมีสาขาเริ่มต้นอยู่ 2 สาขาครับ/ค่ะ:

1.  **สาขาเงื่อนไข**: สำหรับตั้งค่าเงื่อนไขเฉพาะเจาะจง
2.  **สาขามิฉะนั้น (Otherwise)**: จะเข้าสู่สาขานี้เมื่อไม่มีสาขาเงื่อนไขใดตรงเลย โดยไม่ต้องตั้งค่าเงื่อนไขครับ/ค่ะ

คุณสามารถเพิ่มสาขาเงื่อนไขได้อีก โดยคลิกปุ่ม "เพิ่มสาขา" (Add branch) ที่อยู่ด้านล่างโหนดครับ/ค่ะ

![20251123222540](https://static-docs.nocobase.com/20251123222540.png)

### การเพิ่มสาขา

หลังจากคลิก "เพิ่มสาขา" แล้ว สาขาใหม่จะถูกเพิ่มเข้ามาอยู่ก่อนสาขา "มิฉะนั้น" ครับ/ค่ะ

![20251123222805](https://static-docs.nocobase.com/20251123222805.png)

### การลบสาขา

เมื่อมีสาขาเงื่อนไขหลายรายการ คุณสามารถลบสาขาได้โดยคลิกไอคอนรูปถังขยะที่อยู่ทางด้านขวาของสาขานั้นครับ/ค่ะ แต่หากเหลือสาขาเงื่อนไขเพียงสาขาเดียว จะไม่สามารถลบได้ครับ/ค่ะ

![20251123223127](https://static-docs.nocobase.com/20251123223127.png)

:::info{title=ข้อควรทราบ}
การลบสาขาจะลบโหนดทั้งหมดที่อยู่ในสาขานั้นด้วยครับ/ค่ะ โปรดดำเนินการด้วยความระมัดระวัง

สาขา "มิฉะนั้น" เป็นสาขาที่มาพร้อมระบบ ไม่สามารถลบได้ครับ/ค่ะ
:::

## การตั้งค่าโหนด

### การตั้งค่าเงื่อนไข

คุณสามารถแก้ไขรายละเอียดเงื่อนไขได้ โดยคลิกที่ชื่อเงื่อนไขที่อยู่ด้านบนของสาขาครับ/ค่ะ

![20251123223352](https://static-docs.nocobase.com/20251123223352.png)

#### ป้ายกำกับเงื่อนไข

รองรับการใช้ป้ายกำกับที่กำหนดเองครับ/ค่ะ เมื่อกรอกแล้ว จะแสดงเป็นชื่อเงื่อนไขในผังโฟลว์ หากไม่ได้ตั้งค่า (หรือปล่อยว่างไว้) ระบบจะแสดงเป็น "เงื่อนไข 1", "เงื่อนไข 2" เป็นต้น ตามลำดับครับ/ค่ะ

![20251123224209](https://static-docs.nocobase.com/20251123224209.png)

#### เอนจินการคำนวณ

ปัจจุบันรองรับเอนจิน 3 ประเภทครับ/ค่ะ:

-   **พื้นฐาน (Basic)**: ใช้การเปรียบเทียบเชิงตรรกะแบบง่าย (เช่น เท่ากับ, มีค่า) และการรวมกันแบบ "และ" (AND) หรือ "หรือ" (OR) เพื่อหาผลลัพธ์
-   **Math.js**: รองรับการคำนวณนิพจน์โดยใช้ไวยากรณ์ของ [Math.js](https://mathjs.org/)
-   **Formula.js**: รองรับการคำนวณนิพจน์โดยใช้ไวยากรณ์ของ [Formula.js](https://formulajs.info/) (คล้ายกับสูตร Excel)

ทั้งสามโหมดรองรับการใช้ตัวแปรบริบทของเวิร์กโฟลว์เป็นพารามิเตอร์ครับ/ค่ะ

### เมื่อไม่มีเงื่อนไขใดตรงเลย

ในแผงการตั้งค่าโหนด คุณสามารถกำหนดการดำเนินการถัดไปได้ เมื่อไม่มีเงื่อนไขใดตรงเลยครับ/ค่ะ:

![20251123224348](https://static-docs.nocobase.com/20251123224348.png)

*   **จบเวิร์กโฟลว์ด้วยความล้มเหลว (ค่าเริ่มต้น)**: จะทำเครื่องหมายสถานะเวิร์กโฟลว์ว่าล้มเหลว และยุติกระบวนการครับ/ค่ะ
*   **ดำเนินการต่อที่โหนดถัดไป**: หลังจากโหนดปัจจุบันทำงานเสร็จแล้ว จะดำเนินการต่อที่โหนดถัดไปในเวิร์กโฟลว์ครับ/ค่ะ

:::info{title=ข้อควรทราบ}
ไม่ว่าจะเลือกวิธีการจัดการแบบใดก็ตาม เมื่อไม่มีเงื่อนไขใดตรงเลย โฟลว์จะเข้าสู่สาขา "มิฉะนั้น" ก่อน เพื่อดำเนินการโหนดที่อยู่ในนั้นครับ/ค่ะ
:::

## ประวัติการดำเนินการ

ในประวัติการดำเนินการของเวิร์กโฟลว์ โหนดเงื่อนไขหลายรายการจะแสดงผลการประเมินของแต่ละเงื่อนไขด้วยสีที่แตกต่างกันครับ/ค่ะ:

-   **สีเขียว**: เงื่อนไขตรงตามที่กำหนด และเข้าสู่สาขาเพื่อดำเนินการ
-   **สีแดง**: เงื่อนไขไม่ตรงตามที่กำหนด (หรือเกิดข้อผิดพลาดในการคำนวณ) และข้ามสาขานี้ไป
-   **สีน้ำเงิน**: ไม่ได้ดำเนินการประเมิน (เนื่องจากเงื่อนไขก่อนหน้าตรงตามที่กำหนดแล้ว จึงข้ามการประเมินที่เหลือไป)

![20251123225455](https://static-docs.nocobase.com/20251123225455.png)

หากเกิดข้อผิดพลาดในการตั้งค่าทำให้การคำนวณเงื่อนไขผิดปกติ นอกจากการแสดงเป็นสีแดงแล้ว เมื่อนำเมาส์ไปวางเหนือชื่อเงื่อนไข จะแสดงข้อมูลข้อผิดพลาดโดยละเอียดครับ/ค่ะ:

![20251123231014](https://static-docs.nocobase.com/20251123231014.png)

เมื่อเกิดข้อผิดพลาดในการคำนวณเงื่อนไข โหนดเงื่อนไขหลายรายการจะสิ้นสุดลงด้วยสถานะ "ผิดพลาด" และจะไม่ดำเนินการต่อที่โหนดถัดไปครับ/ค่ะ