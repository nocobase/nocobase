:::tip
เอกสารนี้แปลโดย AI หากมีข้อมูลที่ไม่ถูกต้อง โปรดดู[เวอร์ชันภาษาอังกฤษ](/en)
:::


# คิวรีข้อมูล

ใช้สำหรับคิวรีและดึงเรคคอร์ดข้อมูลจากคอลเลกชันที่ตรงตามเงื่อนไขที่กำหนดครับ/ค่ะ

คุณสามารถตั้งค่าให้คิวรีข้อมูลได้ทั้งแบบเรคคอร์ดเดียวหรือหลายเรคคอร์ด ผลลัพธ์จากการคิวรีสามารถนำไปใช้เป็นตัวแปรในโหนดถัดไปได้ หากคิวรีหลายเรคคอร์ด ผลลัพธ์จะเป็นอาร์เรย์ และหากผลลัพธ์จากการคิวรีว่างเปล่า คุณสามารถเลือกได้ว่าจะให้ดำเนินการต่อในโหนดถัดไปหรือไม่ครับ/ค่ะ

## สร้างโหนด

ในหน้าจอการตั้งค่าเวิร์กโฟลว์ ให้คลิกที่ปุ่มเครื่องหมายบวก ("+") ในโฟลว์เพื่อเพิ่มโหนด "คิวรีข้อมูล" ครับ/ค่ะ

![เพิ่มโหนดคิวรีข้อมูล](https://static-docs.nocobase.com/c1ef2b851b437806faf7a39c6ab9d33a.png)

## การตั้งค่าโหนด

![การตั้งค่าโหนดคิวรี](https://static-docs.nocobase.com/20240520131324.png)

### คอลเลกชัน

เลือกคอลเลกชันที่คุณต้องการคิวรีข้อมูลครับ/ค่ะ

### ประเภทผลลัพธ์

ประเภทผลลัพธ์แบ่งออกเป็น 2 แบบ ได้แก่ "เรคคอร์ดเดียว" และ "หลายเรคคอร์ด" ครับ/ค่ะ

-   **เรคคอร์ดเดียว**: ผลลัพธ์จะเป็นอ็อบเจกต์ ซึ่งเป็นเรคคอร์ดแรกที่ตรงกันเท่านั้น หรือเป็นค่า `null`
-   **หลายเรคคอร์ด**: ผลลัพธ์จะเป็นอาร์เรย์ที่ประกอบด้วยเรคคอร์ดที่ตรงตามเงื่อนไข หากไม่มีเรคคอร์ดใดตรงกัน ผลลัพธ์จะเป็นอาร์เรย์ว่างเปล่า คุณสามารถประมวลผลทีละรายการได้โดยใช้โหนดวนซ้ำ (Loop) ครับ/ค่ะ

### เงื่อนไขการกรอง

คล้ายกับเงื่อนไขการกรองในการคิวรีคอลเลกชันทั่วไป คุณสามารถใช้ตัวแปรบริบทของเวิร์กโฟลว์ได้ครับ/ค่ะ

### การจัดเรียง

เมื่อคิวรีเรคคอร์ดเดียวหรือหลายเรคคอร์ด คุณสามารถใช้กฎการจัดเรียงเพื่อควบคุมผลลัพธ์ที่ต้องการได้ครับ/ค่ะ ตัวอย่างเช่น หากต้องการคิวรีเรคคอร์ดล่าสุด คุณสามารถจัดเรียงตามฟิลด์ "เวลาที่สร้าง" (Creation Time) ในลำดับจากมากไปน้อย (Descending Order) ได้ครับ/ค่ะ

### การแบ่งหน้า (Pagination)

เมื่อชุดผลลัพธ์มีขนาดใหญ่มาก คุณสามารถใช้การแบ่งหน้าเพื่อควบคุมจำนวนผลลัพธ์จากการคิวรีได้ครับ/ค่ะ ตัวอย่างเช่น หากต้องการคิวรี 10 เรคคอร์ดล่าสุด คุณสามารถจัดเรียงตามฟิลด์ "เวลาที่สร้าง" (Creation Time) ในลำดับจากมากไปน้อย แล้วตั้งค่าการแบ่งหน้าเป็น 1 หน้า จำนวน 10 เรคคอร์ดครับ/ค่ะ

### การจัดการผลลัพธ์ที่ว่างเปล่า

ในโหมดเรคคอร์ดเดียว หากไม่มีข้อมูลที่ตรงตามเงื่อนไข ผลลัพธ์จากการคิวรีจะเป็น `null` ส่วนในโหมดหลายเรคคอร์ด ผลลัพธ์จะเป็นอาร์เรย์ว่างเปล่า (`[]`) คุณสามารถเลือกได้ว่าจะทำเครื่องหมายที่ช่อง "ออกจากเวิร์กโฟลว์เมื่อผลลัพธ์การคิวรีว่างเปล่า" หรือไม่ครับ/ค่ะ หากเลือกช่องนี้ และผลลัพธ์จากการคิวรีว่างเปล่า โหนดถัดไปจะไม่ถูกดำเนินการ และเวิร์กโฟลว์จะหยุดทำงานก่อนกำหนดพร้อมสถานะล้มเหลวครับ/ค่ะ