:::tip
เอกสารนี้แปลโดย AI หากมีข้อมูลที่ไม่ถูกต้อง โปรดดู[เวอร์ชันภาษาอังกฤษ](/en)
:::


# อัปเดตข้อมูล

ใช้สำหรับอัปเดตข้อมูลในคอลเลกชันที่ตรงตามเงื่อนไขที่กำหนดครับ/ค่ะ

ส่วนของการกำหนดคอลเลกชันและค่าฟิลด์จะเหมือนกับโหนด "สร้างข้อมูล" ครับ/ค่ะ ความแตกต่างหลักของโหนด "อัปเดตข้อมูล" คือมีการเพิ่มเงื่อนไขการกรอง (Filter Conditions) และจำเป็นต้องเลือกโหมดการอัปเดต (Update Mode) ครับ/ค่ะ นอกจากนี้ ผลลัพธ์ของโหนด "อัปเดตข้อมูล" จะส่งคืนจำนวนแถวที่อัปเดตสำเร็จ ซึ่งสามารถดูได้จากประวัติการทำงานเท่านั้น และไม่สามารถนำไปใช้เป็นตัวแปรในโหนดถัดไปได้ครับ/ค่ะ

## สร้างโหนด

ในหน้าจอตั้งค่าเวิร์กโฟลว์ ให้คลิกปุ่มเครื่องหมายบวก ("+") ในโฟลว์เพื่อเพิ่มโหนด "อัปเดตข้อมูล" ครับ/ค่ะ

![เพิ่มโหนดอัปเดตข้อมูล](https://static-docs.nocobase.com/9ff24d7bc173b3a71decc1f70ca9fb66.png)

## การตั้งค่าโหนด

![การตั้งค่าโหนดอัปเดตข้อมูล](https://static-docs.nocobase.com/98e0f941c57275fc835f08260d0b2e86.png)

### คอลเลกชัน

เลือกคอลเลกชันที่ต้องการอัปเดตข้อมูลครับ/ค่ะ

### โหมดการอัปเดต

โหมดการอัปเดตมี 2 แบบครับ/ค่ะ

*   **อัปเดตแบบกลุ่ม (Bulk update)**: จะไม่ทริกเกอร์เหตุการณ์ของคอลเลกชันสำหรับข้อมูลที่อัปเดตแต่ละรายการ ทำให้มีประสิทธิภาพดีกว่าและเหมาะสำหรับการอัปเดตข้อมูลจำนวนมากครับ/ค่ะ
*   **อัปเดตทีละรายการ (Update one by one)**: จะทริกเกอร์เหตุการณ์ของคอลเลกชันสำหรับข้อมูลที่อัปเดตแต่ละรายการ อย่างไรก็ตาม อาจทำให้เกิดปัญหาด้านประสิทธิภาพเมื่อมีข้อมูลจำนวนมาก จึงควรใช้ด้วยความระมัดระวังครับ/ค่ะ

โดยปกติแล้ว การเลือกโหมดจะขึ้นอยู่กับข้อมูลเป้าหมายที่ต้องการอัปเดตและว่าจะต้องทริกเกอร์เหตุการณ์เวิร์กโฟลว์อื่น ๆ หรือไม่ครับ/ค่ะ หากเป็นการอัปเดตข้อมูลเพียงรายการเดียวโดยอ้างอิงจาก Primary Key แนะนำให้ใช้ `อัปเดตทีละรายการ` แต่ถ้าเป็นการอัปเดตข้อมูลหลายรายการตามเงื่อนไข แนะนำให้ใช้ `อัปเดตแบบกลุ่ม` ครับ/ค่ะ

### เงื่อนไขการกรอง

คล้ายกับเงื่อนไขการกรองในการสอบถามข้อมูลคอลเลกชันทั่วไปครับ/ค่ะ คุณสามารถใช้ตัวแปรบริบท (Context Variables) จากเวิร์กโฟลว์ได้

### ค่าฟิลด์

คล้ายกับการกำหนดค่าฟิลด์ในโหนด "สร้างข้อมูล" ครับ/ค่ะ คุณสามารถใช้ตัวแปรบริบทจากเวิร์กโฟลว์ หรือจะป้อนค่าคงที่ (Static Values) ด้วยตนเองก็ได้ครับ/ค่ะ

หมายเหตุ: ข้อมูลที่อัปเดตโดยโหนด "อัปเดตข้อมูล" ในเวิร์กโฟลว์จะไม่จัดการข้อมูล "ผู้แก้ไขล่าสุด" (Last modified by) โดยอัตโนมัติครับ/ค่ะ คุณจำเป็นต้องตั้งค่าฟิลด์นี้ด้วยตนเองตามความเหมาะสม

## ตัวอย่าง

ตัวอย่างเช่น เมื่อมีการสร้าง "บทความ" ใหม่ คุณอาจต้องการอัปเดตฟิลด์ "จำนวนบทความ" ในคอลเลกชัน "หมวดหมู่บทความ" โดยอัตโนมัติครับ/ค่ะ ซึ่งสามารถทำได้โดยใช้โหนด "อัปเดตข้อมูล" ดังนี้:

![ตัวอย่างการตั้งค่าโหนดอัปเดตข้อมูล](https://static-docs.nocobase.com/98e0f941c57275fc835f08260d0b2e86.png)

หลังจากเวิร์กโฟลว์ถูกทริกเกอร์ ระบบจะอัปเดตฟิลด์ "จำนวนบทความ" ของคอลเลกชัน "หมวดหมู่บทความ" โดยอัตโนมัติให้เป็นจำนวนบทความปัจจุบัน + 1 ครับ/ค่ะ