---
pkg: '@nocobase/plugin-workflow-response-message'
---
:::tip
เอกสารนี้แปลโดย AI หากมีข้อมูลที่ไม่ถูกต้อง โปรดดู[เวอร์ชันภาษาอังกฤษ](/en)
:::

# ข้อความตอบกลับ

## บทนำ

โหนดข้อความตอบกลับมีไว้เพื่อส่งข้อความที่กำหนดเองจากเวิร์กโฟลว์กลับไปยังไคลเอนต์ที่ดำเนินการส่งข้อมูล ในเวิร์กโฟลว์บางประเภทครับ/ค่ะ

:::info{title=ข้อควรทราบ}
ปัจจุบันรองรับการใช้งานในเวิร์กโฟลว์ประเภท 'เหตุการณ์ก่อนการดำเนินการ' (Before action event) และ 'เหตุการณ์การดำเนินการที่กำหนดเอง' (Custom action event) ในโหมดซิงโครนัส (Synchronous mode) ครับ/ค่ะ
:::

## การสร้างโหนด

ในเวิร์กโฟลว์ประเภทที่รองรับ คุณสามารถเพิ่มโหนด 'ข้อความตอบกลับ' ได้ทุกที่ในขั้นตอนการทำงาน เพียงคลิกปุ่มเครื่องหมายบวก ('+') ในเวิร์กโฟลว์เพื่อเพิ่มโหนด 'ข้อความตอบกลับ' ครับ/ค่ะ

![การเพิ่มโหนด](https://static-docs.nocobase.com/eac2b3565e95e4ce59f340624062ed3d.png)

ข้อความตอบกลับจะถูกเก็บไว้ในรูปแบบของอาร์เรย์ตลอดกระบวนการร้องขอ เมื่อใดก็ตามที่โหนดข้อความตอบกลับถูกดำเนินการในเวิร์กโฟลว์ เนื้อหาข้อความใหม่จะถูกเพิ่มเข้าไปในอาร์เรย์ และเมื่อเซิร์ฟเวอร์ส่งการตอบกลับ ข้อความทั้งหมดจะถูกส่งไปยังไคลเอนต์พร้อมกันครับ/ค่ะ

## การตั้งค่าโหนด

เนื้อหาข้อความเป็นสตริงเทมเพลตที่สามารถแทรกตัวแปรได้ คุณสามารถจัดระเบียบเนื้อหาเทมเพลตนี้ได้ตามต้องการในการตั้งค่าโหนดครับ/ค่ะ

![การตั้งค่าโหนด](https://static-docs.nocobase.com/d5fa5f4002d50baf3ba16048818fddfc.png)

เมื่อเวิร์กโฟลว์ดำเนินการมาถึงโหนดนี้ เทมเพลตจะถูกแยกวิเคราะห์และสร้างผลลัพธ์ของเนื้อหาข้อความ ในการตั้งค่าด้านบน ตัวแปร "Local variable / Loop all products / Loop object / Product / Title" จะถูกแทนที่ด้วยค่าเฉพาะในเวิร์กโฟลว์จริง เช่น:

```
สินค้า “iPhone 14 pro” มีสต็อกไม่เพียงพอ
```

![เนื้อหาข้อความ](https://static-docs.nocobase.com/06bd4a6b6ec499c853f0c39987f63a6a.png)

## การตั้งค่าเวิร์กโฟลว์

สถานะของข้อความตอบกลับขึ้นอยู่กับสถานะความสำเร็จหรือความล้มเหลวของการดำเนินการเวิร์กโฟลว์ครับ/ค่ะ ความล้มเหลวในการดำเนินการของโหนดใดๆ จะทำให้เวิร์กโฟลว์ทั้งหมดล้มเหลว และในกรณีนี้ เนื้อหาข้อความจะถูกส่งกลับไปยังไคลเอนต์พร้อมสถานะความล้มเหลวและแสดงผลครับ/ค่ะ

หากคุณต้องการกำหนดสถานะความล้มเหลวในเวิร์กโฟลว์ คุณสามารถใช้ 'โหนดสิ้นสุด' (End node) และกำหนดค่าให้เป็นสถานะความล้มเหลวได้ครับ/ค่ะ เมื่อโหนดนี้ถูกดำเนินการ เวิร์กโฟลว์จะออกจากระบบด้วยสถานะความล้มเหลว และข้อความจะถูกส่งกลับไปยังไคลเอนต์พร้อมสถานะความล้มเหลวครับ/ค่ะ

หากเวิร์กโฟลว์ทั้งหมดไม่เกิดสถานะความล้มเหลวและดำเนินการสำเร็จจนจบ เนื้อหาข้อความจะถูกส่งกลับไปยังไคลเอนต์พร้อมสถานะความสำเร็จครับ/ค่ะ

:::info{title=ข้อควรทราบ}
หากมีการกำหนดโหนดข้อความตอบกลับหลายโหนดในเวิร์กโฟลว์ โหนดที่ถูกดำเนินการจะเพิ่มเนื้อหาข้อความลงในอาร์เรย์ และเมื่อส่งกลับไปยังไคลเอนต์ในที่สุด เนื้อหาข้อความทั้งหมดจะถูกส่งกลับและแสดงผลพร้อมกันครับ/ค่ะ
:::

## กรณีการใช้งาน

### เวิร์กโฟลว์ 'เหตุการณ์ก่อนการดำเนินการ'

การใช้ข้อความตอบกลับในเวิร์กโฟลว์ 'เหตุการณ์ก่อนการดำเนินการ' ช่วยให้สามารถส่งข้อความตอบกลับที่เกี่ยวข้องไปยังไคลเอนต์ได้หลังจากเวิร์กโฟลว์สิ้นสุดลงครับ/ค่ะ สำหรับรายละเอียดเพิ่มเติม โปรดดูที่ [เหตุการณ์ก่อนการดำเนินการ](../triggers/pre-action.md)

### เวิร์กโฟลว์ 'เหตุการณ์การดำเนินการที่กำหนดเอง'

การใช้ข้อความตอบกลับใน 'เหตุการณ์การดำเนินการที่กำหนดเอง' ในโหมดซิงโครนัส ช่วยให้สามารถส่งข้อความตอบกลับที่เกี่ยวข้องไปยังไคลเอนต์ได้หลังจากเวิร์กโฟลว์สิ้นสุดลงครับ/ค่ะ สำหรับรายละเอียดเพิ่มเติม โปรดดูที่ [เหตุการณ์การดำเนินการที่กำหนดเอง](../triggers/custom-action.md)