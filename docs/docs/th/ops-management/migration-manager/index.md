---
pkg: '@nocobase/plugin-migration-manager'
---

:::tip
เอกสารนี้แปลโดย AI หากมีข้อมูลที่ไม่ถูกต้อง โปรดดู[เวอร์ชันภาษาอังกฤษ](/en)
:::



# ตัวจัดการการย้ายข้อมูล

## บทนำ

ใช้สำหรับย้ายการตั้งค่าแอปพลิเคชันจากสภาพแวดล้อมหนึ่งไปยังอีกสภาพแวดล้อมหนึ่งครับ/ค่ะ ตัวจัดการการย้ายข้อมูลนี้จะเน้นไปที่การย้าย "การตั้งค่าแอปพลิเคชัน" เป็นหลัก หากคุณต้องการย้ายข้อมูลทั้งหมด เราขอแนะนำให้ใช้การสำรองและกู้คืนข้อมูลจาก "[ตัวจัดการการสำรองข้อมูล](../backup-manager/index.mdx)" ครับ/ค่ะ

## การติดตั้ง

ตัวจัดการการย้ายข้อมูลนี้ต้องพึ่งพาปลั๊กอิน [ตัวจัดการการสำรองข้อมูล](../backup-manager/index.mdx) ครับ/ค่ะ โปรดตรวจสอบให้แน่ใจว่าได้ติดตั้งและเปิดใช้งานปลั๊กอินดังกล่าวเรียบร้อยแล้วนะครับ/คะ

## กระบวนการและหลักการทำงาน

ตัวจัดการการย้ายข้อมูลจะย้ายตารางและข้อมูลจากฐานข้อมูลหลัก โดยอิงตามกฎการย้ายข้อมูลที่กำหนดไว้ เพื่อย้ายจากแอปพลิเคชันหนึ่งไปยังอีกแอปพลิเคชันหนึ่งครับ/ค่ะ สิ่งสำคัญที่ควรทราบคือ จะไม่มีการย้ายข้อมูลจากฐานข้อมูลภายนอกหรือแอปพลิเคชันย่อยนะครับ/คะ

![20250102202546](https://static-docs.nocobase.com/20250102202546.png)

## กฎการย้ายข้อมูล

### กฎที่มาพร้อมระบบ

ตัวจัดการการย้ายข้อมูลสามารถย้ายตารางทั้งหมดในฐานข้อมูลหลักได้ และรองรับกฎการย้ายข้อมูล 5 ประเภทดังต่อไปนี้ครับ/ค่ะ

- **เฉพาะโครงสร้าง (Schema-only):** ย้ายเฉพาะโครงสร้างของตารางเท่านั้น จะไม่มีการแทรกหรืออัปเดตข้อมูลครับ/ค่ะ
- **เขียนทับ (ล้างข้อมูลและแทรกใหม่):** ลบระเบียนทั้งหมดที่มีอยู่ในตารางฐานข้อมูลเป้าหมาย จากนั้นจึงแทรกข้อมูลใหม่เข้าไปครับ/ค่ะ
- **แทรกหรืออัปเดต (Upsert):** ตรวจสอบว่าระเบียนมีอยู่แล้วหรือไม่ (โดยใช้คีย์หลัก) หากมีอยู่จะทำการอัปเดตระเบียนนั้น หากไม่มีอยู่จะทำการแทรกระเบียนใหม่ครับ/ค่ะ
- **แทรกโดยละเว้นรายการซ้ำ (Insert-ignore):** แทรกระเบียนใหม่ แต่หากระเบียนนั้นมีอยู่แล้ว (โดยใช้คีย์หลัก) จะละเว้นการแทรก (ไม่มีการอัปเดตเกิดขึ้น) ครับ/ค่ะ
- **ข้าม (Skip):** ข้ามการประมวลผลสำหรับตารางนั้นทั้งหมด (ไม่มีการเปลี่ยนแปลงโครงสร้างหรือการย้ายข้อมูล) ครับ/ค่ะ

**ข้อควรทราบเพิ่มเติม:**

- กฎ "เขียนทับ", "แทรกหรืออัปเดต" และ "แทรกโดยละเว้นรายการซ้ำ" จะทำการซิงโครไนซ์การเปลี่ยนแปลงโครงสร้างตารางด้วยครับ/ค่ะ
- หากตารางใช้ ID ที่เพิ่มขึ้นอัตโนมัติเป็นคีย์หลัก หรือไม่มีคีย์หลัก จะไม่สามารถใช้กฎ `แทรกหรืออัปเดต` และ `แทรกโดยละเว้นรายการซ้ำ` ได้ครับ/ค่ะ
- กฎ `แทรกหรืออัปเดต` และ `แทรกโดยละเว้นรายการซ้ำ` จะใช้คีย์หลักในการระบุว่าระเบียนนั้นมีอยู่แล้วหรือไม่ครับ/ค่ะ

### การออกแบบโดยละเอียด

![20250102204909](https://static-docs.nocobase.com/20250102204909.png)

### ส่วนติดต่อผู้ใช้สำหรับการตั้งค่า

ตั้งค่ากฎการย้ายข้อมูล

![20250102205450](https://static-docs.nocobase.com/20250102205450.png)

เปิดใช้งานกฎอิสระ

![20250107105005](https://static-docs.nocobase.com/20250107105005.png)

เลือกกฎอิสระและตารางที่จะประมวลผลตามกฎอิสระที่เลือกไว้

![20250107104644](https://static-docs.nocobase.com/20250107104644.png)

## ไฟล์การย้ายข้อมูล

![20250102205844](https://static-docs.nocobase.com/20250102205844.png)

### สร้างการย้ายข้อมูลใหม่

![20250102205857](https://static-docs.nocobase.com/20250102205857.png)

### ดำเนินการย้ายข้อมูล

![20250102205915](https://static-docs.nocobase.com/20250102205915.png)

การตรวจสอบตัวแปรสภาพแวดล้อมของแอปพลิเคชัน (เรียนรู้เพิ่มเติมเกี่ยวกับ [ตัวแปรสภาพแวดล้อม](#))

![20250102212311](https://static-docs.nocobase.com/20250102212311.png)

หากมีตัวแปรใดขาดหายไป ระบบจะแสดงหน้าต่างป๊อปอัปแจ้งเตือนผู้ใช้ให้กรอกตัวแปรสภาพแวดล้อมใหม่ที่จำเป็นในช่องนี้ แล้วจึงดำเนินการต่อครับ/ค่ะ

![20250102210009](https://static-docs.nocobase.com/20250102210009.png)

## บันทึกการย้ายข้อมูล

![20250102205738](https://static-docs.nocobase.com/20250102205738.png)

## การย้อนกลับ (Rollback)

ก่อนที่จะดำเนินการย้ายข้อมูล ระบบจะทำการสำรองข้อมูลแอปพลิเคชันปัจจุบันโดยอัตโนมัติครับ/ค่ะ หากการย้ายข้อมูลล้มเหลวหรือไม่เป็นไปตามที่คาดไว้ คุณสามารถย้อนกลับเพื่อกู้คืนข้อมูลได้โดยใช้ [ตัวจัดการการสำรองข้อมูล](../backup-manager/index.mdx) ครับ/ค่ะ

![20250105195029](https://static-docs.nocobase.com/20250105195029.png)