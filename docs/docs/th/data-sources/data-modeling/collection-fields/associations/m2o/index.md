:::tip
เอกสารนี้แปลโดย AI หากมีข้อมูลที่ไม่ถูกต้อง โปรดดู[เวอร์ชันภาษาอังกฤษ](/en)
:::


# ความสัมพันธ์แบบหลายต่อหนึ่ง (Many-to-One)

ในฐานข้อมูลห้องสมุด เรามีคอลเลกชันอยู่สองส่วนครับ/ค่ะ คือ "หนังสือ" และ "ผู้แต่ง" ผู้แต่งหนึ่งคนสามารถเขียนหนังสือได้หลายเล่ม แต่หนังสือแต่ละเล่มมักจะมีผู้แต่งเพียงคนเดียว ในกรณีนี้ ความสัมพันธ์ระหว่างผู้แต่งกับหนังสือจะเป็นแบบหลายต่อหนึ่ง (Many-to-One) ครับ/ค่ะ นั่นคือ หนังสือหลายเล่มสามารถเชื่อมโยงกับผู้แต่งคนเดียวกันได้ แต่หนังสือแต่ละเล่มจะมีผู้แต่งได้เพียงคนเดียวเท่านั้นครับ/ค่ะ

แผนภาพ ER:

![alt text](https://static-docs.nocobase.com/eaeeac974844db05c75cf0deeedf3652.png)

การตั้งค่าฟิลด์:

![alt text](https://static-docs.nocobase.com/3b4484ebb98d82f832f3dbf752bd84c9.png)

## คำอธิบายพารามิเตอร์

### Source Collection (คอลเลกชันต้นทาง)

คอลเลกชันต้นทาง คือคอลเลกชันที่ฟิลด์ปัจจุบันนี้อยู่ครับ/ค่ะ

### Target Collection (คอลเลกชันปลายทาง)

คอลเลกชันปลายทาง คือคอลเลกชันที่เราต้องการเชื่อมโยงด้วยครับ/ค่ะ

### Foreign Key (คีย์นอก)

ฟิลด์ในคอลเลกชันต้นทางที่ใช้สำหรับสร้างความสัมพันธ์ระหว่างสองคอลเลกชันครับ/ค่ะ

### Target Key (คีย์เป้าหมาย)

ฟิลด์ในคอลเลกชันปลายทางที่ถูกอ้างอิงโดย Foreign Key ซึ่งฟิลด์นี้จะต้องไม่ซ้ำกันครับ/ค่ะ (unique)

### ON DELETE

ON DELETE คือกฎการดำเนินการที่ใช้กับ Foreign Key ที่อ้างอิงในคอลเลกชันลูกที่เกี่ยวข้อง เมื่อมีการลบเรคคอร์ดในคอลเลกชันหลักครับ/ค่ะ ซึ่งเป็นตัวเลือกหนึ่งที่ใช้ในการกำหนด Foreign Key Constraint (ข้อจำกัดคีย์นอก) ตัวเลือก ON DELETE ที่พบบ่อย ได้แก่:

- **CASCADE**: เมื่อมีการลบเรคคอร์ดในคอลเลกชันหลัก ระบบจะลบเรคคอร์ดที่เกี่ยวข้องทั้งหมดในคอลเลกชันลูกโดยอัตโนมัติครับ/ค่ะ
- **SET NULL**: เมื่อมีการลบเรคคอร์ดในคอลเลกชันหลัก ค่า Foreign Key ในเรคคอร์ดที่เกี่ยวข้องในคอลเลกชันลูกจะถูกตั้งค่าเป็น NULL ครับ/ค่ะ
- **RESTRICT**: เป็นตัวเลือกเริ่มต้นครับ/ค่ะ โดยจะป้องกันการลบเรคคอร์ดในคอลเลกชันหลัก หากมีเรคคอร์ดที่เกี่ยวข้องอยู่ในคอลเลกชันลูก
- **NO ACTION**: คล้ายกับ RESTRICT ครับ/ค่ะ โดยจะป้องกันการลบเรคคอร์ดในคอลเลกชันหลัก หากมีเรคคอร์ดที่เกี่ยวข้องอยู่ในคอลเลกชันลูก