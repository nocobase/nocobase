---
pkg: "@nocobase/plugin-field-sort"
---
:::tip
เอกสารนี้แปลโดย AI หากมีข้อมูลที่ไม่ถูกต้อง โปรดดู[เวอร์ชันภาษาอังกฤษ](/en)
:::

# ฟิลด์จัดเรียง

## บทนำ

ฟิลด์จัดเรียงใช้สำหรับจัดเรียงเรคคอร์ดในคอลเลกชัน โดยรองรับการจัดเรียงแบบจัดกลุ่มก่อนครับ/ค่ะ

:::warning
เนื่องจากฟิลด์จัดเรียงเป็นฟิลด์ที่อยู่ในคอลเลกชันเดียวกัน เรคคอร์ดหนึ่งจึงไม่สามารถถูกกำหนดให้อยู่ในหลายกลุ่มได้เมื่อใช้การจัดเรียงแบบจัดกลุ่มครับ/ค่ะ
:::

## การติดตั้ง

เป็นปลั๊กอินในตัว ไม่จำเป็นต้องติดตั้งแยกต่างหากครับ/ค่ะ

## คู่มือการใช้งาน

### การสร้างฟิลด์จัดเรียง

![20240409091123_rec_](https://static-docs.nocobase.com/20240409091123_rec_.gif)

เมื่อสร้างฟิลด์จัดเรียง ระบบจะกำหนดค่าเริ่มต้นสำหรับการจัดเรียงดังนี้ครับ/ค่ะ:

- หากไม่ได้เลือกการจัดเรียงแบบจัดกลุ่ม ระบบจะกำหนดค่าเริ่มต้นโดยอิงจากฟิลด์ Primary Key และฟิลด์วันที่สร้างครับ/ค่ะ
- หากเลือกการจัดเรียงแบบจัดกลุ่ม ระบบจะจัดกลุ่มข้อมูลก่อน แล้วจึงกำหนดค่าเริ่มต้นโดยอิงจากฟิลด์ Primary Key และฟิลด์วันที่สร้างครับ/ค่ะ

:::warning{title="คำอธิบายเกี่ยวกับความสอดคล้องของธุรกรรม"}
- เมื่อสร้างฟิลด์ หากการกำหนดค่าเริ่มต้นของค่าจัดเรียงล้มเหลว จะไม่มีการสร้างฟิลด์จัดเรียงครับ/ค่ะ
- ภายในช่วงที่กำหนด หากมีการย้ายเรคคอร์ดจากตำแหน่ง A ไปยังตำแหน่ง B ค่าจัดเรียงของเรคคอร์ดทั้งหมดที่อยู่ระหว่าง A และ B จะมีการเปลี่ยนแปลง หากการอัปเดตส่วนใดส่วนหนึ่งล้มเหลว การย้ายข้อมูลจะถูกยกเลิก และค่าจัดเรียงของเรคคอร์ดที่เกี่ยวข้องจะไม่เปลี่ยนแปลงครับ/ค่ะ
:::

#### ตัวอย่างที่ 1: การสร้างฟิลด์ sort1

ฟิลด์ sort1 ไม่มีการจัดกลุ่มครับ/ค่ะ

![20240409091510](https://static-docs.nocobase.com/20240409091510.png)

ฟิลด์จัดเรียงของแต่ละเรคคอร์ดจะถูกกำหนดค่าเริ่มต้นโดยอิงจากฟิลด์ Primary Key และฟิลด์วันที่สร้างครับ/ค่ะ

![20240409092305](https://static-docs.nocobase.com/20240409092305.png)

#### ตัวอย่างที่ 2: การสร้างฟิลด์ sort2 โดยจัดกลุ่มตาม Class ID

![20240409092620](https://static-docs.nocobase.com/20240409092620.png)

ในขั้นตอนนี้ เรคคอร์ดทั้งหมดในคอลเลกชันจะถูกจัดกลุ่มก่อน (จัดกลุ่มตาม Class ID) แล้วจึงกำหนดค่าเริ่มต้นสำหรับฟิลด์จัดเรียง (sort2) ครับ/ค่ะ โดยค่าเริ่มต้นของแต่ละเรคคอร์ดคือ:

![20240409092847](https://static-docs.nocobase.com/20240409092847.png)

### การจัดเรียงด้วยการลากและวาง

ฟิลด์จัดเรียงส่วนใหญ่ใช้สำหรับการจัดเรียงเรคคอร์ดด้วยการลากและวางในบล็อกต่าง ๆ ครับ/ค่ะ บล็อกที่รองรับการจัดเรียงด้วยการลากและวางในปัจจุบันได้แก่ ตารางและกระดาน Kanban ครับ/ค่ะ

:::warning
- เมื่อใช้ฟิลด์จัดเรียงเดียวกันสำหรับการจัดเรียงด้วยการลากและวาง การใช้งานร่วมกันในหลายบล็อกอาจทำให้ลำดับการจัดเรียงที่มีอยู่เสียหายได้ครับ/ค่ะ
- ฟิลด์สำหรับการจัดเรียงด้วยการลากและวางในตาราง ไม่สามารถเลือกฟิลด์จัดเรียงที่มีกฎการจัดกลุ่มได้ครับ/ค่ะ
  - ข้อยกเว้น: ในบล็อกตารางความสัมพันธ์แบบ One-to-Many สามารถใช้ Foreign Key เป็นกลุ่มได้ครับ/ค่ะ
- ปัจจุบันมีเพียงบล็อกกระดาน Kanban เท่านั้นที่รองรับการจัดเรียงด้วยการลากและวางแบบจัดกลุ่มครับ/ค่ะ
:::

#### การจัดเรียงแถวในตารางด้วยการลากและวาง

บล็อกตาราง

![20240409104621_rec_](https://static-docs.nocobase.com/20240409104621_rec_.gif)

บล็อกตารางความสัมพันธ์

<video controls width="100%" src="https://static-docs.nocobase.com/20240409111903_rec_.mp4" title="Title"></video>

:::warning
ในบล็อกความสัมพันธ์แบบ One-to-Many:

- หากเลือกฟิลด์จัดเรียงที่ไม่ได้จัดกลุ่ม เรคคอร์ดทั้งหมดอาจมีส่วนร่วมในการจัดเรียงครับ/ค่ะ
- หากจัดกลุ่มตาม Foreign Key ก่อนแล้วจึงจัดเรียง กฎการจัดเรียงจะส่งผลต่อข้อมูลภายในกลุ่มปัจจุบันเท่านั้นครับ/ค่ะ

ผลลัพธ์สุดท้ายจะสอดคล้องกัน แต่จำนวนเรคคอร์ดที่เข้าร่วมในการจัดเรียงจะแตกต่างกันครับ/ค่ะ สำหรับรายละเอียดเพิ่มเติม โปรดดูที่ [คำอธิบายกฎการจัดเรียง](#sorting-rule-explanation) ครับ/ค่ะ
:::

#### การจัดเรียงการ์ดในกระดาน Kanban ด้วยการลากและวาง

![20240409110423_rec_](https://static-docs.nocobase.com/20240409110423_rec_.gif)

### คำอธิบายกฎการจัดเรียง

#### การย้ายตำแหน่งระหว่างองค์ประกอบที่ไม่ได้จัดกลุ่ม (หรืออยู่ในกลุ่มเดียวกัน)

สมมติว่ามีชุดข้อมูลดังนี้ครับ/ค่ะ

```
[1,2,3,4,5,6,7,8,9]
```

เมื่อองค์ประกอบใดองค์ประกอบหนึ่ง เช่น 5 ถูกย้ายไปข้างหน้ายังตำแหน่งของ 3 เฉพาะตำแหน่งของรายการ 3, 4 และ 5 เท่านั้นที่จะเปลี่ยนไปครับ/ค่ะ โดยรายการ 5 จะไปอยู่ในตำแหน่งของ 3 และรายการ 3 กับ 4 จะเลื่อนถอยหลังไปคนละหนึ่งตำแหน่ง

```
[1,2,5,3,4,6,7,8,9]
```

หากเราย้ายรายการ 6 ถอยหลังไปยังตำแหน่งของ 8 รายการ 6 จะไปอยู่ในตำแหน่งของ 8 และรายการ 7 กับ 8 จะเลื่อนไปข้างหน้าคนละหนึ่งตำแหน่งครับ/ค่ะ

```
[1,2,5,3,4,7,8,6,9]
```

#### การย้ายองค์ประกอบระหว่างกลุ่มที่แตกต่างกัน

เมื่อจัดเรียงแบบจัดกลุ่ม หากเรคคอร์ดหนึ่งถูกย้ายไปยังกลุ่มอื่น การกำหนดกลุ่มของเรคคอร์ดนั้นก็จะเปลี่ยนไปด้วยครับ/ค่ะ ตัวอย่างเช่น:

```
A: [1,2,3,4]
B: [5,6,7,8]
```

เมื่อรายการ 1 ถูกย้ายไปหลังรายการ 6 (ซึ่งเป็นพฤติกรรมเริ่มต้น) กลุ่มของรายการ 1 ก็จะเปลี่ยนจาก A เป็น B ด้วยครับ/ค่ะ

```
A: [2,3,4]
B: [5,6,1,7,8]
```

#### การเปลี่ยนแปลงการจัดเรียงไม่เกี่ยวข้องกับข้อมูลที่แสดงบนหน้าจอ

ตัวอย่างเช่น พิจารณาชุดข้อมูลดังนี้ครับ/ค่ะ

```
[1,2,3,4,5,6,7,8,9]
```

หน้าจอแสดงเฉพาะมุมมองที่ถูกกรองดังนี้ครับ/ค่ะ

```
[1,5,9]
```

เมื่อรายการ 1 ถูกย้ายไปยังตำแหน่งของรายการ 9 ตำแหน่งของรายการทั้งหมดที่อยู่ระหว่างกลาง (2, 3, 4, 5, 6, 7, 8) ก็จะเปลี่ยนไปด้วยครับ/ค่ะ แม้ว่าจะมองไม่เห็นก็ตาม

```
[2,3,4,5,6,7,8,9,1]
```

หน้าจอจะแสดงลำดับใหม่ตามรายการที่ถูกกรองดังนี้ครับ/ค่ะ

```
[5,9,1]
```