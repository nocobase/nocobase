---
pkg: "@nocobase/plugin-data-source-rest-api"
---
:::tip
เอกสารนี้แปลโดย AI หากมีข้อมูลที่ไม่ถูกต้อง โปรดดู[เวอร์ชันภาษาอังกฤษ](/en)
:::



# แหล่งข้อมูล REST API

## บทนำ

ปลั๊กอินนี้ช่วยให้คุณสามารถเชื่อมต่อข้อมูลจากแหล่งข้อมูล REST API ได้อย่างราบรื่นครับ/ค่ะ

## การติดตั้ง

ปลั๊กอินนี้เป็นปลั๊กอินเชิงพาณิชย์ครับ/ค่ะ คุณจะต้องอัปโหลดและเปิดใช้งานผ่านตัวจัดการปลั๊กอินก่อนนะครับ/คะ

![20240323162741](https://static-docs.nocobase.com/20240323162741.png)

## การเพิ่มแหล่งข้อมูล REST API

หลังจากเปิดใช้งานปลั๊กอินแล้ว คุณสามารถเพิ่มแหล่งข้อมูล REST API ได้โดยเลือก 'REST API' จากเมนูแบบเลื่อนลง 'Add new' ในส่วนการจัดการแหล่งข้อมูลครับ/ค่ะ

![20240721171420](https://static-docs.nocobase.com/20240721171420.png)

กำหนดค่าแหล่งข้อมูล REST API ครับ/ค่ะ

![20240721171507](https://static-docs.nocobase.com/20240721171507.png)

## การเพิ่มคอลเลกชัน

ใน NocoBase ทรัพยากรแบบ RESTful จะถูกแมปเข้ากับ คอลเลกชัน ครับ/ค่ะ เช่น ทรัพยากร Users

```bash
GET /users
POST /users
GET /users/1
PUT /users/1
DELETE /users/1
```

ปลายทาง API เหล่านี้จะถูกแมปใน NocoBase ดังนี้ครับ/ค่ะ:

```bash
GET /users:list
POST /users:create
POST /users:get?filterByTk=1
POST /users:update?filterByTk=1
POST /users:destroy?filterByTk=1
```

สำหรับคู่มือฉบับสมบูรณ์เกี่ยวกับข้อกำหนดการออกแบบ NocoBase API โปรดดูเอกสารประกอบ API ครับ/ค่ะ

![20240716213344](https://static-docs.nocobase.com/20240716213344.png)

ตรวจสอบบท "NocoBase API - Core" สำหรับข้อมูลโดยละเอียดครับ/ค่ะ

![20240716213258](https://static-docs.nocobase.com/20240716213258.png)

การกำหนดค่า คอลเลกชัน สำหรับแหล่งข้อมูล REST API มีดังต่อไปนี้ครับ/ค่ะ:

### List

แมปอินเทอร์เฟซสำหรับการดูรายการทรัพยากรครับ/ค่ะ

![20240716211351](https://static-docs.nocobase.com/20240716211351.png)

### Get

แมปอินเทอร์เฟซสำหรับการดูรายละเอียดทรัพยากรครับ/ค่ะ

![20240716211532](https://static-docs.nocobase.com/20240716211532.png)

### Create

แมปอินเทอร์เฟซสำหรับการสร้างทรัพยากรครับ/ค่ะ

![20240716211634](https://static-docs.nocobase.com/20240716211634.png)

### Update

แมปอินเทอร์เฟซสำหรับการอัปเดตทรัพยากรครับ/ค่ะ

![20240716211733](https://static-docs.nocobase.com/20240716211733.png)

### Destroy

แมปอินเทอร์เฟซสำหรับการลบทรัพยากรครับ/ค่ะ

![20240716211808](https://static-docs.nocobase.com/20240716211808.png)

อินเทอร์เฟซ List และ Get เป็นสองอินเทอร์เฟซที่จำเป็นต้องกำหนดค่าครับ/ค่ะ

## การดีบัก API

### การรวมพารามิเตอร์คำขอ

ตัวอย่าง: กำหนดค่าพารามิเตอร์การแบ่งหน้าสำหรับ List API ครับ/ค่ะ หาก API ของบุคคลที่สามไม่รองรับการแบ่งหน้าโดยตรง NocoBase จะทำการแบ่งหน้าตามข้อมูลรายการที่ดึงมาได้ครับ/ค่ะ

![20241121205229](https://static-docs.nocobase.com/20241121205229.png)

โปรดทราบว่า ตัวแปรที่เพิ่มในอินเทอร์เฟซเท่านั้นที่จะมีผลครับ/ค่ะ

| ชื่อพารามิเตอร์ API ของบุคคลที่สาม | พารามิเตอร์ NocoBase               |
| --------------------- | --------------------------- |
| page                  | {{request.params.page}}     |
| limit                 | {{request.params.pageSize}} |

คุณสามารถคลิก 'Try it out' เพื่อดีบักและดูผลลัพธ์การตอบกลับได้ครับ/ค่ะ

![20241121210320](https://static-docs.nocobase.com/20241121210320.png)

<video width="100%" height="440" controls>
      <source src="https://static-docs.nocobase.com/20241121211034.mp4" type="video/mp4">
</video>

### การแปลงรูปแบบการตอบกลับ

รูปแบบการตอบกลับของ API บุคคลที่สามอาจไม่เป็นไปตามมาตรฐานของ NocoBase ครับ/ค่ะ จึงจำเป็นต้องแปลงก่อนที่จะแสดงผลได้อย่างถูกต้องบนส่วนหน้า

![20241121214638](https://static-docs.nocobase.com/20241121214638.png)

ปรับกฎการแปลงตามรูปแบบการตอบกลับของ API บุคคลที่สาม เพื่อให้แน่ใจว่าผลลัพธ์ที่ได้เป็นไปตามมาตรฐานของ NocoBase ครับ/ค่ะ

![20241121215100](https://static-docs.nocobase.com/20241121215100.png)

คำอธิบายขั้นตอนการดีบัก

![20240717110051](https://static-docs.nocobase.com/20240717110051.png)

## ตัวแปร

แหล่งข้อมูล REST API รองรับตัวแปรสามประเภทสำหรับการเชื่อมต่อ API ครับ/ค่ะ:

- ตัวแปรแหล่งข้อมูลที่กำหนดเอง
- ตัวแปรคำขอ NocoBase
- ตัวแปรการตอบกลับของบุคคลที่สาม

### ตัวแปรแหล่งข้อมูลที่กำหนดเอง

![20240716221937](https://static-docs.nocobase.com/20240716221937.png)

![20240716221858](https://static-docs.nocobase.com/20240716221858.png)

### คำขอ NocoBase

- Params: พารามิเตอร์การสืบค้น URL (Search Params) ซึ่งจะแตกต่างกันไปตามแต่ละอินเทอร์เฟซครับ/ค่ะ
- Headers: ส่วนหัวคำขอที่กำหนดเอง ซึ่งส่วนใหญ่จะให้ข้อมูล X- เฉพาะจาก NocoBase ครับ/ค่ะ
- Body: เนื้อหาของคำขอครับ/ค่ะ
- Token: โทเค็น API สำหรับคำขอ NocoBase ปัจจุบันครับ/ค่ะ

![20240716222042](https://static-docs.nocobase.com/20240716222042.png)

### การตอบกลับของบุคคลที่สาม

ปัจจุบันมีเพียงเนื้อหาการตอบกลับ (response body) เท่านั้นที่ใช้งานได้ครับ/ค่ะ

![20240716222303](https://static-docs.nocobase.com/20240716222303.png)

ตัวแปรที่ใช้งานได้สำหรับแต่ละอินเทอร์เฟซมีดังนี้ครับ/ค่ะ:

### List

| พารามิเตอร์               | คำอธิบาย                                                |
| ----------------------- | ---------------------------------------------------------- |
| request.params.page     | หน้าปัจจุบัน                                               |
| request.params.pageSize | จำนวนรายการต่อหน้า                                   |
| request.params.filter   | เกณฑ์การกรอง (ต้องเป็นไปตามรูปแบบ Filter ของ NocoBase)         |
| request.params.sort     | เกณฑ์การจัดเรียง (ต้องเป็นไปตามรูปแบบ Sort ของ NocoBase)          |
| request.params.appends  | ฟิลด์ที่โหลดตามความต้องการ โดยทั่วไปใช้สำหรับฟิลด์ความสัมพันธ์ |
| request.params.fields   | ฟิลด์ที่จะรวม (รายการที่อนุญาต)                              |
| request.params.except   | ฟิลด์ที่จะยกเว้น (รายการที่ไม่อนุญาต)                       |

### Get

| พารามิเตอร์                 | คำอธิบาย                                                |
| ------------------------- | ---------------------------------------------------------- |
| request.params.filterByTk | จำเป็นต้องระบุ โดยทั่วไปคือ ID ของเรคคอร์ดปัจจุบัน                  |
| request.params.filter     | เกณฑ์การกรอง (ต้องเป็นไปตามรูปแบบ Filter ของ NocoBase)         |
| request.params.appends    | ฟิลด์ที่โหลดตามความต้องการ โดยทั่วไปใช้สำหรับฟิลด์ความสัมพันธ์ |
| request.params.fields     | ฟิลด์ที่จะรวม (รายการที่อนุญาต)                              |
| request.params.except     | ฟิลด์ที่จะยกเว้น (รายการที่ไม่อนุญาต)                       |

### Create

| พารามิเตอร์                | คำอธิบาย               |
| ------------------------ | ------------------------- |
| request.params.whiteList | รายการที่อนุญาต                 |
| request.params.blacklist | รายการที่ไม่อนุญาต                 |
| request.body             | ข้อมูลเริ่มต้นสำหรับการสร้าง |

### Update

| พารามิเตอร์                 | คำอธิบาย                                        |
| ------------------------- | -------------------------------------------------- |
| request.params.filterByTk | จำเป็นต้องระบุ โดยทั่วไปคือ ID ของเรคคอร์ดปัจจุบัน          |
| request.params.filter     | เกณฑ์การกรอง (ต้องเป็นไปตามรูปแบบ Filter ของ NocoBase) |
| request.params.whiteList  | รายการที่อนุญาต                                          |
| request.params.blacklist  | รายการที่ไม่อนุญาต                                          |
| request.body              | ข้อมูลสำหรับอัปเดต                                    |

### Destroy

| พารามิเตอร์                 | คำอธิบาย                                        |
| ------------------------- | -------------------------------------------------- |
| request.params.filterByTk | จำเป็นต้องระบุ โดยทั่วไปคือ ID ของเรคคอร์ดปัจจุบัน          |
| request.params.filter     | เกณฑ์การกรอง (ต้องเป็นไปตามรูปแบบ Filter ของ NocoBase) |

## การกำหนดค่าฟิลด์

ข้อมูลเมตาของฟิลด์ (Fields) จะถูกดึงมาจากข้อมูลอินเทอร์เฟซ CRUD ของทรัพยากรที่ปรับใช้ เพื่อใช้เป็นฟิลด์ของ คอลเลกชัน ครับ/ค่ะ

![20240716223636](https://static-docs.nocobase.com/20240716223636.png)

ดึงข้อมูลเมตาของฟิลด์ครับ/ค่ะ

![20241121230436](https://static-docs.nocobase.com/20241121230436.png)

ฟิลด์และการแสดงตัวอย่าง

![20240716224403](https://static-docs.nocobase.com/20240716224403.png)

แก้ไขฟิลด์ (คล้ายกับแหล่งข้อมูลอื่น ๆ ครับ/ค่ะ)

![20240716224704](https://static-docs.nocobase.com/20240716224704.png)

## การเพิ่มบล็อกแหล่งข้อมูล REST API

เมื่อกำหนดค่า คอลเลกชัน เรียบร้อยแล้ว คุณสามารถเพิ่มบล็อกไปยังอินเทอร์เฟซได้เลยครับ/ค่ะ

![20240716225120](https://static-docs.nocobase.com/20240716225120.png)