---
pkg: "@nocobase/plugin-field-m2m-array"
---
:::tip
เอกสารนี้แปลโดย AI หากมีข้อมูลที่ไม่ถูกต้อง โปรดดู[เวอร์ชันภาษาอังกฤษ](/en)
:::

# แบบหลายต่อหลาย (อาร์เรย์)

## บทนำ

ฟีเจอร์นี้ช่วยให้คุณสามารถใช้ฟิลด์ประเภทอาร์เรย์ในคอลเลกชันข้อมูล เพื่อจัดเก็บคีย์เฉพาะหลายรายการจากคอลเลกชันเป้าหมาย ซึ่งจะสร้างความสัมพันธ์แบบหลายต่อหลายระหว่างสองคอลเลกชันได้ครับ ตัวอย่างเช่น ลองพิจารณาเอนทิตี 'บทความ' และ 'แท็ก' บทความหนึ่งสามารถเชื่อมโยงกับแท็กได้หลายแท็ก โดยที่คอลเลกชันบทความจะจัดเก็บ ID ของเรคคอร์ดที่เกี่ยวข้องจากคอลเลกชันแท็กไว้ในฟิลด์ประเภทอาร์เรย์ครับ

:::warning{title=ข้อควรระวัง}

- หากเป็นไปได้ ขอแนะนำให้ใช้คอลเลกชันตัวกลาง (junction Collection) เพื่อสร้างความสัมพันธ์แบบ [หลายต่อหลาย](../data-modeling/collection-fields/associations/m2m/index.md) มาตรฐาน แทนที่จะใช้วิธีนี้ครับ
- ปัจจุบัน มีเพียง PostgreSQL เท่านั้นที่รองรับการกรองข้อมูลคอลเลกชันต้นทาง โดยใช้ฟิลด์จากคอลเลกชันเป้าหมาย สำหรับความสัมพันธ์แบบหลายต่อหลายที่สร้างขึ้นด้วยฟิลด์ประเภทอาร์เรย์ครับ ตัวอย่างเช่น ในสถานการณ์ข้างต้น คุณสามารถกรองบทความโดยใช้ฟิลด์อื่น ๆ ในคอลเลกชันแท็ก เช่น ชื่อเรื่องได้ครับ

:::

### การตั้งค่าฟิลด์

![การตั้งค่าฟิลด์แบบหลายต่อหลาย (อาร์เรย์)](https://static-docs.nocobase.com/202407051108180.png)

## คำอธิบายพารามิเตอร์

### Source collection

คอลเลกชันต้นทาง ซึ่งเป็นคอลเลกชันที่ฟิลด์ปัจจุบันอยู่ครับ

### Target collection

คอลเลกชันเป้าหมายที่ใช้สร้างความสัมพันธ์ด้วยครับ

### Foreign key

ฟิลด์ประเภทอาร์เรย์ในคอลเลกชันต้นทาง ที่ใช้จัดเก็บ Target key จากคอลเลกชันเป้าหมายครับ

ความสัมพันธ์ที่สอดคล้องกันสำหรับประเภทฟิลด์อาร์เรย์มีดังนี้ครับ:

| NocoBase | PostgreSQL | MySQL  | SQLite |
| -------- | ---------- | ------ | ------ |
| `set`    | `array`    | `JSON` | `JSON` |

### Target key

ฟิลด์ในคอลเลกชันเป้าหมายที่สอดคล้องกับค่าที่จัดเก็บในฟิลด์อาร์เรย์ของคอลเลกชันต้นทาง ฟิลด์นี้จะต้องไม่ซ้ำกันครับ