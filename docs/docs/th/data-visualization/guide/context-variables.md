:::tip
เอกสารนี้แปลโดย AI หากมีข้อมูลที่ไม่ถูกต้อง โปรดดู[เวอร์ชันภาษาอังกฤษ](/en)
:::


# การใช้งานตัวแปรบริบท

ด้วยตัวแปรบริบท (context variables) คุณสามารถนำข้อมูลจากหน้าปัจจุบัน, ผู้ใช้งาน, เวลา, เงื่อนไขการกรอง และข้อมูลอื่นๆ กลับมาใช้ใหม่ได้ เพื่อเรนเดอร์แผนภูมิและเชื่อมโยงข้อมูลตามบริบทที่กำหนดครับ/ค่ะ

## ขอบเขตการใช้งาน
- การสอบถามข้อมูลในโหมด Builder: สำหรับเงื่อนไขการกรอง โดยเลือกใช้ตัวแปรครับ/ค่ะ
![clipboard-image-1761486073](https://static-docs.nocobase.com/clipboard-image-1761486073.png)

- การสอบถามข้อมูลในโหมด SQL: ในการเขียนคำสั่ง โดยเลือกตัวแปรและแทรกนิพจน์ (เช่น `{{ ctx.user.id }}`) ครับ/ค่ะ
![clipboard-image-1761486145](https://static-docs.nocobase.com/clipboard-image-1761486145.png)

- ตัวเลือกแผนภูมิในโหมด Custom: สามารถเขียนนิพจน์ JS ได้โดยตรงครับ/ค่ะ
![clipboard-image-1761486604](https://static-docs.nocobase.com/clipboard-image-1761486604.png)

- เหตุการณ์การโต้ตอบ (เช่น การคลิกเพื่อเจาะลึกข้อมูล, เปิดหน้าต่างป๊อปอัป และส่งผ่านข้อมูล): สามารถเขียนนิพจน์ JS ได้โดยตรงครับ/ค่ะ
![clipboard-image-1761486683](https://static-docs.nocobase.com/clipboard-image-1761486683.png)

**ข้อควรทราบ:**
- ห้ามใส่เครื่องหมายคำพูดเดี่ยวหรือคู่ (single/double quotes) ครอบ `{{ ... }}` ครับ/ค่ะ เนื่องจากระบบจะจัดการการผูกค่าอย่างปลอดภัยตามประเภทของตัวแปร (สตริง, ตัวเลข, เวลา, NULL) ให้โดยอัตโนมัติ
- เมื่อตัวแปรเป็น `NULL` หรือไม่ได้ถูกกำหนดค่า (undefined) โปรดจัดการตรรกะของค่าว่างใน SQL อย่างชัดเจน โดยใช้ `COALESCE(...)` หรือ `IS NULL` ครับ/ค่ะ