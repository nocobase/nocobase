:::tip
เอกสารนี้แปลโดย AI หากมีข้อมูลที่ไม่ถูกต้อง โปรดดู[เวอร์ชันภาษาอังกฤษ](/en)
:::


# ภาพรวม

## บทนำ

สตอเรจเอนจิน (Storage Engine) ใช้สำหรับบันทึกไฟล์ไปยังบริการจัดเก็บข้อมูลต่างๆ เช่น การจัดเก็บในเครื่อง (บันทึกไปยังฮาร์ดไดรฟ์ของเซิร์ฟเวอร์) หรือการจัดเก็บแบบคลาวด์ เป็นต้น ครับ/ค่ะ

ก่อนที่จะอัปโหลดไฟล์ใดๆ คุณจำเป็นต้องตั้งค่าสตอเรจเอนจินก่อนเสมอครับ/ค่ะ ในระหว่างการติดตั้ง ระบบจะเพิ่มสตอเรจเอนจินแบบโลคอล (Local Storage Engine) ให้โดยอัตโนมัติ ซึ่งคุณสามารถใช้งานได้ทันที นอกจากนี้ คุณยังสามารถเพิ่มเอนจินใหม่ หรือแก้ไขพารามิเตอร์ของเอนจินที่มีอยู่แล้วได้ด้วยครับ/ค่ะ

## ประเภทของสตอเรจเอนจิน

ปัจจุบัน NocoBase รองรับประเภทของสตอเรจเอนจินที่มาพร้อมกับระบบ ดังนี้ครับ/ค่ะ

- [การจัดเก็บในเครื่อง (Local Storage)](./local)
- [Amazon S3](./amazon-s3)
- [Aliyun OSS](./aliyun-oss)
- [Tencent COS](./tencent-cos)
- [S3 Pro](./s3-pro)

ในระหว่างการติดตั้ง ระบบจะเพิ่มสตอเรจเอนจินแบบโลคอลให้โดยอัตโนมัติ ซึ่งคุณสามารถใช้งานได้ทันที นอกจากนี้ คุณยังสามารถเพิ่มเอนจินใหม่ หรือแก้ไขพารามิเตอร์ของเอนจินที่มีอยู่แล้วได้ด้วยครับ/ค่ะ

## พารามิเตอร์ทั่วไป

นอกเหนือจากพารามิเตอร์เฉพาะสำหรับสตอเรจเอนจินแต่ละประเภทแล้ว ส่วนต่อไปนี้คือพารามิเตอร์ทั่วไปที่ใช้ร่วมกัน (โดยใช้การจัดเก็บในเครื่องเป็นตัวอย่าง) ครับ/ค่ะ

![ตัวอย่างการตั้งค่าสตอเรจเอนจินสำหรับไฟล์](https://static-docs.nocobase.com/20240529115151.png)

### ชื่อ

ชื่อของสตอเรจเอนจิน ใช้สำหรับระบุตัวตนเพื่อให้ผู้ใช้งานเข้าใจได้ง่ายครับ/ค่ะ

### ชื่อระบบ

ชื่อระบบของสตอเรจเอนจิน ใช้สำหรับการระบุตัวตนโดยระบบครับ/ค่ะ ชื่อนี้จะต้องไม่ซ้ำกันในระบบ หากเว้นว่างไว้ ระบบจะสร้างชื่อแบบสุ่มให้โดยอัตโนมัติครับ/ค่ะ

### คำนำหน้า URL สาธารณะ

ส่วนนำหน้าของ URL ที่ใช้สำหรับเข้าถึงไฟล์จากภายนอกครับ/ค่ะ สามารถเป็น URL พื้นฐานของ CDN ได้ เช่น “`https://cdn.nocobase.com/app`” (ไม่ต้องมีเครื่องหมาย “`/`” ปิดท้าย)

### พาธ

พาธ (Path) สัมพัทธ์ที่ใช้ในการจัดเก็บไฟล์ครับ/ค่ะ ส่วนนี้จะถูกเพิ่มต่อท้าย URL สุดท้ายโดยอัตโนมัติเมื่อมีการเข้าถึงไฟล์ เช่น “`user/avatar`” (ไม่ต้องมีเครื่องหมาย “`/`” ทั้งที่จุดเริ่มต้นและจุดสิ้นสุด)

### การจำกัดขนาดไฟล์

การจำกัดขนาดไฟล์ที่สามารถอัปโหลดไปยังสตอเรจเอนจินนี้ครับ/ค่ะ ไฟล์ที่มีขนาดเกินกว่าที่กำหนดจะไม่สามารถอัปโหลดได้ โดยค่าเริ่มต้นของระบบจะจำกัดไว้ที่ 20MB และสามารถปรับเพิ่มได้สูงสุดถึง 1GB ครับ/ค่ะ

### ประเภทไฟล์

คุณสามารถจำกัดประเภทของไฟล์ที่สามารถอัปโหลดได้ โดยใช้รูปแบบการอธิบายตามไวยากรณ์ [MIME](https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types) ครับ/ค่ะ ตัวอย่างเช่น `image/*` หมายถึงไฟล์รูปภาพ หากต้องการระบุหลายประเภท สามารถคั่นด้วยเครื่องหมายจุลภาค (comma) เช่น `image/*, application/pdf` ซึ่งหมายถึงอนุญาตให้ใช้ไฟล์รูปภาพและไฟล์ PDF ครับ/ค่ะ

### สตอเรจเอนจินเริ่มต้น

เมื่อเลือกตัวเลือกนี้ จะถูกตั้งค่าเป็นสตอเรจเอนจินเริ่มต้นของระบบครับ/ค่ะ หากฟิลด์ไฟล์แนบหรือคอลเลกชันไฟล์ไม่ได้ระบุสตอเรจเอนจินไว้ ไฟล์ที่อัปโหลดทั้งหมดจะถูกบันทึกลงในสตอเรจเอนจินเริ่มต้นนี้ สตอเรจเอนจินเริ่มต้นจะไม่สามารถลบได้ครับ/ค่ะ

### เก็บไฟล์ไว้เมื่อลบข้อมูล

เมื่อเลือกตัวเลือกนี้ ไฟล์ที่อัปโหลดในสตอเรจเอนจินจะยังคงอยู่ แม้ว่าข้อมูลในตารางไฟล์แนบหรือคอลเลกชันไฟล์จะถูกลบไปแล้วก็ตามครับ/ค่ะ โดยค่าเริ่มต้นจะไม่ได้เลือกไว้ ซึ่งหมายความว่าเมื่อลบข้อมูล ไฟล์ในสตอเรจเอนจินก็จะถูกลบออกไปพร้อมกันครับ/ค่ะ

:::info{title=เคล็ดลับ}
เมื่ออัปโหลดไฟล์แล้ว พาธ (Path) สำหรับการเข้าถึงไฟล์สุดท้ายจะประกอบขึ้นจากหลายส่วนรวมกัน ดังนี้ครับ/ค่ะ

```
<คำนำหน้า URL สาธารณะ>/<พาธ>/<ชื่อไฟล์><นามสกุลไฟล์>
```

ตัวอย่างเช่น: `https://cdn.nocobase.com/app/user/avatar/20240529115151.png`
:::