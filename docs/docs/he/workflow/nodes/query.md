:::tip
מסמך זה תורגם על ידי בינה מלאכותית. לכל אי דיוק, אנא עיין ב[גרסה האנגלית](/en)
:::

# שאילתת נתונים

מאפשר לבצע שאילתה ולאחזר רשומות נתונים מתוך **אוסף** העומדות בתנאים ספציפיים.

ניתן להגדיר אותו לשאול רשומה בודדת או מספר רשומות. תוצאת השאילתה יכולה לשמש כמשתנה בצמתים הבאים. בעת שאילתת מספר רשומות, התוצאה היא מערך. כאשר תוצאת השאילתה ריקה, ניתן לבחור אם להמשיך בביצוע הצמתים הבאים.

## יצירת צומת

בממשק הגדרות **תהליך העבודה**, לחצו על כפתור הפלוס ("+") בזרימה כדי להוסיף צומת "שאילתת נתונים":

![הוספת צומת שאילתת נתונים](https://static-docs.nocobase.com/c1ef2b851b437806faf7a39c6ab9d33a.png)

## הגדרות צומת

![הגדרות צומת שאילתה](https://static-docs.nocobase.com/20240520131324.png)

### אוסף

בחרו את ה**אוסף** שממנו תרצו לשאול נתונים.

### סוג תוצאה

סוג התוצאה מחולק לשני סוגים: "רשומה בודדת" ו"מספר רשומות":

- רשומה בודדת: התוצאה היא אובייקט, המכיל רק את הרשומה הראשונה התואמת, או `null`.
- מספר רשומות: התוצאה תהיה מערך המכיל רשומות התואמות את התנאים. אם אין רשומות תואמות, המערך יהיה ריק. ניתן לעבד אותן אחת-אחת באמצעות צומת לולאה.

### תנאי סינון

בדומה לתנאי הסינון בשאילתת **אוסף** רגילה, תוכלו להשתמש במשתני ההקשר של **תהליך העבודה**.

### מיון

בעת שאילתת רשומה אחת או יותר, תוכלו להשתמש בכללי מיון כדי לשלוט בתוצאה הרצויה. לדוגמה, כדי לשאול את הרשומה העדכנית ביותר, תוכלו למיין לפי שדה "זמן יצירה" בסדר יורד.

### חלוקה לעמודים

כאשר קבוצת התוצאות עשויה להיות גדולה מאוד, תוכלו להשתמש בחלוקה לעמודים כדי לשלוט במספר תוצאות השאילתה. לדוגמה, כדי לשאול את 10 הרשומות העדכניות ביותר, תוכלו למיין לפי שדה "זמן יצירה" בסדר יורד, ולאחר מכן להגדיר את החלוקה לעמודים לעמוד אחד עם 10 רשומות.

### טיפול בתוצאות ריקות

במצב של רשומה בודדת, אם אין נתונים העומדים בתנאים, תוצאת השאילתה תהיה `null`. במצב של מספר רשומות, היא תהיה מערך ריק (`[]`). תוכלו לבחור אם לסמן את האפשרות "צא מ**תהליך העבודה** כאשר תוצאת השאילתה ריקה". אם אפשרות זו מסומנת, וכאשר תוצאת השאילתה ריקה, צמתים עוקבים לא יבוצעו, ו**תהליך העבודה** ייצא מוקדם עם סטטוס כשל.