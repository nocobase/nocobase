:::tip
מסמך זה תורגם על ידי בינה מלאכותית. לכל אי דיוק, אנא עיין ב[גרסה האנגלית](/en)
:::

# חישוב

צומת החישוב יכול להעריך ביטוי, והתוצאה נשמרת בתוצאת הצומת המתאים כדי שצמתים עוקבים יוכלו להשתמש בה. זהו כלי לחישוב, עיבוד והמרת נתונים. במידה רבה, הוא יכול להחליף את היכולת בשפות תכנות לבצע קריאה לפונקציה על ערך ולהקצות את התוצאה למשתנה.

## יצירת צומת

בממשק הגדרות תהליך העבודה, לחצו על כפתור הפלוס ("+") בזרימת העבודה כדי להוסיף צומת "חישוב":

![Calculation Node_Add](https://static-docs.nocobase.com/58a5540d26945251cd143eb4b16579.png)

## הגדרות צומת

![Calculation Node_Configuration](https://static-docs.nocobase.com/6a155de3f6a883d8cd1881b2d9c33874.png)

### מנוע חישוב

מנוע החישוב מגדיר את התחביר הנתמך על ידי הביטוי. מנועי החישוב הנתמכים כרגע הם [Math.js](https://mathjs.org/) ו-[Formula.js](https://formulajs.info/). כל מנוע כולל מספר רב של פונקציות נפוצות מובנות ושיטות לפעולות על נתונים. לשימוש ספציפי, תוכלו לעיין בתיעוד הרשמי שלהם.

:::info{title=טיפ}
יש לציין כי מנועים שונים נבדלים בגישה לאינדקסים של מערכים. האינדקסים ב-Math.js מתחילים מ-`1`, בעוד שב-Formula.js הם מתחילים מ-`0`.
:::

בנוסף, אם אתם זקוקים לשרשור מחרוזות פשוט, תוכלו להשתמש ישירות ב"תבנית מחרוזת". מנוע זה יחליף את המשתנים בביטוי בערכים המתאימים להם ולאחר מכן יחזיר את המחרוזרת המשורשרת.

### ביטוי

ביטוי הוא ייצוג מחרוזתי של נוסחת חישוב, שיכול להכיל משתנים, קבועים, אופרטורים ופונקציות נתמכות. אתם יכולים להשתמש במשתנים מהקשר של תהליך העבודה, כגון תוצאת צומת קודם לצומת החישוב, או משתנים מקומיים של לולאה.

אם קלט הביטוי אינו תואם לתחביר, תוצג שגיאה בהגדרות הצומת. אם משתנה אינו קיים או שהטיפוס אינו תואם במהלך הביצוע, או אם נעשה שימוש בפונקציה שאינה קיימת, צומת החישוב יסתיים מוקדם מהצפוי עם סטטוס שגיאה.

## דוגמה

### חישוב מחיר הזמנה כולל

הזמנה עשויה להכיל מספר פריטים, ולכל פריט יש מחיר וכמות שונים. המחיר הכולל של ההזמנה צריך להיות סכום המכפלות של המחיר והכמות של כל הפריטים. לאחר טעינת רשימת פרטי ההזמנה (מערך נתונים עם יחס של אחד לרבים), תוכלו להשתמש בצומת חישוב כדי לחשב את המחיר הכולל של ההזמנה:

![Calculation Node_Example_Configuration](https://static-docs.nocobase.com/85966b0116afb49aa966eeaa85e78dae.png)

כאן, פונקציית `SUMPRODUCT` מ-Formula.js יכולה לחשב את סכום המכפלות עבור שני מערכים באורך זהה, מה שמניב את המחיר הכולל של ההזמנה.