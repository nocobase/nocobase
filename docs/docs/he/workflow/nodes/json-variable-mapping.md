---
pkg: '@nocobase/plugin-workflow-json-variable-mapping'
---
:::tip
מסמך זה תורגם על ידי בינה מלאכותית. לכל אי דיוק, אנא עיין ב[גרסה האנגלית](/en)
:::


# מיפוי משתני JSON

> v1.6.0

## מבוא

משמש למיפוי מבני JSON מורכבים מתוצאות של צמתים קודמים (upstream nodes) למשתנים, לשימוש בצמתים הבאים. לדוגמה, לאחר מיפוי התוצאות של פעולות SQL ובקשות HTTP, תוכלו להשתמש בערכי המאפיינים שלהם בצמתים הבאים.

:::info{title=טיפ}
בשונה מצומת חישוב JSON, צומת מיפוי משתני JSON אינו תומך בביטויים מותאמים אישית ואינו מבוסס על מנוע צד שלישי. הוא משמש רק למיפוי ערכי מאפיינים במבנה JSON, אך השימוש בו פשוט יותר.
:::

## יצירת צומת

בממשק הגדרות תהליך העבודה, לחצו על כפתור הפלוס ("+") בתהליך כדי להוסיף צומת "מיפוי משתני JSON":

![יצירת צומת](https://static-docs.nocobase.com/20250113173635.png)

## הגדרות צומת

### מקור נתונים

מקור הנתונים יכול להיות התוצאה של צומת קודם, או אובייקט נתונים בהקשר של התהליך. בדרך כלל מדובר באובייקט נתונים לא מובנה, כמו התוצאה של צומת SQL או צומת בקשת HTTP.

![מקור נתונים](https://static-docs.nocobase.com/20250113173720.png)

### קלט נתוני דוגמה

הדביקו נתוני דוגמה ולחצו על כפתור הניתוח כדי ליצור אוטומטית רשימת משתנים:

![קלט נתוני דוגמה](https://static-docs.nocobase.com/20250113182327.png)

אם יש משתנים ברשימה שנוצרה אוטומטית שאינכם צריכים, תוכלו ללחוץ על כפתור המחיקה כדי להסיר אותם.

:::info{title=טיפ}
נתוני הדוגמה אינם תוצאת ההרצה הסופית; הם משמשים רק לסייע ביצירת רשימת המשתנים.
:::

### נתיב כולל אינדקס מערך

כאשר אפשרות זו אינה מסומנת, תוכן המערך ימופה בהתאם לשיטת הטיפול המוגדרת כברירת מחדל במשתני תהליכי העבודה של NocoBase. לדוגמה, אם תזינו את הדוגמה הבאה:

```json
{
  "a": 1,
  "b": [
    {
      "c": 2
    },
    {
      "c": 3
    }
  ]
}
```

במשתנים שייווצרו, `b.c` ייצג את המערך `[2, 3]`.

אם אפשרות זו מסומנת, נתיב המשתנה יכלול את אינדקס המערך, לדוגמה, `b.0.c` ו-`b.1.c`.

![20250113184056](https://static-docs.nocobase.com/20250113184056.png)

כאשר כוללים אינדקסים של מערכים, עליכם לוודא שאינדקסי המערכים בנתוני הקלט עקביים; אחרת, הדבר יוביל לשגיאת ניתוח.

## שימוש בצמתים הבאים

בהגדרות של צמתים הבאים, תוכלו להשתמש במשתנים שנוצרו על ידי צומת מיפוי משתני JSON:

![20250113203658](https://static-docs.nocobase.com/20250113203658.png)

למרות שמבנה ה-JSON יכול להיות מורכב, לאחר המיפוי, עליכם רק לבחור את המשתנה עבור הנתיב המתאים.