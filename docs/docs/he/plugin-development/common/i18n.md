:::tip
מסמך זה תורגם על ידי בינה מלאכותית. לכל אי דיוק, אנא עיין ב[גרסה האנגלית](/en)
:::

# בינאום

## קובצי בינאום

בתוספים, קובצי ריבוי השפות עבור צד הלקוח וצד השרת נשמרים בתיקייה `src/locale`.

```bash
|- /plugin-i18n
  |- /src
    |- /locale      # תיקיית ריבוי שפות
      |- en-US.ts   # שפה אנגלית
      |- zh-CN.ts   # שפה סינית
```

פשוט הוסיפו ערכי תרגום לקובצי ריבוי השפות המתאימים (`/src/locale/${lang}.ts`). אם זהו קובץ ריבוי שפות שנוסף לראשונה, יש להפעיל מחדש את היישום כדי שהשינויים ייכנסו לתוקף. ניתן לבדוק את ה-API של `app:getLang` כדי לוודא שערכי התרגום נוספו בהצלחה.

כתובת ברירת מחדל: http://localhost:13000/api/app:getLang?locale=zh-CN

## ממשקי API קשורים ל-i18n

- שרת
  - app.i18n
  - app.t(text, options)
  - ctx.i18n
  - ctx.t(text, options)
  - plugin.t()
- לקוח
  - ctx.i18n
  - ctx.t(text, options)
  - plugin.t()
  - useT()
- כלי עזר
  - tExpr(text, options)
- react-i18next
  - useTranslation(ns)
  - withTranslation(ns)

## שרת

### app.i18n <Badge>server</Badge>

app.i18n הוא מופע ה-i18n הגלובלי, המשמש בדרך כלל בסביבת CLI. לדוגמה, בשילוב עם Inquirer ליישום אינטראקציות בשורת הפקודה.

```ts
import select from '@inquirer/select';
import input from '@inquirer/input';

export class PluginSampleI18nServer extends Plugin {
  load() {
    this.app.command('test-i18n').action(async () => {
      const answer1 = await select({
        message: 'בחרו שפה',
        choices: [
          {
            name: 'סינית',
            value: 'zh-CN',
          },
          {
            name: 'אנגלית',
            value: 'en-US',
          },
        ],
      });
      await this.app.changeLanguage(answer1);
      const answer2 = await input({
        message: app.i18n.t('הזינו את שמכם'),
      });
      console.log(app.i18n.t(`שמכם הוא {{name}}`, { name: answer2 }));
    });
  }
}
```

### app.t(text, options) <Badge>server</Badge>

### ctx.i18n <Badge>server</Badge>

ctx.i18n הוא מופע משוכפל (cloneInstance) של app.i18n הגלובלי. כל `ctx` של בקשה הוא עצמאי לחלוטין ומספק מידע רב-לשוני בהתאם לשפת הלקוח.

פרמטרי בקשת הלקוח יכולים להיות ממוקמים ב-query string

```bash
GET /?locale=en-US HTTP/1.1
Host: localhost:13000
```

או ב-request headers (מומלץ)

```bash
GET / HTTP/1.1
Host: localhost:13000
X-Locale: en-US
```

דוגמה

```ts
export class PluginSampleI18nServer extends Plugin {
  load() {
    this.app.use(async (ctx, next) => {
      if (ctx.path === '/api/test-i18n') {
        ctx.body = `${ctx.i18n.t('שלום')} ${ctx.i18n.t('עולם')}`;
      }
      await next();
    });
  }
}
```

צפו ב-http://localhost:13000/api/test-i18n?locale=zh-CN

### ctx.t(text, options) <Badge>server</Badge>

### plugin.t() <Badge>server</Badge>

## לקוח

### ctx.i18n <Badge>client</Badge>

### ctx.t(text, options) <Badge>client</Badge>

### plugin.t()

### useT()

## פונקציות עזר

### tExpr(text) <Badge>server</Badge> <Badge>client</Badge>

## react-i18next

### useTranslation(ns) <Badge>client</Badge>

### withTranslation(ns) <Badge>client</Badge>