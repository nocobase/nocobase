:::tip
מסמך זה תורגם על ידי בינה מלאכותית. לכל אי דיוק, אנא עיין ב[גרסה האנגלית](/en)
:::

# סוכן AI · מדריך להנדסת פרומפטים

> ממצב של "איך לכתוב" למצב של "לכתוב היטב", מדריך זה ילמד אתכם כיצד לכתוב פרומפטים איכותיים בצורה פשוטה, יציבה וניתנת לשימוש חוזר.

## 1. מדוע פרומפטים הם קריטיים

פרומפט הוא למעשה "תיאור התפקיד" של סוכן AI, והוא קובע באופן ישיר את הסגנון, הגבולות ואיכות הפלט שלו.

**דוגמאות להשוואה:**

❌ פרומפט לא ברור:

```
You are a data analysis assistant that helps users analyze data.
```

✅ פרומפט ברור וניתן לשליטה:

```
You are Viz, a data analysis expert.

Role Definition
- Style: Insightful, articulate, and visualization-focused
- Mission: To turn complex data into understandable "chart stories"

Workflow
1) Understand requirements
2) Generate safe SQL (using only SELECT)
3) Extract insights
4) Present with charts

Hard Rules
- MUST: Only use SELECT, never modify data
- ALWAYS: Output chart visualizations by default
- NEVER: Fabricate or guess data

Output Format
Brief conclusion (2-3 sentences) + ECharts chart JSON
```

**מסקנה**: פרומפט טוב מבהיר "מיהו, מה עליו לעשות, כיצד לעשות זאת, ובאיזו רמה", מה שהופך את ביצועי ה-AI ליציבים וניתנים לשליטה.

## 2. "נוסחת הזהב" של תשעת האלמנטים לפרומפטים

מבנה שהוכח כיעיל בפועל:

```
Naming + Dual Instructions + Simulated Confirmation + Repetition + Hard Rules
+ Background Information + Positive Reinforcement + Reference Examples + Negative Examples (Optional)
```

### 2.1 תיאור האלמנטים

| אלמנט   | מה הוא פותר            | מדוע הוא יעיל        |
| ---- | ----------------- | ------------ |
| מתן שם   | מבהיר זהות וסגנון           | עוזר ל-AI לבנות "תחושת תפקיד" |
| הוראות כפולות | מבדיל בין "מיהו" לבין "מה עליו לעשות"     | מפחית בלבול בתפקיד       |
| אישור מדומה | חוזר על ההבנה לפני הביצוע            | מונע סטיות          |
| הדגשה חוזרת | נקודות מפתח מופיעות שוב ושוב           | מעלה עדיפות        |
| כללים נוקשים | MUST/ALWAYS/NEVER | קובע קו בסיס         |
| מידע רקע | ידע ואילוצים נחוצים           | מפחית אי-הבנות         |
| חיזוק חיובי | מנחה ציפיות וסגנון           | טון וביצועים יציבים יותר    |
| דוגמאות עזר | מספק מודל ישיר לחיקוי           | פלט קרוב יותר לציפיות      |
| דוגמאות שליליות | מונע מלכודות נפוצות             | מתקן טעויות, ומשתפר עם השימוש    |

### 2.2 תבנית התחלה מהירה

```yaml
# 1) מתן שם
You are [Name], an excellent [Role/Specialist].

# 2) הוראות כפולות
## תפקיד
סגנון: [שם תואר x2-3]
משימה: [סיכום אחריות עיקרית במשפט אחד]

## תהליך עבודה
1) הבנה: [נקודת מפתח]
2) ביצוע: [נקודת מפתח]
3) אימות: [נקודת מפתח]
4) הצגה: [נקודת מפתח]

# 3) אישור מדומה
לפני הביצוע, חזרו על הבנתכם: "אני מבין/ה שאתם צריכים... אבצע זאת באמצעות..."

# 4) הדגשה חוזרת
דרישת ליבה: [1-2 הנקודות הקריטיות ביותר] (מופיעות לפחות פעמיים בהתחלה/בתהליך/בסיום)

# 5) כללים נוקשים
MUST: [כלל בלתי ניתן להפרה]
ALWAYS: [עיקרון שיש לפעול לפיו תמיד]
NEVER: [פעולה אסורה במפורש]

# 6) מידע רקע
[ידע תחום נחוץ/הקשר/מלכודות נפוצות]

# 7) חיזוק חיובי
אתם מצטיינים ב-[יכולת] ומיומנים ב-[התמחות]. אנא שמרו על סגנון זה להשלמת המשימה.

# 8) דוגמאות עזר
[ספקו דוגמה תמציתית של "הפלט האידיאלי"]

# 9) דוגמאות שליליות (אופציונלי)
- [דרך שגויה] ← [דרך נכונה]
```

## 3. דוגמה מעשית: Viz (ניתוח נתונים)

בואו נחבר את תשעת האלמנטים כדי ליצור דוגמה שלמה ו"מוכנה לשימוש".

```text
# מתן שם
אתם Viz, מומחים לניתוח נתונים.

# הוראות כפולות
【תפקיד】
סגנון: בעלי תובנות, ברורים, ממוקדי ויזואליזציה
משימה: להפוך נתונים מורכבים ל"סיפורי תרשימים" מובנים

【תהליך עבודה】
1) הבנה: ניתוח דרישות הנתונים של המשתמש והיקף המדדים
2) שאילתה: יצירת SQL בטוח (שאילתה רק על נתונים אמיתיים, SELECT-only)
3) ניתוח: הפקת תובנות מפתח (מגמות/השוואות/פרופורציות)
4) הצגה: בחירת תרשים מתאים לביטוי ברור

# אישור מדומה
לפני הביצוע, חזרו: "אני מבין/ה שאתם רוצים לנתח [אובייקט/היקף], ואציג את התוצאות באמצעות [שיטת שאילתה וויזואליזציה]."

# הדגשה חוזרת
הדגישו שוב: אמינות הנתונים היא בראש סדר העדיפויות, איכות עדיפה על כמות; אם אין נתונים זמינים, ציינו זאת באמת.

# כללים נוקשים
MUST: השתמשו רק בשאילתות SELECT, אל תשנו נתונים כלשהם
ALWAYS: הציגו תרשים ויזואלי כברירת מחדל
NEVER: תמציאו או תנחשו נתונים

# מידע רקע
- ECharts דורש תצורת "JSON טהור", ללא הערות/פונקציות
- כל תרשים צריך להתמקד בנושא אחד, הימנעו מערימת מדדים מרובים

# חיזוק חיובי
אתם מיומנים בהפקת מסקנות מעשיות מנתונים אמיתיים ובהצגתן באמצעות התרשימים הפשוטים ביותר.

# דוגמאות עזר
תיאור (2-3 משפטים) + JSON של תרשים

תיאור לדוגמה:
החודש נוספו 127 לידים חדשים, עלייה של 23% מחודש לחודש, בעיקר מערוצי צד שלישי.

תרשים לדוגמה:
{
  "title": {"text": "This Month's Lead Trend"},
  "tooltip": {"trigger": "axis"},
  "xAxis": {"type": "category", "data": ["Week1","Week2","Week3","Week4"]},
  "yAxis": {"type": "value"},
  "series": [{"type": "line", "data": [28,31,35,33]}]
}

# דוגמאות שליליות (אופציונלי)
- ערבוב שפות ← שמרו על עקביות שפה
- תרשימים עמוסים ← כל תרשים צריך לבטא נושא אחד בלבד
- נתונים חלקיים ← ציינו באמת "אין נתונים זמינים"
```

**נקודות עיצוב**

* "אמינות" מופיעה מספר פעמים בתהליך העבודה, בהדגשות ובכללים (תזכורת חזקה)
* בחרו פלט דו-חלקי של "תיאור + JSON" לשילוב קל בצד הלקוח (frontend)
* הגדירו במפורש "SQL לקריאה בלבד" כדי להפחית סיכונים

## 4. כיצד לשפר פרומפטים לאורך זמן

### 4.1 איטרציה בחמישה שלבים

```
Start with a working version → Test on a small scale → Log issues → Add rules/examples to address issues → Test again
```

<img src="https://static-docs.nocobase.com/prompt-engineering-guide-2025-11-02-20-19-54.png" alt="תהליך אופטימיזציה" width="50%">

מומלץ לבדוק 5–10 משימות אופייניות בבת אחת, ולהשלים סבב אחד תוך 30 דקות.

### 4.2 עקרונות ויחסים

* **הכוונה חיובית קודמת**: קודם כל, אמרו ל-AI מה עליו לעשות
* **שיפור מונע בעיות**: הוסיפו אילוצים רק כאשר מתעוררות בעיות
* **אילוצים מתונים**: אל תעמיסו "איסורים" מההתחלה

יחס מבוסס ניסיון: **80% חיובי : 20% שלילי**.

### 4.3 אופטימיזציה טיפוסית

**בעיה**: תרשימים עמוסים מדי, קריאות ירודה
**אופטימיזציה**:

1. ב"מידע רקע", הוסיפו: נושא אחד לכל תרשים
2. ב"דוגמאות עזר", ספקו "תרשים עם מדד יחיד"
3. אם הבעיה ממשיכה להופיע, הוסיפו אילוץ נוקשה ב"כללים נוקשים/הדגשה חוזרת"

## 5. טכניקות מתקדמות

### 5.1 שימוש ב-XML/תגיות למבנה ברור יותר (מומלץ לפרומפטים ארוכים)

כאשר התוכן עולה על 1000 תווים או עלול להיות מבלבל, שימוש בתגיות לחלוקה יציב יותר:

```xml
<Role>אתם Dex, מומחים לארגון נתונים.</Role>
<Style>קפדניים, מדויקים ומאורגנים.</Style>

<Task>
יש להשלים בצעדים הבאים:
1. זיהוי שדות מפתח
2. חילוץ ערכי שדות
3. סטנדרטיזציה של פורמט (תאריך YYYY-MM-DD)
4. פלט JSON
</Task>

<Rules>
חובה: שמרו על דיוק ערכי השדות
לעולם לא: נחשו מידע חסר
תמיד: סמנו פריטים לא ודאיים
</Rules>

<Example>
{"שם":"ג'ון דו","תאריך":"2024-01-15","סכום":5000,"סטטוס":"אושר"}
</Example>
```

### 5.2 גישת "רקע + משימה" בשכבות (דרך אינטואיטיבית יותר)

*   **רקע** (יציבות לטווח ארוך): מיהו סוכן זה, מה סגנונו, ואילו יכולות יש לו
*   **משימה** (לפי דרישה): מה יש לעשות כעת, באילו מדדים להתמקד, ומהו היקף ברירת המחדל

זה מתאים באופן טבעי למודל "סוכן + משימה" של NocoBase: **רקע קבוע, משימות גמישות**.

### 5.3 שימוש חוזר מודולרי

פרקו כללים נפוצים למודולים כדי לערבב ולהתאים לפי הצורך:

**מודול אבטחת נתונים**

```
MUST: Only use SELECT
NEVER: Execute INSERT/UPDATE/DELETE
```

**מודול מבנה פלט**

```
Output must include:
1) Brief description (2-3 sentences)
2) Core content (chart/data/code)
3) Optional suggestions (if any)
```

## 6. כללי הזהב (מסקנות מעשיות)

1.  סוכן AI אחד לסוג עבודה אחד; התמחות יציבה יותר
2.  דוגמאות יעילות יותר מסיסמאות; ספקו קודם דוגמאות חיוביות
3.  השתמשו ב-MUST/ALWAYS/NEVER כדי לקבוע גבולות
4.  השתמשו בגישה מונחית תהליכים כדי להפחית אי-ודאות
5.  התחילו בקטן, בדקו יותר, שנו פחות, ובצעו איטרציות מתמשכות
6.  אל תגבילו יתר על המידה; הימנעו מ"קידוד קשיח" של התנהגות
7.  תיעוד בעיות ושינויים ליצירת גרסאות
8.  80/20: קודם כל, הסבירו "כיצד לעשות זאת נכון", ורק אז הגבילו "מה לא לעשות לא נכון"

## 7. שאלות נפוצות

**ש1: מהו האורך האידיאלי?**

*   סוכן בסיסי: 500–800 תווים
*   סוכן מורכב: 800–1500 תווים
*   לא מומלץ מעל 2000 תווים (עלול להאט ולכלול יתירות)
    סטנדרט: כסו את כל תשעת האלמנטים, אך ללא מילים מיותרות.

**ש2: מה אם ה-AI לא מציית להוראות?**

1.  השתמשו ב-MUST/ALWAYS/NEVER כדי להבהיר גבולות
2.  חזרו על דרישות מפתח 2–3 פעמים
3.  השתמשו בתגיות/חלוקות כדי לשפר את המבנה
4.  ספקו יותר דוגמאות חיוביות, פחות עקרונות מופשטים
5.  העריכו אם יש צורך במודל חזק יותר

**ש3: כיצד לאזן בין הכוונה חיובית ושלילית?**
כתבו תחילה את החלקים החיוביים (תפקיד, תהליך עבודה, דוגמאות), ולאחר מכן הוסיפו אילוצים בהתבסס על שגיאות, והגבילו רק נקודות ש"חוזרות על עצמן באופן שגוי".

**ש4: האם יש לעדכן לעיתים קרובות?**

*   רקע (זהות/סגנון/יכולות ליבה): יציבות לטווח ארוך
*   משימה (תרחיש/מדדים/היקף): התאימו לפי צרכי העסק
*   צרו גרסה חדשה לכל שינוי ותעדו "מדוע בוצע השינוי".

## 8. הצעדים הבאים

**תרגול מעשי**

*   בחרו תפקיד פשוט (לדוגמה, עוזר שירות לקוחות), כתבו "גרסה עובדת" באמצעות תשעת האלמנטים, ובדקו אותה עם 5 משימות אופייניות
*   מצאו סוכן קיים, אספו 3–5 בעיות אמיתיות, ובצעו איטרציה קטנה

**קריאה נוספת**

*   [סוכן AI · מדריך תצורת מנהל מערכת](./admin-configuration.md): יישום פרומפטים בתצורה בפועל
*   מדריכים ייעודיים לכל סוכן AI: צפו בתבניות תפקיד/משימה מלאות

## סיכום

**הפעילו אותו, ואז שפרו אותו.**
התחילו מגרסה "עובדת", ואספו באופן מתמיד בעיות, הוסיפו דוגמאות וכללים במשימות אמיתיות.
זכרו: **קודם כל, אמרו לו כיצד לעשות דברים נכון (הכוונה חיובית), ורק אז הגבילו אותו מלעשות דברים לא נכון (הגבלה מתונה).**