---
pkg: "@nocobase/plugin-field-sort"
---
:::tip
מסמך זה תורגם על ידי בינה מלאכותית. לכל אי דיוק, אנא עיין ב[גרסה האנגלית](/en)
:::


# שדה מיון

## מבוא

שדות מיון משמשים למיון רשומות ב**אוסף**, ותומכים במיון בתוך קבוצות.

:::warning
מכיוון ששדה המיון הוא חלק מאותו **אוסף**, רשומה אחת אינה יכולה להיות משויכת למספר קבוצות בעת שימוש במיון קבוצתי.
:::

## התקנה

זהו **תוסף** מובנה, אין צורך להתקין אותו בנפרד.

## מדריך למשתמש

### יצירת שדה מיון

![20240409091123_rec_](https://static-docs.nocobase.com/20240409091123_rec_.gif)

בעת יצירת שדות מיון, ערכי המיון יאותחלו:

- אם לא נבחר מיון קבוצתי, האתחול יתבסס על שדה המפתח הראשי ושדה תאריך היצירה.
- אם נבחר מיון קבוצתי, הנתונים יקובצו תחילה, ולאחר מכן האתחול יתבסס על שדה המפתח הראשי ושדה תאריך היצירה.

:::warning{title="הסבר על עקביות טרנזקציות"}
- בעת יצירת שדה, אם אתחול ערך המיון נכשל, שדה המיון לא ייווצר.
- בטווח מסוים, אם רשומה עוברת ממיקום A למיקום B, ערכי המיון של כל הרשומות בין A ל-B ישתנו. אם חלק כלשהו מהעדכון הזה נכשל, פעולת ההעברה כולה תבוטל, וערכי המיון של הרשומות הקשורות לא ישתנו.
:::

#### דוגמה 1: יצירת שדה sort1

שדה sort1 אינו מקובץ.

![20240409091510](https://static-docs.nocobase.com/20240409091510.png)

שדות המיון של כל רשומה יאותחלו בהתבסס על שדה המפתח הראשי ושדה תאריך היצירה.

![20240409092305](https://static-docs.nocobase.com/20240409092305.png)

#### דוגמה 2: יצירת שדה sort2 המבוסס על קיבוץ לפי Class ID

![20240409092620](https://static-docs.nocobase.com/20240409092620.png)

בשלב זה, כל הרשומות ב**אוסף** יקובצו תחילה (לפי Class ID), ולאחר מכן יבוצע אתחול של שדה המיון (sort2). ערכי האתחול של כל רשומה הם:

![20240409092847](https://static-docs.nocobase.com/20240409092847.png)

### מיון בגרירה ושחרור

שדות מיון משמשים בעיקר למיון רשומות בגרירה ושחרור בבלוקים שונים. הבלוקים התומכים כיום במיון בגרירה ושחרור הם טבלאות ולוחות קנבן (boards).

:::warning
- כאשר אותו שדה מיון משמש למיון בגרירה ושחרור, שימוש בו במספר בלוקים במקביל עלול לשבש את הסדר הקיים.
- שדה למיון טבלאות בגרירה ושחרור אינו יכול להיות שדה מיון עם כלל קיבוץ.
  - חריג: בבלוק טבלת יחסים מסוג "אחד לרבים", מפתח זר יכול לשמש כקבוצה.
- נכון לעכשיו, רק בלוק הלוח (board) תומך במיון בגרירה ושחרור בתוך קבוצות.
:::

#### מיון שורות טבלה בגרירה ושחרור

בלוק טבלה

![20240409104621_rec_](https://static-docs.nocobase.com/20240409104621_rec_.gif)

בלוק טבלת יחסים

<video controls width="100%" src="https://static-docs.nocobase.com/20240409111903_rec_.mp4" title="Title"></video>

:::warning
בבלוק יחסים מסוג "אחד לרבים":

- אם נבחר שדה מיון לא מקובץ, כל הרשומות עשויות להשתתף במיון.
- אם הרשומות מקובצות תחילה לפי מפתח זר ולאחר מכן ממוינות, כלל המיון ישפיע רק על הנתונים בתוך הקבוצה הנוכחית.

התוצאה הסופית זהה, אך מספר הרשומות המשתתפות במיון שונה. לפרטים נוספים, עיין ב[הסבר על כללי מיון](#הסבר-על-כללי-מיון).
:::

#### מיון כרטיסי לוח (Board Cards) בגרירה ושחרור

![20240409110423_rec_](https://static-docs.nocobase.com/20240409110423_rec_.gif)

### הסבר על כללי מיון

#### תזוזה בין אלמנטים לא מקובצים (או באותה קבוצה)

נניח שיש קבוצת נתונים:

```
[1,2,3,4,5,6,7,8,9]
```

כאשר אלמנט מסוים, נניח 5, זז קדימה למיקום של 3, רק המיקומים של פריטים 3, 4 ו-5 משתנים. פריט 5 תופס את המיקום של 3, ופריטים 3 ו-4 זזים כל אחד אחורה במיקום אחד.

```
[1,2,5,3,4,6,7,8,9]
```

אם נזיז לאחר מכן את פריט 6 אחורה למיקום של 8, פריט 6 יתפוס את המיקום של 8, ופריטים 7 ו-8 יזוזו כל אחד קדימה במיקום אחד.

```
[1,2,5,3,4,7,8,6,9]
```

#### תזוזת אלמנטים בין קבוצות שונות

בעת מיון קבוצתי, אם רשומה מועברת לקבוצה אחרת, גם השיוך הקבוצתי שלה ישתנה. לדוגמה:

```
A: [1,2,3,4]
B: [5,6,7,8]
```

כאשר פריט 1 מועבר אחרי פריט 6 (התנהגות ברירת המחדל), גם הקבוצה שלו תשתנה מ-A ל-B.

```
A: [2,3,4]
B: [5,6,1,7,8]
```

#### שינויי מיון אינם קשורים לנתונים המוצגים בממשק

לדוגמה, נתבונן בקבוצת נתונים:

```
[1,2,3,4,5,6,7,8,9]
```

הממשק מציג רק תצוגה מסוננת:

```
[1,5,9]
```

כאשר פריט 1 מועבר למיקום של פריט 9, המיקומים של כל הפריטים שביניהם (2, 3, 4, 5, 6, 7, 8) ישתנו גם כן, למרות שהם אינם גלויים.

```
[2,3,4,5,6,7,8,9,1]
```

הממשק מציג כעת את הסדר החדש בהתבסס על הפריטים המסוננים:

```
[5,9,1]
```