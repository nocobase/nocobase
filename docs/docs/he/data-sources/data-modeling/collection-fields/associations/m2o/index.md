:::tip
מסמך זה תורגם על ידי בינה מלאכותית. לכל אי דיוק, אנא עיין ב[גרסה האנגלית](/en)
:::

# יחס ריבוי-לאחד (Many-to-One)

בדאטה בייס של ספרייה, ישויות (entities) מרכזיות הן ספרים ומחברים. מחבר אחד יכול לכתוב מספר רב של ספרים, אך לכל ספר יש בדרך כלל מחבר אחד בלבד. במקרה כזה, היחס בין מחברים לספרים הוא יחס ריבוי-לאחד (Many-to-One). מספר ספרים יכולים להיות מקושרים לאותו מחבר, אך כל ספר יכול להיות מקושר למחבר אחד בלבד.

תרשים ER:

![alt text](https://static-docs.nocobase.com/eaeeac974844db05c75cf0deeedf3652.png)

תצורת שדה:

![alt text](https://static-docs.nocobase.com/3b4484ebb98d2832f3dbf752bd84c9.png)

## תיאור פרמטרים

### אוסף מקור (Source Collection)

אוסף המקור הוא האוסף שבו נמצא השדה הנוכחי.

### אוסף יעד (Target Collection)

אוסף היעד הוא האוסף שאליו מקושר השדה.

### מפתח זר (Foreign Key)

השדה באוסף המקור המשמש ליצירת הקישור בין שני האוספים.

### מפתח יעד (Target Key)

השדה באוסף היעד שאליו מתייחס המפתח הזר. שדה זה חייב להיות ייחודי (unique).

### ON DELETE

`ON DELETE` מתייחס לכללים המופעלים על הפניות של מפתח זר באוספי צאצא קשורים, כאשר רשומות באוסף האב נמחקות. זוהי אפשרות המשמשת בעת הגדרת אילוץ מפתח זר (foreign key constraint). אפשרויות `ON DELETE` נפוצות כוללות:

- **CASCADE**: כאשר רשומה באוסף האב נמחקת, כל הרשומות הקשורות באוסף הצאצא נמחקות אוטומטית.
- **SET NULL**: כאשר רשומה באוסף האב נמחקת, ערכי המפתח הזר ברשומות הקשורות באוסף הצאצא מוגדרים ל-`NULL`.
- **RESTRICT**: זוהי אפשרות ברירת המחדל. היא מונעת מחיקה של רשומה באוסף האב אם קיימות רשומות קשורות באוסף הצאצא.
- **NO ACTION**: בדומה ל-`RESTRICT`, אפשרות זו מונעת מחיקה של רשומה באוסף האב אם קיימות רשומות קשורות באוסף הצאצא.