:::tip
מסמך זה תורגם על ידי בינה מלאכותית. לכל אי דיוק, אנא עיין ב[גרסה האנגלית](/en)
:::

# יחס רבים-לרבים

במערכת לרישום לקורסים, קיימות שתי ישויות: סטודנטים וקורסים. סטודנט יכול להירשם למספר קורסים, וקורס יכול לכלול מספר סטודנטים רשומים. זהו יחס רבים-לרבים. במסד נתונים יחסי, כדי לייצג יחס רבים-לרבים בין סטודנטים לקורסים, בדרך כלל משתמשים ב**אוסף** מתווך, כמו **אוסף** רישום. **אוסף** זה יכול לתעד אילו קורסים כל סטודנט בחר, ואילו סטודנטים נרשמו לכל קורס. עיצוב כזה מייצג ביעילות את יחס הרבים-לרבים בין סטודנטים לקורסים.

דיאגרמת ER:

![alt text](https://static-docs.nocobase.com/0e9921228e1ee375dc639431bb89782c.png)

תצורת שדה:

![alt text](https://static-docs.nocobase.com/8e2739ac5d44fb46f30e2da42ca87a82.png)

## תיאור פרמטרים

### אוסף מקור

**אוסף** המקור, שהוא ה**אוסף** שבו נמצא השדה הנוכחי.

### אוסף יעד

**אוסף** היעד, שהוא ה**אוסף** שאליו יש לקשר.

### אוסף מתווך

ה**אוסף** המתווך, המשמש כאשר קיים יחס רבים-לרבים בין שתי ישויות. ל**אוסף** המתווך יש שני מפתחות זרים המשמשים לשמירה על הקשר בין שתי הישויות.

### מפתח מקור

השדה ב**אוסף** המקור שאליו מפנה המפתח הזר. עליו להיות ייחודי.

### מפתח זר 1

השדה ב**אוסף** המתווך המקים את הקשר עם **אוסף** המקור.

### מפתח זר 2

השדה ב**אוסף** המתווך המקים את הקשר עם **אוסף** היעד.

### מפתח יעד

השדה ב**אוסף** היעד שאליו מפנה המפתח הזר. עליו להיות ייחודי.

### ON DELETE

`ON DELETE` מתייחס לכללים המיושמים על הפניות למפתחות זרים ב**אוספים** קשורים (צאצאים) כאשר רשומות ב**אוסף** האב נמחקות. זוהי אפשרות המשמשת בעת הגדרת אילוץ מפתח זר. אפשרויות `ON DELETE` נפוצות כוללות:

- **CASCADE**: כאשר רשומה ב**אוסף** האב נמחקת, כל הרשומות הקשורות ב**אוסף** הצאצא נמחקות אוטומטית.
- **SET NULL**: כאשר רשומה ב**אוסף** האב נמחקת, ערכי המפתח הזר ברשומות ה**אוסף** הצאצא הקשורות מוגדרים ל-`NULL`.
- **RESTRICT**: אפשרות ברירת המחדל. מונעת מחיקה של רשומת **אוסף** אב אם קיימות רשומות קשורות ב**אוסף** הצאצא.
- **NO ACTION**: בדומה ל-`RESTRICT`, מונעת מחיקה של רשומת **אוסף** אב אם קיימות רשומות קשורות ב**אוסף** הצאצא.