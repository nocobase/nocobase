---
pkg: '@nocobase/plugin-migration-manager'
---
:::tip
מסמך זה תורגם על ידי בינה מלאכותית. לכל אי דיוק, אנא עיין ב[גרסה האנגלית](/en)
:::


# מנהל הגירה

## מבוא

מנהל ההגירה מאפשר לכם להעביר תצורות יישום (application configurations) מסביבת יישום אחת לאחרת. הוא מתמקד בעיקר בהעברת "תצורות יישום". אם אתם זקוקים להגירה מלאה של נתונים, אנו ממליצים להשתמש בגיבוי ושחזור של "[מנהל הגיבוי](../backup-manager/index.mdx)".

## התקנה

מנהל ההגירה תלוי ב[תוסף](../backup-manager/index.mdx) הגיבוי. ודאו שה[תוסף](../backup-manager/index.mdx) מותקן ומופעל.

## תהליך ועקרונות

מנהל ההגירה מעביר טבלאות ונתונים ממסד הנתונים הראשי (primary database) בין יישומים, בהתאם לכללי הגירה מוגדרים. שימו לב, הוא אינו מעביר נתונים ממסדי נתונים חיצוניים או מיישומי משנה (sub-applications).

![20250102202546](https://static-docs.nocobase.com/20250102202546.png)

## כללי הגירה

### כללים מובנים

מנהל ההגירה יכול להעביר את כל הטבלאות במסד הנתונים הראשי ותומך בחמישה כללים מובנים:

- `רק מבנה (Schema-only)`: מעביר רק את המבנה (schema) של הטבלאות – ללא הוספה או עדכון של נתונים.
- `החלפה (מחיקה והוספה מחדש)`: מוחק את כל הרשומות הקיימות בטבלת היעד, ולאחר מכן מוסיף את הנתונים החדשים.
- `הוספה או עדכון (Upsert)`: בודק אם רשומה קיימת (לפי מפתח ראשי). אם כן, הוא מעדכן אותה; אם לא, הוא מוסיף אותה.
- `הוספה תוך התעלמות מכפילויות (Insert-ignore)`: מוסיף רשומות חדשות, אך אם רשומה כבר קיימת (לפי מפתח ראשי), ההוספה מתעלמת ממנה (אין עדכון).
- `דילוג`: מדלג לחלוטין על עיבוד הטבלה (ללא שינויי מבנה, ללא העברת נתונים).

הערות נוספות:

- "החלפה", "הוספה או עדכון" ו"הוספה תוך התעלמות מכפילויות" מסנכרנים גם שינויים במבנה הטבלה.
- אם טבלה משתמשת במפתח ראשי מסוג ID עם הגדלה אוטומטית, או אם אין לה מפתח ראשי, לא ניתן ליישם את הכללים `הוספה או עדכון` ו`הוספה תוך התעלמות מכפילויות`.
- הכללים `הוספה או עדכון` ו`הוספה תוך התעלמות מכפילויות` מסתמכים על המפתח הראשי כדי לקבוע אם הרשומה כבר קיימת.

### תכנון מפורט

![20250102204909](https://static-docs.nocobase.com/20250102204909.png)

### ממשק תצורה

הגדרת כללי הגירה

![20250102205450](https://static-docs.nocobase.com/20250102205450.png)

הפעלת כללים עצמאיים

![20250107105005](https://static-docs.nocobase.com/20250107105005.png)

בחירת כללים עצמאיים והטבלאות שיעובדו על פיהם

![20250107104644](https://static-docs.nocobase.com/20250107104644.png)

## קבצי הגירה

![20250102205844](https://static-docs.nocobase.com/20250102205844.png)

### יצירת הגירה חדשה

![20250102205857](https://static-docs.nocobase.com/20250102205857.png)

### ביצוע הגירה

![20250102205915](https://static-docs.nocobase.com/20250102205915.png)

בדיקת משתני סביבה של היישום (למדו עוד על [משתני סביבה](#))

![20250102212311](https://static-docs.nocobase.com/20250102212311.png)

אם חסרים משתנים, חלון קופץ יבקש מכם להזין את משתני הסביבה החדשים הנדרשים כאן, ולאחר מכן להמשיך.

![20250102210009](https://static-docs.nocobase.com/20250102210009.png)

## יומני הגירה

![20250102205738](https://static-docs.nocobase.com/20250102205738.png)

## שחזור

לפני ביצוע כל הגירה, היישום הנוכחי מגובה באופן אוטומטי. אם ההגירה נכשלת או שהתוצאות אינן כמצופה, תוכלו לבצע שחזור באמצעות [מנהל הגיבוי](../backup-manager/index.mdx).

![20250105195029](https://static-docs.nocobase.com/20250105195029.png)