---
pkg: "@nocobase/plugin-action-import"
---
:::tip
מסמך זה תורגם על ידי בינה מלאכותית. לכל אי דיוק, אנא עיין ב[גרסה האנגלית](/en)
:::

# ייבוא

## מבוא

באפשרותכם לייבא נתונים באמצעות תבנית Excel. ניתן להגדיר אילו שדות לייבא, והתבנית תיווצר באופן אוטומטי.

![20251029165818](https://static-docs.nocobase.com/20251029165818.png)

## הוראות ייבוא

### שדות מסוג מספר

תומך במספרים ובאחוזים. טקסט כמו `N/A` או `-` יסונן החוצה.

| מספר1 | אחוז | מספר2 | מספר3 |
| ----- | ------ | ----- | ----- |
| 123   | 25%    | N/A   | -     |

לאחר המרה ל-JSON:

```ts
{
  "Number1": 123,
  "Percentage": 0.25,
  "Number2": null,
  "Number3": null,
}
```

### שדות מסוג בוליאני

טקסט קלט נתמך (אנגלית אינה רגישה לרישיות):

- `Yes`, `Y`, `True`, `1`, `כן`
- `No`, `N`, `False`, `0`, `לא`

| שדה1 | שדה2 | שדה3 | שדה4 | שדה5 |
| ----- | ----- | ----- | ----- | ----- |
| לא    | כן    | Y     | true  | 0     |

לאחר המרה ל-JSON:

```ts
{
  "Field1": false,
  "Field2": true,
  "Field3": true,
  "Field4": true,
  "Field5": false,
}
```

### שדות מסוג תאריך

| DateOnly            | Local(+08:00)       | GMT                 |
| ------------------- | ------------------- | ------------------- |
| 2023-01-18 22:22:22 | 2023-01-18 22:22:22 | 2023-01-18 22:22:22 |

לאחר המרה ל-JSON:

```ts
{
  "DateOnly": "2023-01-18T00:00:00.000Z",
  "Local(+08:00)": "2023-01-18T14:22:22.000Z",
  "GMT": "2023-01-18T22:22:22.000Z",
}
```

### שדות מסוג בחירה

גם ערכי אפשרויות וגם תוויות אפשרויות יכולים לשמש כטקסט ייבוא. מספר אפשרויות מופרדות בפסיקים (`,` `，`) או בפסיקי רשימה (`、`).

לדוגמה, האפשרויות עבור השדה `Priority` כוללות:

| ערך אפשרות | תווית אפשרות |
| ------ | -------- |
| low    | נמוך       |
| medium | בינוני   |
| high   | גבוה       |

גם ערכי אפשרויות וגם תוויות אפשרויות יכולים לשמש כטקסט ייבוא.

| Priority |
| -------- |
| גבוה     |
| low      |

לאחר המרה ל-JSON:

```ts
[{ "Priority": "high" }, { "Priority": "low" }];
```

### שדות חלוקה מנהלית בסין

| אזור1         | אזור2         |
| ------------- | ------------- |
| 北京市/市辖区 | 天津市/市辖区 |

לאחר המרה ל-JSON:

```ts
{
  "Region1": ["11","1101"],
  "Region2": ["12","1201"]
}
```

### שדות קובץ מצורף

| קובץ מצורף                               |
| ---------------------------------------- |
| https://www.nocobase.com/images/logo.png |

לאחר המרה ל-JSON:

```ts
{
  "Attachment": [
    {
      "filename": "logo.png",
      "title": "logo.png",
      "extname": ".png",
      "url": "https://www.nocobase.com/images/logo.png"
    }
  ]
}
```

### שדות מסוג קשר

מספר רשומות מופרדות בפסיקים (`,` `，`) או בפסיקי רשימה (`、`).

| מחלקה/שם | קטגוריה/כותרת    |
| --------- | ------------ |
| צוות פיתוח    | קטגוריה1, קטגוריה2 |

לאחר המרה ל-JSON:

```ts
{
  "Department": [1], // 1 הוא מזהה הרשומה של המחלקה בשם "צוות פיתוח"
  "Category": [1,2], // 1,2 הם מזהי הרשומות של הקטגוריות עם הכותרות "קטגוריה1" ו-"קטגוריה2"
}
```

### שדות מסוג JSON

| JSON1           |
| --------------- |
| {"key":"value"} |

לאחר המרה ל-JSON:

```ts
{
  "JSON": {"key":"value"}
}
```

### סוגי גיאומטריית מפה

| Point | Line        | Polygon           | Circle |
| ----- | ----------- | ----------------- | ------ |
| 1,2   | (1,2),(3,4) | (1,2),(3,4),(1,2) | 1,2,3  |

לאחר המרה ל-JSON:

```ts
{
  "Point": [1,2],
  "Line": [[1,2], [3,4]],
  "Polygon": [[1,2], [3,4], [1,2]],
  "Circle": [1,2,3]
}
```

## פורמט ייבוא מותאם אישית

רשמו `ValueParser` מותאם אישית באמצעות המתודה `db.registerFieldValueParsers()`, לדוגמה:

```ts
import { BaseValueParser } from '@nocobase/database';

class PointValueParser extends BaseValueParser {
  async setValue(value) {
    if (Array.isArray(value)) {
      this.value = value;
    } else if (typeof value === 'string') {
      this.value = value.split(',');
    } else {
      this.errors.push('Value invalid');
    }
  }
}

const db = new Database();

// בעת ייבוא שדה מסוג point, הנתונים ינותחו על ידי PointValueParser
db.registerFieldValueParsers({
  point: PointValueParser,
});
```

דוגמת ייבוא

| Point |
| ----- |
| 1,2   |

לאחר המרה ל-JSON:

```ts
{
  "Point": [1,2]
}
```

## הגדרות פעולה

![20251029170959](https://static-docs.nocobase.com/20251029170959.png)

- הגדרת שדות הניתנים לייבוא

![20251029171036](https://static-docs.nocobase.com/20251029171036.png)

- [כללי קישוריות](/interface-builder/actions/action-settings/linkage-rule): הצגה/הסתרה דינמית של הכפתור;
- [עריכת כפתור](/interface-builder/actions/action-settings/edit-button): עריכת הכותרת, הסוג והאייקון של הכפתור;