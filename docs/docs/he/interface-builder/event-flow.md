:::tip
מסמך זה תורגם על ידי בינה מלאכותית. לכל אי דיוק, אנא עיין ב[גרסה האנגלית](/en)
:::

# זרימת אירועים

## מבוא

אם אתם רוצים להפעיל פעולות מותאמות אישית כאשר טופס מסוים משתנה, תוכלו להשתמש בזרימת אירועים. בנוסף לטפסים, גם דפים, בלוקים, כפתורים ושדות יכולים להשתמש בזרימת אירועים כדי להגדיר פעולות מותאמות אישית.

## איך משתמשים

בואו נראה דוגמה פשוטה שתמחיש איך מגדירים זרימת אירועים. ניצור קישור בין שתי טבלאות, כך שלחיצה על שורה בטבלה השמאלית תסנן אוטומטית את הנתונים בטבלה הימנית.

![20251031092211_rec_](https://static-docs.nocobase.com/20251031092211_rec_.gif)

שלבי ההגדרה הם כדלקמן:

1.  לחצו על אייקון "הברק" בפינה הימנית העליונה של בלוק הטבלה השמאלי כדי לפתוח את לוח הגדרות זרימת האירועים.
    ![20251031092425](https://static-docs.nocobase.com/20251031092425.png)
2.  לחצו על "הוסף זרימת אירועים" (Add event flow), ובחרו "לחיצה על שורה" (Row click) כ"אירוע מפעיל" (Trigger event). משמעות הדבר היא שהזרימה תופעל בלחיצה על שורת טבלה.
    ![20251031092637](https://static-docs.nocobase.com/20251031092637.png)
3.  "תנאי הפעלה" (Trigger condition) משמש להגדרת תנאים. זרימת האירועים תופעל רק כאשר התנאים מתקיימים. במקרה זה, איננו צריכים להגדיר תנאים כלשהם, ולכן הזרימה תופעל בכל לחיצה על שורה.
    ![20251031092717](https://static-docs.nocobase.com/20251031092717.png)
4.  רחפו מעל "הוסף שלב" (Add step) כדי להוסיף שלבי פעולה. נבחר ב"הגדר טווח נתונים" (Set data scope) כדי להגדיר את טווח הנתונים עבור הטבלה הימנית.
    ![20251031092755](https://static-docs.nocobase.com/20251031092755.png)
5.  העתיקו את ה-UID של הטבלה הימנית והדביקו אותו בשדה הקלט "UID של בלוק יעד" (Target block UID). לוח הגדרת תנאים יופיע מיד למטה, ושם תוכלו להגדיר את טווח הנתונים עבור הטבלה הימנית.
    ![20251031092915](https://static-docs.nocobase.com/20251031092915.png)
6.  בואו נגדיר תנאי, כפי שמוצג להלן:
    ![20251031093233](https://static-docs.nocobase.com/20251031093233.png)
7.  לאחר הגדרת טווח הנתונים, עליכם לרענן את הבלוק כדי להציג את התוצאות המסוננות. כעת נגדיר רענון של בלוק הטבלה הימני. הוסיפו שלב "רענן בלוקי יעד" (Refresh target blocks), ולאחר מכן הזינו את ה-UID של הטבלה הימנית.
    ![20251031093150](https://static-docs.nocobase.com/20251031093150.png)
    ![20251031093341](https://static-docs.nocobase.com/20251031093341.png)
8.  לבסוף, לחצו על כפתור השמירה בפינה הימנית התחתונה כדי להשלים את ההגדרה.

## סוגי אירועים

### לפני רינדור (Before render)

אירוע כללי שניתן להשתמש בו בדפים, בלוקים, כפתורים או שדות. באירוע זה, ניתן לבצע משימות אתחול, כגון הגדרת טווחי נתונים שונים בהתבסס על תנאים שונים.

### לחיצה על שורה (Row click)

אירוע ייחודי לבלוקי טבלה. מופעל בלחיצה על שורת טבלה. כאשר הוא מופעל, הוא מוסיף "רשומת שורה שנלחצה" (Clicked row record) להקשר, שניתן להשתמש בה כמשתנה בתנאים ובשלבים.

### שינוי ערכי טופס (Form values change)

אירוע ייחודי לבלוקי טופס. מופעל כאשר ערכי שדות הטופס משתנים. ניתן לגשת לערכי הטופס באמצעות המשתנה "טופס נוכחי" (Current form) בתנאים ובשלבים.

### לחיצה (Click)

אירוע ייחודי לכפתורים. מופעל בלחיצה על הכפתור.

## סוגי שלבים

### משתנה מותאם אישית (Custom variable)

צרו משתנה מותאם אישית לשימוש בתוך ההקשר.

#### טווח (Scope)

למשתנים מותאמים אישית יש טווח. לדוגמה, משתנה שהוגדר בזרימת אירועים של בלוק יכול לשמש רק בתוך אותו בלוק. כדי להפוך משתנה לזמין בכל הבלוקים בדף הנוכחי, יש להגדיר אותו בזרימת האירועים של הדף.

#### משתנה טופס (Form variable)

השתמשו בערכים מבלוק טופס כמשתנה. הגדרה:

![20251031093516](https://static-docs.nocobase.com/20251031093516.png)

-   Variable title: כותרת משתנה
-   Variable identifier: מזהה משתנה
-   Form UID: UID טופס

#### משתנים אחרים

סוגי משתנים נוספים ייתמכו בעתיד. הישארו מעודכנים.

### הגדר טווח נתונים (Set data scope)

הגדירו את טווח הנתונים עבור בלוק יעד. הגדרה:

![20251031093609](https://static-docs.nocobase.com/20251031093609.png)

-   Target block UID: UID של בלוק יעד
-   Condition: תנאי סינון

### רענן בלוקי יעד (Refresh target blocks)

רעננו בלוקי יעד. ניתן להגדיר מספר בלוקים. הגדרה:

![20251031093657](https://static-docs.nocobase.com/20251031093657.png)

-   Target block UID: UID של בלוק יעד

### ניווט לכתובת URL (Navigate to URL)

נווטו לכתובת URL. הגדרה:

![20251031093742](https://static-docs.nocobase.com/20251031093742.png)

-   URL: כתובת URL יעד, תומך במשתנים
-   Search parameters: פרמטרי שאילתה בכתובת ה-URL
-   Open in new window: אם מסומן, יפתח את כתובת ה-URL בלשונית דפדפן חדשה בעת הניווט.

### הצג הודעה (Show message)

הציגו הודעות משוב גלובליות.

#### מתי להשתמש

-   כדי לספק משוב על הצלחה, אזהרה ושגיאה.
-   מוצג במרכז החלק העליון ונעלם אוטומטית, מהווה דרך קלה להצגת התראה מבלי להפריע לפעולת המשתמש.

#### הגדרה

![20251031093825](https://static-docs.nocobase.com/20251031093825.png)

-   Message type: סוג הודעה
-   Message content: תוכן הודעה
-   Duration: משך תצוגה (בשניות)

### הצג התראה (Show notification)

הציגו התראות גלובליות.

#### מתי להשתמש

הציגו התראות בארבע פינות המערכת. נפוץ במקרים הבאים:

-   תוכן התראה מורכב יחסית.
-   התראות אינטראקטיביות המציעות למשתמשים צעדים הבאים.
-   התראות יזומות על ידי המערכת.

#### הגדרה

![20251031093934](https://static-docs.nocobase.com/20251031093934.png)

-   Notification type: סוג התראה
-   Notification title: כותרת התראה
-   Notification description: תיאור התראה
-   Placement: מיקום, אפשרויות: למעלה משמאל, למעלה מימין, למטה משמאל, למטה מימין

### הפעל JavaScript (Execute JavaScript)

![20251031094046](https://static-docs.nocobase.com/20251031094046.png)

הפעילו קוד JavaScript.