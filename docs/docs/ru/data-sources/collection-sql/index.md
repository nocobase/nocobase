---
pkg: "@nocobase/plugin-collection-sql"
---
:::tip Уведомление о переводе ИИ
Эта документация была автоматически переведена ИИ.
:::


# SQL коллекция

## Введение

SQL коллекция предоставляет мощный способ получения данных с помощью SQL-запросов. Извлекая поля данных через SQL-запросы и настраивая связанные метаданные полей, вы можете использовать эти поля так, как если бы работали с обычной таблицей. Эта функция особенно полезна для сценариев, включающих сложные запросы с объединениями, статистический анализ и многое другое.

## Руководство пользователя

### Создание новой SQL коллекции

<img src="https://static-docs.nocobase.com/202405191452918.png"/>

1. Введите ваш SQL-запрос в поле ввода и нажмите «Выполнить» (Execute). Система проанализирует запрос, чтобы определить задействованные таблицы и поля, автоматически извлекая соответствующие метаданные полей из исходных таблиц.

<img src="https://static-docs.nocobase.com/202405191453556.png"/>

2. Если анализ исходных таблиц и полей, выполненный системой, неверен, вы можете вручную выбрать соответствующие таблицы и поля, чтобы обеспечить использование корректных метаданных. Сначала выберите исходную таблицу, затем выберите соответствующие поля в разделе «Источник полей» ниже.

<img src="https://static-docs.nocobase.com/202405191453579.png"/>

3. Для полей, у которых нет прямого источника, система определит тип поля на основе типа данных. Если это определение неверно, вы можете вручную выбрать правильный тип поля.

<img src="https://static-docs.nocobase.com/202405191454703.png"/>

4. По мере настройки каждого поля вы можете предварительно просмотреть его отображение в области предварительного просмотра, что позволит вам увидеть немедленный результат ваших настроек.

<img src="https://static-docs.nocobase.com/202405191455439.png"/>

5. После того как вы завершите настройку и убедитесь, что все корректно, нажмите кнопку «Подтвердить» (Confirm) под полем ввода SQL-запроса, чтобы завершить отправку.

<img src="https://static-docs.nocobase.com/202405191455302.png"/>

### Редактирование

1. Если вам нужно изменить SQL-запрос, нажмите кнопку «Изменить» (Edit), чтобы напрямую изменить SQL-оператор и при необходимости перенастроить поля.

2. Чтобы настроить метаданные поля, используйте опцию «Настроить поля» (Configure fields), которая позволяет обновить настройки поля так же, как для обычной таблицы.

### Синхронизация

Если SQL-запрос остается неизменным, но базовая структура таблицы базы данных была изменена, вы можете синхронизировать и перенастроить поля, выбрав «Настроить поля» (Configure fields) - «Синхронизировать из базы данных» (Sync from database).

<img src="https://static-docs.nocobase.com/202405191456216.png"/>

### SQL коллекция в сравнении с подключенными представлениями базы данных

| Тип шаблона | Лучше всего подходит для | Метод реализации | Поддержка операций CRUD |
| :--- | :--- | :--- | :--- |
| SQL | Простые модели, легковесные сценарии использования<br />Ограниченное взаимодействие с базой данных<br />Избегание поддержки представлений<br />Предпочтение операций через пользовательский интерфейс | SQL-подзапрос | Не поддерживается |
| Подключение к представлению базы данных | Сложные модели<br />Требуется взаимодействие с базой данных<br />Требуется изменение данных<br />Требуется более надежная и стабильная поддержка базы данных | Представление базы данных | Частично поддерживается |

:::warning
При использовании SQL коллекции обязательно выбирайте таблицы, которыми можно управлять в NocoBase. Использование таблиц из той же базы данных, которые не подключены к NocoBase, может привести к неточному анализу SQL-запросов. Если это вызывает беспокойство, рассмотрите возможность создания и подключения к представлению.
:::