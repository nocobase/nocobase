:::tip Уведомление о переводе ИИ
Эта документация была автоматически переведена ИИ.
:::

# Проверка полей
Для обеспечения точности, безопасности и согласованности данных в **коллекциях** NocoBase предлагает функциональность проверки полей. Эта функция состоит из двух основных частей: настройка правил и применение правил.

## Настройка правил

![20250819181342](https://nocobase-docs.oss-cn-beijing.aliyuncs.com/20250819181342.png)

Системные поля NocoBase используют правила [Joi](https://joi.dev/api/), поддерживая следующие возможности:

### Строковый тип
Строковые типы Joi соответствуют следующим типам полей NocoBase: Однострочный текст, Многострочный текст, Номер телефона, Электронная почта, URL, Пароль и UUID.
#### Общие правила
- Минимальная длина
- Максимальная длина
- Длина
- Регулярное выражение
- Обязательное поле

#### Электронная почта

![20250819192011](https://nocobase-docs.oss-cn-beijing.aliyuncs.com/20250819192011.png)

[Посмотреть дополнительные параметры](https://joi.dev/api/?v=17.13.3#stringemailoptions)

#### URL

![20250819192409](https://nocobase-docs.oss-cn-beijing.aliyuncs.com/20250819192409.png)

[Посмотреть дополнительные параметры](https://joi.dev/api/?v=17.13.3#stringurioptions)

#### UUID

![20250819192731](https://nocobase-docs.oss-cn-beijing.aliyuncs.com/20250819192731.png)

[Посмотреть дополнительные параметры](https://joi.dev/api/?v=17.13.3#stringguid---aliases-uuid)

### Числовой тип
Числовые типы Joi соответствуют следующим типам полей NocoBase: Целое число, Число и Процент.
#### Общие правила
- Больше чем
- Меньше чем
- Максимальное значение
- Минимальное значение
- Кратное (число)

#### Целое число
Помимо общих правил, поля типа «Целое число» дополнительно поддерживают [проверку на целое число](https://joi.dev/api/?v=17.13.3#numberinteger) и [проверку на небезопасное целое число](https://joi.dev/api/?v=17.13.3#numberunsafeenabled).

![20250819193758](https://nocobase-docs.oss-cn-beijing.aliyuncs.com/20250819193758.png)

#### Число и Процент
Помимо общих правил, поля типа «Число» и «Процент» дополнительно поддерживают [проверку точности](https://joi.dev/api/?v=17.13.3#numberinteger).

![20250819193954](https://nocobase-docs.oss-cn-beijing.aliyuncs.com/20250819193954.png)

### Тип «Дата»
Типы даты Joi соответствуют следующим типам полей NocoBase: Дата (с часовым поясом), Дата (без часового пояса), Только дата и Unix-метка времени.

Поддерживаемые правила проверки:
- Больше чем
- Меньше чем
- Максимальное значение
- Минимальное значение
- Проверка формата метки времени
- Обязательное поле

### Поля связей
Поля связей поддерживают только проверку на обязательность заполнения. Обратите внимание, что проверка обязательности для полей связей в настоящее время не поддерживается в сценариях с вложенными формами или таблицами.

![20250819184344](https://nocobase-docs.oss-cn-beijing.aliyuncs.com/20250819184344.png)

## Применение правил проверки
После настройки правил для полей соответствующие правила проверки будут срабатывать при добавлении или изменении данных.

![20250819201027](https://nocobase-docs.oss-cn-beijing.aliyuncs.com/20250819201027.png)

Правила проверки также применяются к компонентам вложенных таблиц и вложенных форм:

![20250819202514](https://nocobase-docs.oss-cn-beijing.aliyuncs.com/20250819202514.png)

![20250819202357](https://nocobase-docs.oss-cn-beijing.aliyuncs.com/20250819202357.png)

Обратите внимание, что в сценариях с вложенными формами или таблицами проверка обязательности для полей связей не действует.

![20250819203016](https://nocobase-docs.oss-cn-beijing.aliyuncs.com/20250819203016.png)

## Отличия от клиентской проверки полей
Клиентская и серверная проверки полей применяются в разных сценариях и имеют существенные различия в реализации и моменте срабатывания правил, поэтому их необходимо управлять отдельно.

### Различия в способах настройки
- **Клиентская проверка**: Правила настраиваются в формах редактирования (как показано на рисунке ниже).
- **Серверная проверка полей**: Правила для полей задаются в разделе **Источник данных** → Настройка **коллекции**.

![20250819203836](https://nocobase-docs.oss-cn-beijing.aliyuncs.com/20250819203836.png)

![20250819203845](https://nocobase-docs.oss-cn-beijing.aliyuncs.com/20250819203845.png)

### Различия в моменте срабатывания проверки
- **Клиентская проверка**: Срабатывает в реальном времени, когда пользователь заполняет поля, и немедленно отображает сообщения об ошибках.
- **Серверная проверка полей**: Выполняется на стороне сервера после отправки данных, но до их сохранения в базу. Сообщения об ошибках возвращаются в ответе API.
- **Область применения**: Серверная проверка полей действует не только при отправке форм, но и во всех сценариях, связанных с добавлением или изменением данных, таких как **рабочие процессы** и импорт данных.
- **Сообщения об ошибках**: Клиентская проверка поддерживает настраиваемые сообщения об ошибках, тогда как серверная проверка в настоящее время не поддерживает их.