:::tip Уведомление о переводе ИИ
Эта документация была автоматически переведена ИИ.
:::

# Отношение «многие ко многим»

В системе записи на курсы существуют две сущности: студенты и курсы. Один студент может записаться на несколько курсов, и один курс может быть выбран несколькими студентами. Это и есть отношение «многие ко многим». В реляционных базах данных для представления такого отношения между студентами и курсами обычно используется промежуточная коллекция, например, коллекция «Запись на курсы». Эта коллекция может хранить информацию о том, какие курсы выбрал каждый студент и какие студенты записались на каждый курс. Такой подход позволяет эффективно моделировать отношение «многие ко многим» между студентами и курсами.

Диаграмма ER-отношений:

![alt text](https://static-docs.nocobase.com/0e9921228e1ee375dc639431bb89782c.png)

Настройка полей:

![alt text](https://static-docs.nocobase.com/8e2739ac5d44fb46f30e2da42ca87a82.png)

## Описание параметров

### Коллекция-источник

Коллекция, в которой находится текущее поле.

### Целевая коллекция

Коллекция, с которой устанавливается связь.

### Промежуточная коллекция

Используется, когда между двумя сущностями существует отношение «многие ко многим». Промежуточная коллекция содержит два внешних ключа, которые поддерживают связь между этими двумя сущностями.

### Ключ источника

Поле в коллекции-источнике, на которое ссылается внешний ключ. Оно должно быть уникальным.

### Внешний ключ 1

Поле в промежуточной коллекции, которое устанавливает связь с коллекцией-источником.

### Внешний ключ 2

Поле в промежуточной коллекции, которое устанавливает связь с целевой коллекцией.

### Целевой ключ

Поле в целевой коллекции, на которое ссылается внешний ключ. Оно должно быть уникальным.

### ON DELETE

`ON DELETE` определяет правила, применяемые к ссылкам внешних ключей в связанных дочерних коллекциях при удалении записей из родительской коллекции. Это опция, используемая при определении ограничения внешнего ключа. Распространенные варианты `ON DELETE` включают:

- **CASCADE**: При удалении записи из родительской коллекции все связанные записи в дочерней коллекции автоматически удаляются.
- **SET NULL**: При удалении записи из родительской коллекции значения внешних ключей в связанных записях дочерней коллекции устанавливаются в `NULL`.
- **RESTRICT**: Опция по умолчанию. Предотвращает удаление записи из родительской коллекции, если существуют связанные записи в дочерней коллекции.
- **NO ACTION**: Аналогично `RESTRICT`. Предотвращает удаление записи из родительской коллекции, если существуют связанные записи в дочерней коллекции.