---
pkg: '@nocobase/plugin-record-history'
---
:::tip Уведомление о переводе ИИ
Эта документация была автоматически переведена ИИ.
:::


# История изменений

## Введение

Плагин **История изменений** отслеживает изменения данных, автоматически сохраняя снимки и записи различий для операций создания, обновления и удаления. Он помогает пользователям быстро просматривать изменения данных и проводить аудит действий.

![](https://static-docs.nocobase.com/202511011338499.png)

## Включение Истории изменений

### Добавление коллекций и полей

Сначала перейдите на страницу настроек плагина История изменений, чтобы добавить коллекции и поля, для которых вы хотите отслеживать историю. Для повышения эффективности записи и предотвращения избыточности данных рекомендуется отслеживать только необходимые поля. Такие поля, как **уникальный ID**, **createdAt**, **updatedAt**, **createdBy** и **updatedBy**, обычно не требуют записи.

![](https://static-docs.nocobase.com/202511011315010.png)

![](https://static-docs.nocobase.com/202511011316342.png)

### Синхронизация снимков исторических данных

- Для записей, созданных до включения отслеживания истории, изменения могут быть зарегистрированы только после того, как первое обновление сгенерирует снимок; поэтому первое обновление или удаление не будет записано в историю.
- Чтобы сохранить историю существующих данных, вы можете выполнить однократную синхронизацию снимков.
- Размер снимка для одной коллекции рассчитывается как: количество записей × количество отслеживаемых полей.
- Для больших объемов данных рекомендуется фильтровать по диапазону данных и синхронизировать только важные записи.

![](https://static-docs.nocobase.com/202511011319386.png)

![](https://static-docs.nocobase.com/202511011319284.png)

Нажмите кнопку **«Синхронизировать исторические снимки»**, настройте поля и диапазон данных, чтобы начать синхронизацию.

![](https://static-docs.nocobase.com/202511011320958.png)

Задача синхронизации будет поставлена в очередь и выполнена в фоновом режиме. Вы можете обновить список, чтобы проверить статус ее выполнения.

## Использование блока «История изменений»

### Добавление блока

Выберите **блок «История изменений»** и выберите коллекцию, чтобы добавить соответствующий блок истории на вашу страницу.

![](https://static-docs.nocobase.com/202511011323410.png)

![](https://static-docs.nocobase.com/202511011331667.png)

Если вы добавляете блок истории во всплывающем окне сведений о записи, вы можете выбрать **«Текущая запись»**, чтобы отобразить историю, относящуюся к этой записи.

![](https://static-docs.nocobase.com/202511011338042.png)

![](https://static-docs.nocobase.com/202511011338499.png)

### Редактирование шаблонов описаний

Нажмите **«Редактировать шаблон»** в настройках блока, чтобы настроить текст описания для записей операций.

![](https://static-docs.nocobase.com/202511011340406.png)

Вы можете настроить отдельные шаблоны описаний для операций **создания**, **обновления** и **удаления**. Для операций обновления вы также можете настроить шаблон описания для изменений полей, как единый шаблон для всех полей, так и для отдельных полей.

![](https://static-docs.nocobase.com/202511011346400.png)

При настройке текста можно использовать переменные.

![](https://static-docs.nocobase.com/202511011347163.png)

После настройки вы можете выбрать применение шаблона ко **всем блокам истории изменений текущей коллекции** или **только этому блоку истории изменений**.

![](https://static-docs.nocobase.com/202511011348885.png)