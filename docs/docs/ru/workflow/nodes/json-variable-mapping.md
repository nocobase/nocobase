---
pkg: '@nocobase/plugin-workflow-json-variable-mapping'
---
:::tip Уведомление о переводе ИИ
Эта документация была автоматически переведена ИИ.
:::


# Сопоставление JSON-переменных

> v1.6.0

## Введение

Этот узел используется для сопоставления сложных JSON-структур из результатов вышестоящих узлов в переменные, которые затем можно использовать в последующих узлах. Например, после сопоставления результатов узлов SQL-операций и HTTP-запросов их значения свойств можно будет использовать в последующих узлах.

:::info{title=Подсказка}
В отличие от узла JSON-вычислений, узел сопоставления JSON-переменных не поддерживает пользовательские выражения и не основан на сторонних движках. Он предназначен только для сопоставления значений свойств в JSON-структуре, но при этом проще в использовании.
:::

## Создание узла

В интерфейсе конфигурации рабочего процесса нажмите кнопку плюс («+») в потоке, чтобы добавить узел «Сопоставление JSON-переменных»:

![Создание узла](https://static-docs.nocobase.com/20250113173635.png)

## Конфигурация узла

### Источник данных

Источник данных может быть результатом вышестоящего узла или объектом данных в контексте процесса. Обычно это неструктурированный объект данных, например, результат SQL-узла или узла HTTP-запроса.

![Источник данных](https://static-docs.nocobase.com/20250113173720.png)

### Ввод примера данных

Вставьте пример данных и нажмите кнопку «Разобрать», чтобы автоматически сгенерировать список переменных:

![Ввод примера данных](https://static-docs.nocobase.com/20250113182327.png)

Если в автоматически сгенерированном списке есть переменные, которые вам не нужны, вы можете удалить их, нажав кнопку «Удалить».

:::info{title=Подсказка}
Пример данных не является окончательным результатом выполнения; он используется только для помощи в генерации списка переменных.
:::

### Путь включает индекс массива

Если опция не выбрана, содержимое массива будет сопоставляться в соответствии со стандартным методом обработки переменных в рабочих процессах NocoBase. Например, если вы введете следующий пример:

```json
{
  "a": 1,
  "b": [
    {
      "c": 2
    },
    {
      "c": 3
    }
  ]
}
```

В сгенерированных переменных `b.c` будет представлять массив `[2, 3]`.

Если эта опция выбрана, путь переменной будет включать индекс массива, например, `b.0.c` и `b.1.c`.

![20250113184056](https://static-docs.nocobase.com/20250113184056.png)

При включении индексов массива вам необходимо убедиться, что индексы массива во входных данных согласованы; в противном случае это приведет к ошибке разбора.

## Использование в последующих узлах

В конфигурации последующих узлов вы можете использовать переменные, сгенерированные узлом сопоставления JSON-переменных:

![20250113203658](https://static-docs.nocobase.com/20250113203658.png)

Хотя JSON-структура может быть сложной, после сопоставления вам нужно будет только выбрать переменную для соответствующего пути.