:::tip Уведомление о переводе ИИ
Эта документация была автоматически переведена ИИ.
:::

# Множественные условия <Badge>v2.0.0+</Badge>

## Введение

Этот узел аналогичен операторам `switch / case` или `if / else if` в языках программирования. Система последовательно оценивает настроенные условия. Как только условие выполняется, рабочий процесс переходит к соответствующей ветви и пропускает проверку последующих условий. Если ни одно из условий не выполняется, будет выполнена ветвь "Иначе".

## Создание узла

В интерфейсе настройки рабочего процесса нажмите кнопку «плюс» («+») в потоке, чтобы добавить узел «Множественные условия»:

![Создание узла "Множественные условия"](https://static-docs.nocobase.com/20251123222134.png)

## Управление ветвями

### Ветви по умолчанию

После создания узел по умолчанию включает две ветви:

1.  **Ветвь условия**: Для настройки конкретных условий проверки.
2.  **Ветвь "Иначе"**: Выполняется, когда ни одно из условий не выполняется; не требует настройки условий.

Нажмите кнопку «Добавить ветвь» под узлом, чтобы добавить больше ветвей условий.

![20251123222540](https://static-docs.nocobase.com/20251123222540.png)

### Добавление ветви

После нажатия «Добавить ветвь» новая ветвь будет добавлена перед ветвью «Иначе».

![20251123222805](https://static-docs.nocobase.com/20251123222805.png)

### Удаление ветви

При наличии нескольких ветвей условий вы можете удалить ветвь, нажав значок корзины справа от нее. Если осталась только одна ветвь условия, ее нельзя удалить.

![20251123223127](https://static-docs.nocobase.com/20251123223127.png)

:::info{title=Примечание}
Удаление ветви также приведет к удалению всех узлов внутри нее; пожалуйста, действуйте осторожно.

Ветвь «Иначе» является встроенной и не может быть удалена.
:::

## Конфигурация узла

### Настройка условий

Нажмите на имя условия в верхней части ветви, чтобы изменить его детали:

![20251123223352](https://static-docs.nocobase.com/20251123223352.png)

#### Метка условия

Поддерживаются пользовательские метки. После заполнения метка будет отображаться как имя условия на схеме рабочего процесса. Если метка не настроена (или оставлена пустой), по умолчанию она будет отображаться как «Условие 1», «Условие 2» и так далее, по порядку.

![20251123224209](https://static-docs.nocobase.com/20251123224209.png)

#### Движок вычислений

В настоящее время поддерживаются три движка:

-   **Базовый**: Использует простые логические сравнения (например, «равно», «содержит» и т. д.) и комбинации «И»/«ИЛИ» для определения результатов.
-   **Math.js**: Поддерживает вычисление выражений с использованием синтаксиса [Math.js](https://mathjs.org/).
-   **Formula.js**: Поддерживает вычисление выражений с использованием синтаксиса [Formula.js](https://formulajs.info/) (аналогично формулам Excel).

Все три режима поддерживают использование переменных контекста рабочего процесса в качестве параметров.

### Когда ни одно из условий не выполняется

На панели настройки узла вы можете задать последующее действие, если ни одно из условий не выполняется:

![20251123224348](https://static-docs.nocobase.com/20251123224348.png)

*   **Завершить рабочий процесс с ошибкой (по умолчанию)**: Отмечает статус рабочего процесса как «ошибка» и прерывает его выполнение.
*   **Продолжить выполнение последующих узлов**: После завершения текущего узла продолжается выполнение последующих узлов в рабочем процессе.

:::info{title=Примечание}
Независимо от выбранного способа обработки, если ни одно из условий не выполняется, поток сначала перейдет в ветвь «Иначе» для выполнения узлов внутри нее.
:::

## История выполнения

В истории выполнения рабочего процесса узел «Множественные условия» обозначает результат проверки каждого условия разными цветами:

-   **Зеленый**: Условие выполнено; рабочий процесс перешел в эту ветвь.
-   **Красный**: Условие не выполнено (или произошла ошибка вычисления); эта ветвь пропущена.
-   **Синий**: Проверка не выполнялась (пропущена, поскольку предыдущее условие уже было выполнено).

![20251123225455](https://static-docs.nocobase.com/20251123225455.png)

Если ошибка конфигурации вызвала исключение при вычислении условия, помимо отображения красным цветом, при наведении курсора на имя условия будет показана подробная информация об ошибке:

![20251123231014](https://static-docs.nocobase.com/20251123231014.png)

При возникновении исключения при вычислении условия узел «Множественные условия» завершится со статусом «Ошибка» и не будет продолжать выполнение последующих узлов.