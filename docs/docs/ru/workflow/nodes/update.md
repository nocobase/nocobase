:::tip Уведомление о переводе ИИ
Эта документация была автоматически переведена ИИ.
:::

# Обновление данных

Этот узел используется для обновления данных в **коллекции**, которые соответствуют заданным условиям.

Части, касающиеся выбора **коллекции** и присвоения значений полям, аналогичны узлу "Создать запись". Основное отличие узла "Обновление данных" заключается в добавлении условий фильтрации и необходимости выбора режима обновления. Кроме того, результатом работы узла "Обновление данных" является количество успешно обновленных строк. Эту информацию можно просмотреть только в истории выполнения, и ее нельзя использовать в качестве переменной в последующих узлах.

## Создание узла

В интерфейсе настройки **рабочего процесса** нажмите кнопку с плюсом ("+") в потоке, чтобы добавить узел "Обновление данных":

![Добавить узел Обновление данных](https://static-docs.nocobase.com/9ff24d7bc173b3a71decc1f70ca9fb66.png)

## Настройка узла

![Настройка узла Обновление данных](https://static-docs.nocobase.com/98e0f941c57275fc835f08260d0b2e86.png)

### Коллекция

Выберите **коллекцию**, в которой необходимо обновить данные.

### Режим обновления

Существует два режима обновления:

*   **Массовое обновление**: В этом режиме не запускаются события **коллекции** для каждой обновленной записи. Он обеспечивает лучшую производительность и подходит для операций обновления больших объемов данных.
*   **Построчное обновление**: Этот режим запускает события **коллекции** для каждой обновленной записи. Однако при работе с большими объемами данных могут возникнуть проблемы с производительностью, поэтому используйте его с осторожностью.

Выбор режима обычно зависит от целевых данных для обновления и от того, нужно ли запускать другие события **рабочего процесса**. Если вы обновляете одну запись по первичному ключу, рекомендуется использовать "Построчное обновление". Если вы обновляете несколько записей по условиям, рекомендуется "Массовое обновление".

### Условия фильтрации

Аналогично условиям фильтрации при обычном запросе к **коллекции**, вы можете использовать контекстные переменные **рабочего процесса**.

### Значения полей

Аналогично присвоению значений полям в узле "Создать запись", вы можете использовать контекстные переменные **рабочего процесса** или вручную вводить статические значения.

Примечание: Данные, обновляемые узлом "Обновление данных" в **рабочем процессе**, не обрабатывают автоматически поле "Последний изменивший". Вам необходимо самостоятельно настроить значение этого поля по мере необходимости.

## Пример

Например, при создании новой "Статьи" вам может потребоваться автоматически обновить поле "Количество статей" в **коллекции** "Категории статей". Это можно реализовать с помощью узла "Обновление данных":

![Пример настройки узла Обновление данных](https://static-docs.nocobase.com/98e0f941c57275fc835f08260d0b2e86.png)

После запуска **рабочего процесса** поле "Количество статей" в **коллекции** "Категории статей" будет автоматически обновлено до текущего количества статей + 1.