---
pkg: '@nocobase/plugin-app-supervisor'
---

# Режим общей памяти

## Введение

Если вы хотите разделять бизнес-домены на уровне приложений без сложной архитектуры, используйте режим мульти-приложений в общей памяти.

В этом режиме несколько приложений работают в одном экземпляре NocoBase. Каждое приложение независимо (БД, создание, запуск, остановка), но процесс и память общие.

## Руководство

### Переменные окружения

Перед использованием убедитесь, что при запуске NocoBase заданы:

```bash
APP_DISCOVERY_ADAPTER=local
APP_PROCESS_ADAPTER=local
```

### Создание приложения

В **System Settings** откройте **App supervisor** для перехода к управлению приложениями.

![](https://static-docs.nocobase.com/202512291056215.png)

Нажмите **Add**, чтобы создать приложение.

![](https://static-docs.nocobase.com/202512291057696.png)

#### Параметры

| Параметр | Описание |
| --- | --- |
| **Отображаемое имя** | Имя приложения в UI |
| **ID приложения** | Глобально уникальный идентификатор |
| **Режим запуска** | - Запуск при первом посещении: старт при первом заходе по URL<br>- Запуск вместе с главным приложением: старт одновременно с главным (увеличивает время запуска) |
| **Окружение** | В режиме общей памяти доступно только `local` |
| **База данных** | Настройка основной БД:<br>- Новая база: использовать текущий DB-сервис и создать отдельную БД<br>- Новое подключение: подключиться к другому DB-сервису<br>- Новый schema: для PostgreSQL создать отдельную схему |
| **Обновление** | Разрешить автообновление данных старых версий NocoBase |
| **JWT Secret** | Генерация отдельного JWT-секрета для изоляции сессий |
| **Собственный домен** | Отдельный домен доступа для приложения |

### Запуск приложения

Нажмите **Start**.

> Если при создании был выбран _Start on first visit_, приложение запустится автоматически при первом открытии.

![](https://static-docs.nocobase.com/202512291121065.png)

### Доступ к приложению

Нажмите **Visit**, чтобы открыть приложение в новой вкладке.

По умолчанию используется путь `/apps/:appName/admin/`, например:

```bash
http://localhost:13000/apps/a_7zkxoarusnx/admin/
```

Также можно задать отдельный домен. Он должен резолвиться в текущий IP; при использовании Nginx добавьте домен в конфигурацию Nginx.

### Остановка приложения

Нажмите **Stop**.

![](https://static-docs.nocobase.com/202512291122113.png)

### Статус приложения

Текущий статус каждого приложения отображается в списке.

![](https://static-docs.nocobase.com/202512291122339.png)

### Удаление приложения

Нажмите **Delete**.

![](https://static-docs.nocobase.com/202512291122178.png)

## FAQ

### 1. Управление плагинами

Другие приложения могут использовать те же плагины (и версии), что и основное приложение, но конфигурация плагинов изолирована по приложениям.

### 2. Изоляция БД

Приложения могут использовать отдельные БД. Для обмена данными между приложениями используйте внешние источники данных.

### 3. Резервное копирование и миграция

Сейчас бэкап из основного приложения не включает данные других приложений (только базовые метаданные). Бэкап и миграцию выполняйте отдельно в каждом приложении.

### 4. Развертывание и обновления

В режиме общей памяти версии подприложений автоматически следуют версии основного приложения.

### 5. Сессии приложений

- При отдельном JWT Secret сессия приложения изолирована от основной и других. При доступе через подпути одного домена переключение между приложениями может требовать повторного входа (токен в LocalStorage). Рекомендуются отдельные домены.
- Без отдельного JWT Secret сессия разделяется с основным приложением. Это удобнее, но повышает риск безопасности: при пересечении user ID возможен несанкционированный межприложенческий доступ.
