:::tip Уведомление о переводе ИИ
Эта документация была автоматически переведена ИИ.
:::

# Глобальные переменные окружения

## TZ

Используется для установки часового пояса приложения. По умолчанию используется часовой пояс операционной системы.

https://en.wikipedia.org/wiki/List_of_tz_database_time_zones

:::warning
Операции, связанные со временем, будут обрабатываться в соответствии с этим часовым поясом. Изменение `TZ` может повлиять на значения дат в базе данных. Подробности смотрите в разделе «[Обзор даты и времени](#)».
:::

## APP_ENV

Среда приложения. Значение по умолчанию — `development`. Доступные варианты:

- `production` — производственная среда
- `development` — среда разработки

```bash
APP_ENV=production
```

## APP_KEY

Секретный ключ приложения, используемый для генерации токенов пользователей и других целей. Измените его на свой собственный ключ приложения и убедитесь, что он не будет раскрыт.

:::warning
Если `APP_KEY` будет изменён, старые токены станут недействительными.
:::

```bash
APP_KEY=app-key-test
```

## APP_PORT

Порт приложения. Значение по умолчанию — `13000`.

```bash
APP_PORT=13000
```

## API_BASE_PATH

Префикс адреса API NocoBase. Значение по умолчанию — `/api/`.

```bash
API_BASE_PATH=/api/
```

## API_BASE_URL

## CLUSTER_MODE

> `v1.6.0+`

Режим запуска в многоядерном (кластерном) режиме. Если эта переменная настроена, она будет передана команде `pm2 start` как параметр `-i <instances>`. Доступные опции соответствуют параметру `-i` команды `pm2` (см. [PM2: Cluster Mode](https://pm2.keymetrics.io/docs/usage/cluster-mode/)), включая:

- `max`: использовать максимальное количество ядер ЦП
- `-1`: использовать максимальное количество ядер ЦП минус 1
- `<number>`: указать конкретное количество ядер

Значение по умолчанию пусто, что означает, что режим не включён.

:::warning{title="Внимание"}
Этот режим необходимо использовать с плагинами, поддерживающими кластерный режим, иначе функциональность приложения может работать некорректно.
:::

Дополнительную информацию см. в разделе: [Кластерный режим](#).

## PLUGIN_PACKAGE_PREFIX

Префикс имени пакета плагина. По умолчанию: `@nocobase/plugin-,@nocobase/preset-`.

Например, если вы добавляете `hello` плагин в проект `my-nocobase-app`, полное имя пакета плагина будет `@my-nocobase-app/plugin-hello`.

`PLUGIN_PACKAGE_PREFIX` можно настроить следующим образом:

```bash
PLUGIN_PACKAGE_PREFIX=@nocobase/plugin-,@nocobase-preset-,@my-nocobase-app/plugin-
```

Тогда соответствие между именами плагинов и именами пакетов будет следующим:

- Имя пакета для плагина `users` — `@nocobase/plugin-users`
- Имя пакета для плагина `nocobase` — `@nocobase/preset-nocobase`
- Имя пакета для плагина `hello` — `@my-nocobase-app/plugin-hello`

## DB_DIALECT

Тип базы данных. Доступные варианты:

- `mariadb`
- `mysql`
- `postgres`

```bash
DB_DIALECT=mysql
```

## DB_HOST

Хост базы данных (требуется при использовании баз данных MySQL или PostgreSQL).

Значение по умолчанию — `localhost`.

```bash
DB_HOST=localhost
```

## DB_PORT

Порт базы данных (требуется при использовании баз данных MySQL или PostgreSQL).

- Порт по умолчанию для MySQL, MariaDB: 3306
- Порт по умолчанию для PostgreSQL: 5432

```bash
DB_PORT=3306
```

## DB_DATABASE

Имя базы данных (требуется при использовании баз данных MySQL или PostgreSQL).

```bash
DB_DATABASE=nocobase
```

## DB_USER

Пользователь базы данных (требуется при использовании баз данных MySQL или PostgreSQL).

```bash
DB_USER=nocobase
```

## DB_PASSWORD

Пароль базы данных (требуется при использовании баз данных MySQL или PostgreSQL).

```bash
DB_PASSWORD=nocobase
```

## DB_TABLE_PREFIX

Префикс таблиц базы данных.

```bash
DB_TABLE_PREFIX=nocobase_
```

## DB_UNDERSCORED

Определяет, следует ли преобразовывать имена таблиц и полей базы данных в стиль `snake_case`. Значение по умолчанию — `false`. Если вы используете базу данных MySQL (MariaDB) и `lower_case_table_names=1`, то `DB_UNDERSCORED` должен быть установлен в `true`.

:::warning
Когда `DB_UNDERSCORED=true`, фактические имена таблиц и полей в базе данных могут отличаться от тех, что отображаются в интерфейсе. Например, `orderDetails` в базе данных будет выглядеть как `order_details`.
:::

## DB_LOGGING

Переключатель логирования базы данных. Значение по умолчанию — `off`. Доступные варианты:

- `on` — включено
- `off` — выключено

```bash
DB_LOGGING=on
```

## LOGGER_TRANSPORT

Способ вывода логов. Несколько значений разделяются запятыми. В среде разработки значение по умолчанию — `console`, в производственной среде — `console,dailyRotateFile`. Доступные варианты:

- `console` — вывод в консоль (`console.log`)
- `file` — вывод в файл
- `dailyRotateFile` — ежедневная ротация файлов

```bash
LOGGER_TRANSPORT=console,dailyRotateFile
```

## LOGGER_BASE_PATH

Путь для хранения логов на основе файлов. По умолчанию — `storage/logs`.

```bash
LOGGER_BASE_PATH=storage/logs
```

## LOGGER_LEVEL

Уровень вывода логов. В среде разработки значение по умолчанию — `debug`, в производственной среде — `info`. Доступные варианты:

- `error`
- `warn`
- `info`
- `debug`
- `trace`

```bash
LOGGER_LEVEL=info
```

Уровень вывода логов базы данных — `debug`. Вывод контролируется переменной `DB_LOGGING` и не зависит от `LOGGER_LEVEL`.

## LOGGER_MAX_FILES

Максимальное количество сохраняемых файлов логов.

- Если `LOGGER_TRANSPORT` установлен в `file`, значение по умолчанию — `10`.
- Если `LOGGER_TRANSPORT` установлен в `dailyRotateFile`, используйте `[n]d` для указания количества дней. Значение по умолчанию — `14d`.

```bash
LOGGER_MAX_FILES=14d
```

## LOGGER_MAX_SIZE

Ротация логов по размеру.

- Если `LOGGER_TRANSPORT` установлен в `file`, единица измерения — `байт`, значение по умолчанию — `20971520 (20 * 1024 * 1024)`.
- Если `LOGGER_TRANSPORT` установлен в `dailyRotateFile`, можно использовать `[n]k`, `[n]m`, `[n]g`. По умолчанию не настроено.

```bash
LOGGER_MAX_SIZE=20971520
```

## LOGGER_FORMAT

Формат вывода логов. В среде разработки по умолчанию используется `console`, в производственной среде — `json`. Доступные варианты:

- `console`
- `json`
- `logfmt`
- `delimiter`

```bash
LOGGER_FORMAT=json
```

См. также: [Формат логов](#)

## CACHE_DEFAULT_STORE

Уникальный идентификатор для используемого хранилища кеша, определяющий серверное хранилище кеша по умолчанию. Значение по умолчанию — `memory`. Встроенные варианты:

- `memory`
- `redis`

```bash
CACHE_DEFAULT_STORE=memory
```

## CACHE_MEMORY_MAX

Максимальное количество элементов в кеше в памяти. Значение по умолчанию — `2000`.

```bash
CACHE_MEMORY_MAX=2000
```

## CACHE_REDIS_URL

Подключение к Redis, необязательно. Пример: `redis://localhost:6379`

```bash
CACHE_REDIS_URL=redis://localhost:6379
```

## TELEMETRY_ENABLED

Включение сбора телеметрических данных. По умолчанию — `off`.

```bash
TELEMETRY_ENABLED=on
```

## TELEMETRY_METRIC_READER

Включённые сборщики метрик мониторинга. По умолчанию — `console`. Другие значения должны соответствовать зарегистрированным именам соответствующих плагинов-сборщиков, например, `prometheus`. Несколько значений разделяются запятыми.

```bash
TELEMETRY_METRIC_READER=console,prometheus
```

## TELEMETRY_TRACE_PROCESSOR

Включённые обработчики данных трассировки. По умолчанию — `console`. Другие значения должны соответствовать зарегистрированным именам соответствующих плагинов-обработчиков. Несколько значений разделяются запятыми.

```bash
TELEMETRY_TRACE_PROCESSOR=console
```