
:::tip Уведомление о переводе ИИ
Эта документация была автоматически переведена ИИ.
:::


# Роли и разрешения

## Введение

Управление разрешениями для ИИ-сотрудников включает два уровня:

1.  **Разрешения на доступ к ИИ-сотрудникам**: определяют, какие пользователи могут использовать тех или иных ИИ-сотрудников.
2.  **Разрешения на доступ к данным**: определяют, как ИИ-сотрудники применяют контроль доступа при обработке данных.

В этом документе подробно описаны способы настройки и принципы работы этих двух типов разрешений.

---

## Настройка разрешений на доступ к ИИ-сотрудникам

### Настройка доступных ИИ-сотрудников для ролей

Перейдите на страницу `User & Permissions`, затем на вкладку `Roles & Permissions`, чтобы открыть страницу настройки ролей.

![20251022013802](https://static-docs.nocobase.com/20251022013802.png)

Выберите роль, нажмите вкладку `Permissions`, а затем вкладку `AI employees`. Здесь отобразится список ИИ-сотрудников, управляемых в плагине ИИ-сотрудников.

Установите или снимите флажок в столбце `Available` списка ИИ-сотрудников, чтобы определить, может ли текущая роль получить доступ к этому ИИ-сотруднику.

![20251022013942](https://static-docs.nocobase.com/20251022013942.png)

## Разрешения на доступ к данным

Когда ИИ-сотрудники обрабатывают данные, метод контроля разрешений зависит от типа используемого инструмента:

### Встроенные системные инструменты запроса данных (следуют разрешениям пользователя)
![05viz-configuration-2025-11-03-00-15-04](https://static-docs.nocobase.com/05viz-configuration-2025-11-03-00-15-04.png)

Следующие инструменты **строго следуют разрешениям текущего пользователя на доступ к данным**:

| Название инструмента           | Описание                                                              |
| :----------------------------- | :-------------------------------------------------------------------- |
| **Data source query**          | Запрос базы данных с использованием **источника данных**, **коллекции** и полей |
| **Data source records counting** | Подсчет общего количества записей с использованием **источника данных**, **коллекции** и полей |

**Принцип работы:**

Когда ИИ-сотрудники вызывают эти инструменты, система:
1.  Определяет личность текущего вошедшего в систему пользователя.
2.  Применяет правила доступа к данным, настроенные для этого пользователя в разделе **Роли и разрешения**.
3.  Возвращает только те данные, которые пользователь имеет право просматривать.

**Пример сценария:**

Предположим, менеджер по продажам А может просматривать только данные клиентов, за которые он отвечает. Когда он использует ИИ-сотрудника Viz для анализа клиентов:
-   Viz вызывает `Data source query` для запроса **коллекции** клиентов.
-   Система применяет правила фильтрации данных на основе разрешений менеджера по продажам А.
-   Viz может видеть и анализировать только те данные клиентов, к которым менеджер по продажам А имеет доступ.

Это гарантирует, что **ИИ-сотрудники не могут выходить за пределы собственных границ доступа пользователя к данным**.

---

### Пользовательские бизнес-инструменты **рабочего процесса** (независимая логика разрешений)

Бизнес-инструменты запросов, настроенные через **рабочий процесс**, имеют контроль разрешений, **независимый от разрешений пользователя**, и определяются бизнес-логикой **рабочего процесса**.

Эти инструменты обычно используются для:
-   Фиксированных процессов бизнес-анализа.
-   Предварительно настроенных агрегированных запросов.
-   Статистического анализа, выходящего за пределы разрешений.

#### Пример 1: Overall Analytics (Общий бизнес-анализ)

![05viz-configuration-2025-11-03-00-18-55](https://static-docs.nocobase.com/20251103001855.png)

В демо-версии CRM `Overall Analytics` — это шаблонный движок бизнес-анализа:

| Характеристика          | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
| **Рабочий процесс:**