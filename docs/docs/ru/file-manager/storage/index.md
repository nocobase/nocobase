:::tip Уведомление о переводе ИИ
Эта документация была автоматически переведена ИИ.
:::

# Обзор

## Введение

Движки хранения используются для сохранения файлов в определенных службах, включая локальное хранилище (на жестком диске сервера), облачное хранилище и т.д.

Прежде чем загружать какие-либо файлы, вам необходимо настроить движок хранения. При установке система автоматически добавляет движок локального хранения, который можно использовать сразу. Вы также можете добавить новые движки или изменить параметры существующих.

## Типы движков хранения

В настоящее время NocoBase имеет встроенную поддержку следующих типов движков:

- [Локальное хранилище](./local)
- [Amazon S3](./amazon-s3)
- [Aliyun OSS](./aliyun-oss)
- [Tencent COS](./tencent-cos)
- [S3 Pro](./s3-pro)

При установке система автоматически добавляет движок локального хранения, который можно использовать сразу. Вы также можете добавить новые движки или изменить параметры существующих.

## Общие параметры

Помимо специфических параметров для каждого типа движка, ниже представлены общие параметры (на примере локального хранилища):

![Пример конфигурации движка хранения файлов](https://static-docs.nocobase.com/20240529115151.png)

### Заголовок

Название движка хранения, используемое для идентификации человеком.

### Системное имя

Системное имя движка хранения, используемое для идентификации системой. Оно должно быть уникальным в рамках системы. Если поле оставить пустым, система автоматически сгенерирует случайное имя.

### Префикс публичного URL

Часть URL-адреса, представляющая собой префикс для публичного доступа к файлу. Это может быть базовый URL CDN, например: "`https://cdn.nocobase.com/app`" (без завершающего символа "`/`").

### Путь

Относительный путь, используемый при сохранении файлов. Эта часть также будет автоматически добавлена к конечному URL-адресу при доступе. Например: "`user/avatar`" (без начального или завершающего символа "`/`").

### Ограничение размера файла

Ограничение размера файлов, загружаемых в этот движок хранения. Файлы, превышающие установленный размер, не могут быть загружены. По умолчанию система ограничивает размер 20 МБ, но его можно увеличить до максимального значения в 1 ГБ.

### Типы файлов

Вы можете ограничить типы загружаемых файлов, используя синтаксис [MIME](https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types). Например: `image/*` обозначает файлы изображений. Несколько типов можно разделить запятыми, например: `image/*, application/pdf` разрешает файлы изображений и PDF-файлы.

### Движок хранения по умолчанию

Если этот параметр включен, движок устанавливается как системный движок хранения по умолчанию. Если для поля вложения или коллекции файлов не указан движок хранения, загруженные файлы будут сохраняться в движке хранения по умолчанию. Движок хранения по умолчанию нельзя удалить.

### Сохранять файл при удалении записи

Если этот параметр включен, загруженный файл в движке хранения будет сохранен, даже если запись данных в таблице вложений или коллекции файлов будет удалена. По умолчанию этот параметр отключен, что означает, что файл в движке хранения будет удален вместе с записью.

:::info{title=Подсказка}
После загрузки файла окончательный путь доступа формируется путем объединения нескольких частей:

```
<Префикс публичного URL>/<Путь>/<Имя файла><Расширение>
```

Например: `https://cdn.nocobase.com/app/user/avatar/20240529115151.png`.
:::