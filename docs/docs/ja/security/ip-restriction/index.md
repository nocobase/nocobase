---
pkg: "@nocobase/plugin-ip-restriction"
---
:::tip
このドキュメントはAIによって翻訳されました。不正確な情報については、[英語版](/en)をご参照ください
:::



pkg: '@nocobase/plugin-ip-restriction'
---

# IP制限

## はじめに

NocoBaseでは、管理者がユーザーのアクセスIPに対してホワイトリストやブラックリストを設定できます。これにより、不正な外部ネットワーク接続を制限したり、既知の悪意のあるIPアドレスをブロックしたりして、セキュリティリスクを低減することが可能です。また、管理者はアクセス拒否ログを照会し、リスクのあるIPを特定することもできます。

## 設定ルール

![2025-01-23-10-07-34-20250123100733](https://static-docs.nocobase.com/2025-01-23-10-07-34-20250123100733.png)

### IPフィルタリングモード

- **ブラックリスト**：ユーザーのアクセスIPがリスト内のIPと一致した場合、システムはアクセスを**拒否**します。一致しないIPはデフォルトで**許可**されます。
- **ホワイトリスト**：ユーザーのアクセスIPがリスト内のIPと一致した場合、システムはアクセスを**許可**します。一致しないIPはデフォルトで**禁止**されます。

### IPリスト

システムへのアクセスを許可または禁止するIPアドレスを定義します。その具体的な動作は、選択されたIPフィルタリングモードによって異なります。IPアドレスまたはCIDRネットワークセグメントアドレスを入力でき、複数のアドレスはカンマまたは改行で区切って指定します。

## ログの確認

ユーザーがアクセスを拒否されると、そのアクセスIPはシステムログに書き込まれます。対応するログファイルをダウンロードして分析することが可能です。

![2025-01-17-13-33-51-20250117133351](https://static-docs.nocobase.com/2025-01-17-13-33-51-20250117133351.png)

ログの例：

![2025-01-14-14-42-06-20250114144205](https://static-docs.nocobase.com/2025-01-14-14-42-06-20250114144205.png)

## 設定の推奨事項

### ブラックリストモードの推奨事項

- 既知の悪意のあるIPアドレスを追加し、潜在的なネットワーク攻撃を防ぎます。
- ブラックリストを定期的に確認・更新し、無効なIPアドレスやブロックが不要になったIPアドレスを削除します。

### ホワイトリストモードの推奨事項

- 信頼できる内部ネットワークのIPアドレス（オフィスネットワークセグメントなど）を追加し、コアシステムへの安全なアクセスを確保します。
- アクセス中断を防ぐため、動的に割り当てられるIPアドレスをホワイトリストに含めないでください。

### 一般的な推奨事項

- 個々のIPアドレスを個別に追加する代わりに、192.168.0.0/24のようなCIDRネットワークセグメントを使用して設定を簡素化します。
- 誤操作やシステム障害が発生した場合に迅速に復旧できるよう、IPリストの設定を定期的にバックアップしてください。
- アクセスログを定期的に監視し、異常なIPを特定して、ブラックリストまたはホワイトリストを適宜調整してください。