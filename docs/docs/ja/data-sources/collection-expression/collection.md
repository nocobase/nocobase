:::tip
このドキュメントはAIによって翻訳されました。不正確な情報については、[英語版](/en)をご参照ください
:::

# 式コレクション

## 「式」テンプレート コレクションの作成

ワークフロー内で動的な式演算ノードを使用する前に、まずコレクション管理ツールを使って「式」テンプレート コレクションを作成する必要があります。これは、さまざまな式を保存するためのものです。

![式コレクションの作成](https://static-docs.nocobase.com/33afe3369a1ea7943f12a04d9d4443ce.png)

## 式データの入力

次に、テーブルブロックを作成し、そのテンプレート コレクションにいくつかの数式データを入力します。「式」テンプレート コレクションの各行データは、特定のコレクションのデータモデルに対する計算ルールとして解釈できます。各数式データ行では、異なるコレクションのデータモデルのフィールド値を変数として使用し、さまざまな式を計算ルールとして記述できます。もちろん、必要に応じて異なる計算エンジンを利用することも可能です。

![式データの入力](https://static-docs.nocobase.com/761047f8daabacccbc6a6a24a73564093.png)

:::info{title=ヒント}
数式を作成したら、ビジネスデータと数式を関連付ける必要があります。各ビジネスデータ行を数式データ行に直接関連付けるのは煩雑になる可能性があるため、通常は分類のようなメタデータ コレクションと数式コレクションを多対一（または一対一）で関連付けます。その後、ビジネスデータを分類メタデータと多対一で関連付けます。こうすることで、ビジネスデータを作成する際に特定の分類メタデータを指定するだけで、その後の使用時にこの関連付けパスを通じて対応する数式データを見つけて利用できるようになります。
:::

## プロセスに関連データをロードする

コレクションイベントを例にワークフローを作成してみましょう。注文が作成されたときにトリガーされ、注文に関連する商品データと、商品に関連する式データを事前にロードする必要があります。

![コレクションイベント_トリガー設定](https://static-docs.nocobase.com/f181f75b10007afd5de068f3458d2e04.png)