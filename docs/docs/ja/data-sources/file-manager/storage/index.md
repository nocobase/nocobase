:::tip
このドキュメントはAIによって翻訳されました。不正確な情報については、[英語版](/en)をご参照ください
:::

# 概要

## 内蔵エンジン

現在、NocoBaseが内蔵でサポートしているエンジンタイプは以下の通りです。

- [ローカルストレージ](./local.md)
- [Alibaba Cloud OSS](./aliyun-oss.md)
- [Amazon S3](./amazon-s3.md)
- [Tencent Cloud COS](./tencent-cos.md)

システムのインストール時にローカルストレージエンジンが自動的に追加され、すぐに利用できます。新しいエンジンを追加したり、既存のエンジンパラメーターを編集したりすることも可能です。

## エンジン共通パラメーター

各エンジンタイプに固有のパラメーターとは別に、以下は共通パラメーターです（ローカルストレージを例にご説明します）。

![ファイルストレージエンジンの設定例](https://static-docs.nocobase.com/20240529115151.png)

### タイトル

ストレージエンジンの名前です。人間が識別するために使用します。

### システム名

ストレージエンジンのシステム名で、システムが識別するために使用します。システム内で一意である必要があります。空欄の場合、システムによって自動的にランダム生成されます。

### アクセスベースURL

ファイルを外部からアクセスするためのURLアドレスのプレフィックス部分です。CDNのアクセスベースURLにすることもできます。例：「`https://cdn.nocobase.com/app`」（末尾の「`/`」は不要です）。

### パス

ファイルを保存する際に使用される相対パスです。アクセス時には、この部分も最終的なURLに自動的に連結されます。例：「`user/avatar`」（先頭と末尾の「`/`」は不要です）。

### ファイルサイズ制限

このストレージエンジンにファイルをアップロードする際のサイズ制限です。この設定サイズを超えるファイルはアップロードできません。システムのデフォルト制限は20MBですが、最大1GBまで調整可能です。

### ファイルタイプ

アップロード可能なファイルタイプを制限できます。[MIME](https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types) 構文の記述形式を使用します。例えば、`image/*` は画像ファイルを表します。複数のタイプは英語のカンマで区切ることができます。例：`image/*, application/pdf` は画像タイプとPDFタイプの両方のファイルを許可します。

### デフォルトストレージエンジン

チェックを入れると、システムのデフォルトストレージエンジンとして設定されます。添付ファイルフィールドやファイルコレクションでストレージエンジンが指定されていない場合、アップロードされたファイルはすべてデフォルトストレージエンジンに保存されます。デフォルトストレージエンジンは削除できません。

### レコード削除時にファイルを保持

チェックを入れると、添付ファイルテーブルやファイルコレクションのデータレコードが削除されても、ストレージエンジンにアップロード済みのファイルは保持されます。デフォルトではチェックが入っておらず、レコード削除時にストレージエンジン内のファイルも同時に削除されます。

:::info{title=ヒント}
ファイルがアップロードされると、最終的なアクセスパスはいくつかの部分を連結して構成されます。

```
<アクセスベースURL>/<パス>/<ファイル名><拡張子>
```

例：`https://cdn.nocobase.com/app/user/avatar/20240529115151.png`。
:::