---
pkg: "@nocobase/plugin-multi-app-manager"
---
:::tip
このドキュメントはAIによって翻訳されました。不正確な情報については、[英語版](/en)をご参照ください
:::


# マルチアプリ

## はじめに

**マルチアプリプラグイン** を使うと、複数の独立したアプリケーションを個別にデプロイすることなく、動的に作成・管理できます。各子アプリは完全に独立したインスタンスであり、独自のデータベース、プラグイン、設定を持っています。

#### 利用シーン
- **マルチテナンシー**：独立したアプリケーションインスタンスを提供し、各顧客が独自のデータ、プラグイン設定、権限システムを持つことができます。
- **異なるビジネス領域におけるメインシステムとサブシステム**：大規模なシステムを、複数の独立してデプロイされた小規模なアプリケーションで構成できます。

:::warning
マルチアプリプラグイン自体は、ユーザー共有機能を提供していません。  
複数のアプリ間でユーザーを連携させたい場合は、**[認証プラグイン](/auth-verification)** と組み合わせて使用できます。
:::

## インストール

プラグイン管理画面で **マルチアプリ** プラグインを見つけて有効にしてください。

![](https://static-docs.nocobase.com/multi-app/Plugin-manager-NocoBase-10-16-2025_03_07_PM.png)

## 利用ガイド

### 子アプリの作成

システム設定メニューで「マルチアプリ」をクリックすると、マルチアプリ管理ページに移動します。

![](https://static-docs.nocobase.com/multi-app/Multi-app-NocoBase-10-16-2025_03_48_PM.png)

「新規追加」ボタンをクリックして、新しい子アプリを作成します。

![](https://static-docs.nocobase.com/multi-app/Multi-app-NocoBase-10-16-2025_03_50_PM.png)

#### フォームフィールドの説明

*   **名前**：子アプリの識別子です。グローバルで一意である必要があります。
*   **表示名**：子アプリがインターフェースに表示される名前です。
*   **起動モード**：
    *   **初回アクセス時に起動**：ユーザーがURL経由で初めて子アプリにアクセスしたときにのみ起動します。
    *   **メインアプリと同時に起動**：メインアプリの起動時に子アプリも同時に起動します（メインアプリの起動時間が増加します）。
*   **ポート**：子アプリが実行時に使用するポート番号です。
*   **カスタムドメイン**：子アプリ用に独立したサブドメインを設定します。
*   **メニューに固定**：子アプリのエントリをトップナビゲーションバーの左側に固定表示します。
*   **データベース接続**：子アプリのデータソースを設定するために使用します。以下の3つの方法をサポートしています。
    *   **新しいデータベース**：現在のデータサービスを再利用し、独立したデータベースを作成します。
    *   **新しいデータ接続**：完全に新しいデータベースサービスを設定します。
    *   **スキーマモード**：PostgreSQLで子アプリ用に独立したスキーマを作成します。
*   **アップグレード**：接続されたデータベースに古いバージョンのNocoBaseデータ構造が存在する場合、現在のバージョンに自動的にアップグレードされます。

### 子アプリの起動と停止

**起動** ボタンをクリックすると、子アプリを起動できます。  
> 作成時に *「初回アクセス時に起動」* を選択した場合、初回アクセス時に自動的に起動します。  

**表示** ボタンをクリックすると、新しいタブで子アプリが開きます。

![](https://static-docs.nocobase.com/multi-app/Multi-app-NocoBase-10-16-2025_04_00_PM.png)

### 子アプリの実行状態とログ

リストで各アプリケーションが使用しているメモリとCPUを確認できます。

![](https://static-docs.nocobase.com/multi-app/Multi-app-NocoBase-10-21-2025_10_31_AM.png)

**ログ** ボタンをクリックすると、子アプリの実行ログを表示できます。  
> 子アプリが起動後にアクセスできない場合（例：データベースの破損など）、ログを確認してトラブルシューティングを行えます。

![](https://static-docs.nocobase.com/multi-app/Multi-app-NocoBase-10-16-2025_04_02_PM.png)

### 子アプリの削除

**削除** ボタンをクリックすると、子アプリを削除できます。  
> 削除時には、データベースも一緒に削除するかどうかを選択できます。この操作は元に戻せませんので、慎重に進めてください。

### 子アプリへのアクセス
デフォルトでは、`/_app/:appName/admin/` を使用して子アプリにアクセスします。例：
```
http://localhost:13000/_app/a_7zkxoarusnx/admin/
```
また、子アプリ用に独立したサブドメインを設定することも可能です。その場合、ドメインを現在のIPに解決する必要があり、Nginxを使用している場合は、Nginxの設定にもドメインを追加する必要があります。

### コマンドラインからの子アプリ管理

プロジェクトのルートディレクトリで、コマンドラインから **PM2** を介して子アプリのインスタンスを管理できます。

```bash
yarn nocobase pm2 list              # 現在実行中のインスタンスリストを表示
yarn nocobase pm2 stop [appname]    # 特定の子アプリプロセスを停止
yarn nocobase pm2 delete [appname]  # 特定の子アプリプロセスを削除
yarn nocobase pm2 kill              # 起動中のすべてのプロセスを強制終了（メインアプリのインスタンスを含む場合があります）
```

### 以前のマルチアプリからのデータ移行

以前のマルチアプリ管理ページに移動し、**新しいマルチアプリにデータを移行** ボタンをクリックしてデータを移行します。

![](https://static-docs.nocobase.com/multi-app/Multi-app-manager-deprecated-NocoBase-10-21-2025_10_32_AM.png)

## よくある質問

#### 1. プラグイン管理
子アプリが使用できるプラグインは、メインアプリと同じです（バージョンも含む）。ただし、プラグインは個別に設定・使用できます。

#### 2. データベースの分離
子アプリは独立したデータベースを設定できます。アプリ間でデータを共有したい場合は、外部データソースを介して実現できます。

#### 3. データバックアップと移行
現在、メインアプリでのデータバックアップは子アプリのデータを含みません（子アプリの基本情報のみが含まれます）。子アプリ内で手動でデータをバックアップおよび移行する必要があります。

#### 4. デプロイと更新
子アプリのバージョンは、メインアプリのアップグレードに自動的に追従します。これにより、メインアプリと子アプリのバージョンの一貫性が自動的に保証されます。

#### 5. リソース管理
各子アプリのリソース消費量は、メインアプリとほぼ同じです。現在、単一のアプリケーションあたりのメモリ使用量は約500〜600MBです。