
# 1.0 与 2.0 的对比说明

## 核心改进亮点

1. **区块、字段与操作的扩展更为简单高效**  
  只需注册自定义的 BlockModel、ActionModel 或 FieldModel，即可一步到位完成扩展，内核会自动识别其可用范围。
    - 不再需要频繁配置 SchemaInitializerItem，无需调用 SchemaInitializerManager.add 或 SchemaInitializer.addItem。
    - 无需手动维护 SchemaSettings，各类 Item、dn.emit、dn.refresh 等调用也都无需再关心。
2. **全新 FlowSettings，提供统一的标准和流程控制，并实现无侵入式适配，显著提升性能**  
    - 开源版：保留以 Menu 分组的方式，每个 Step 映射一个 Item，只需配置 UISchema，参数的存储与刷新均由系统自动处理。
    - 企业版：支持属性流与事件流的自由编排，右侧抽屉式 UI 提供更强的交互能力和灵活性。无需什么都插件化，自由定制的程度更高
3. **提供更细粒度的按需加载，前端将进行一次大瘦身**  
  不必什么内容都堆到全局提前加载，可以在 Flow 里按需加载
4. **模块互通更加便捷，Model 提供统一 API**  
  拥有 model uid 后，即可访问模型能力，模块间协作更顺畅。
5. **Context 更清晰、可控**  
  提供全新的 FlowContext 体系，彻底解决了“取不到 Context”的问题，Context 不再依赖 Provider 或 Hook，拓展与维护更轻量。
6. **变量体系标准化**  
  基于 FlowContext，提供统一的适配接口，支持第三方注册，同时按层级自动展示，提升配置体验。
7. **Formily 只聚焦在 flow settings 的 uiSchema 上，其他地方不再使用**  
  不再承担整个页面的状态管理，逻辑归位，组件保持纯粹，去除不必要的复杂业务逻辑，尽可能的降低 Formily 带来的性能影响。
9. **测试更轻量，聚焦结果验证**  
  Flow 将逻辑与 UI 解耦，单元测试只需验证 Step 或 Flow 执行后的 Model 状态是否符合预期。
10. **通用能力抽象为 FlowAction**  
  常用功能可封装为可复用的 FlowStep 动作单元，极大提升复用效率与灵活性。

## uiSchema

* **1.0**：广泛使用于各类 Schema 配置中。
* **2.0**：仅保留在 Flow Step 的 [uiSchema](/examples/flow-definition/ui-schema-basic) 配置中，其它场景不再强制使用。

相关示例：

- [uiSchema - 步骤配置表单](/examples/flow-definition/ui-schema-basic)

### Designable

* **1.0**：用于实现 Schema 的增删改移。
* **2.0**：替代方案为 [FlowModel](/examples/flow-models/dnd) 提供的一系列持久化 API。

相关示例：

- [拖拽（DND）](/examples/flow-models/dnd)

### SchemaComponent

* **1.0**：作为动态渲染组件的主要手段，几乎无处不在。
* **2.0**：根据使用场景进行替代：

  * 常规场景：直接使用 React Component。
  * 可配置界面：使用 `FlowModel`。
  * Flow Step 的 `uiSchema` 场景：使用 `SchemaField` 和 `RecursionField`。

相关示例：

- [Hello, NocoBase!](/examples/flow-models/hello-world)
- [可配置的卡片](/examples/flow-models/my-card)
- [uiSchema - 步骤配置表单](/examples/flow-definition/ui-schema-basic)
- [自定义 uiSchema 组件](/examples/flow-definition/ui-schema-custom-component)

### SchemaInitializer

* **1.0**：用于初始化或新增子节点等。
* **2.0**：使用 `AddSubModelButton` 替代。

相关示例：

- [使用 AddSubModelButton 添加子模块](/examples/flow-models/sub-model)

### SchemaSettings

* **1.0**：用于注册或扩展 Schema 设置。
* **2.0**：由 `Model.registerFlow` 替代，通过配置 flow step 的 uiSchema 实现可配置。

相关示例：

- [uiSchema - 步骤配置表单](/examples/flow-definition/ui-schema-basic)
- []()

### SchemaToolbar

* **1.0**：提供 Schema 编辑操作的工具栏。
* **2.0**：统一由 `engine.flowSettings` 接管相关配置和操作。

### Provider

* **1.0**：使用自定义 Provider 提供上下文。
* **2.0**：统一使用 `FlowContext` 提供所需上下文。

相关示例：

- [ctx.defineProperty() - 定义属性](/examples/flow-context/define-property)
- [ctx.defineMethod() - 定义方法](/examples/flow-context/define-method)

### app.addComponents() 和 app.addScopes() 

* **2.0**：仅在 FlowSettings 里保留，用于配置 Flow Step 的 uiSchema

### 国际化

* **2.0**：使用 `ctx.i18n`、`ctx.t()` 和 `escapeT()` 代替